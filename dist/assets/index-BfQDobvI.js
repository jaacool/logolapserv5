function Yb(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function qp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Wb(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}),t}var Nh={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Xb(){if(F0)return Hl;F0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:u,ref:o!==void 0?o:null,props:l}}return Hl.Fragment=e,Hl.jsx=t,Hl.jsxs=t,Hl}var z0;function Qb(){return z0||(z0=1,Nh.exports=Xb()),Nh.exports}var S=Qb(),Mh={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function Zb(){if($0)return Le;$0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function C(B){return B===null||typeof B!="object"?null:(B=T&&B[T]||B["@@iterator"],typeof B=="function"?B:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,L={};function G(B,Y,ce){this.props=B,this.context=Y,this.refs=L,this.updater=ce||M}G.prototype.isReactComponent={},G.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},G.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function $(){}$.prototype=G.prototype;function H(B,Y,ce){this.props=B,this.context=Y,this.refs=L,this.updater=ce||M}var Q=H.prototype=new $;Q.constructor=H,k(Q,G.prototype),Q.isPureReactComponent=!0;var ae=Array.isArray;function ne(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function x(B,Y,ce){var oe=ce.ref;return{$$typeof:n,type:B,key:Y,ref:oe!==void 0?oe:null,props:ce}}function P(B,Y){return x(B.type,Y,B.props)}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function V(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ce){return Y[ce]})}var U=/\/+/g;function Ue(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?V(""+B.key):Y.toString(36)}function Ie(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ne,ne):(B.status="pending",B.then(function(Y){B.status==="pending"&&(B.status="fulfilled",B.value=Y)},function(Y){B.status==="pending"&&(B.status="rejected",B.reason=Y)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function J(B,Y,ce,oe,Ee){var ge=typeof B;(ge==="undefined"||ge==="boolean")&&(B=null);var Ce=!1;if(B===null)Ce=!0;else switch(ge){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(B.$$typeof){case n:case e:Ce=!0;break;case _:return Ce=B._init,J(Ce(B._payload),Y,ce,oe,Ee)}}if(Ce)return Ee=Ee(B),Ce=oe===""?"."+Ue(B,0):oe,ae(Ee)?(ce="",Ce!=null&&(ce=Ce.replace(U,"$&/")+"/"),J(Ee,Y,ce,"",function(Ki){return Ki})):Ee!=null&&(O(Ee)&&(Ee=P(Ee,ce+(Ee.key==null||B&&B.key===Ee.key?"":(""+Ee.key).replace(U,"$&/")+"/")+Ce)),Y.push(Ee)),1;Ce=0;var fe=oe===""?".":oe+":";if(ae(B))for(var tt=0;tt<B.length;tt++)oe=B[tt],ge=fe+Ue(oe,tt),Ce+=J(oe,Y,ce,ge,Ee);else if(tt=C(B),typeof tt=="function")for(B=tt.call(B),tt=0;!(oe=B.next()).done;)oe=oe.value,ge=fe+Ue(oe,tt++),Ce+=J(oe,Y,ce,ge,Ee);else if(ge==="object"){if(typeof B.then=="function")return J(Ie(B),Y,ce,oe,Ee);throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function le(B,Y,ce){if(B==null)return B;var oe=[],Ee=0;return J(B,oe,"","",function(ge){return Y.call(ce,ge,Ee++)}),oe}function se(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(ce){(B._status===0||B._status===-1)&&(B._status=1,B._result=ce)},function(ce){(B._status===0||B._status===-1)&&(B._status=2,B._result=ce)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var pe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},_e={map:le,forEach:function(B,Y,ce){le(B,function(){Y.apply(this,arguments)},ce)},count:function(B){var Y=0;return le(B,function(){Y++}),Y},toArray:function(B){return le(B,function(Y){return Y})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Le.Activity=w,Le.Children=_e,Le.Component=G,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=H,Le.StrictMode=s,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Le.__COMPILER_RUNTIME={__proto__:null,c:function(B){return D.H.useMemoCache(B)}},Le.cache=function(B){return function(){return B.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(B,Y,ce){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var oe=k({},B.props),Ee=B.key;if(Y!=null)for(ge in Y.key!==void 0&&(Ee=""+Y.key),Y)!I.call(Y,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&Y.ref===void 0||(oe[ge]=Y[ge]);var ge=arguments.length-2;if(ge===1)oe.children=ce;else if(1<ge){for(var Ce=Array(ge),fe=0;fe<ge;fe++)Ce[fe]=arguments[fe+2];oe.children=Ce}return x(B.type,Ee,oe)},Le.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Le.createElement=function(B,Y,ce){var oe,Ee={},ge=null;if(Y!=null)for(oe in Y.key!==void 0&&(ge=""+Y.key),Y)I.call(Y,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Ee[oe]=Y[oe]);var Ce=arguments.length-2;if(Ce===1)Ee.children=ce;else if(1<Ce){for(var fe=Array(Ce),tt=0;tt<Ce;tt++)fe[tt]=arguments[tt+2];Ee.children=fe}if(B&&B.defaultProps)for(oe in Ce=B.defaultProps,Ce)Ee[oe]===void 0&&(Ee[oe]=Ce[oe]);return x(B,ge,Ee)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(B){return{$$typeof:d,render:B}},Le.isValidElement=O,Le.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:se}},Le.memo=function(B,Y){return{$$typeof:f,type:B,compare:Y===void 0?null:Y}},Le.startTransition=function(B){var Y=D.T,ce={};D.T=ce;try{var oe=B(),Ee=D.S;Ee!==null&&Ee(ce,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ne,pe)}catch(ge){pe(ge)}finally{Y!==null&&ce.types!==null&&(Y.types=ce.types),D.T=Y}},Le.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Le.use=function(B){return D.H.use(B)},Le.useActionState=function(B,Y,ce){return D.H.useActionState(B,Y,ce)},Le.useCallback=function(B,Y){return D.H.useCallback(B,Y)},Le.useContext=function(B){return D.H.useContext(B)},Le.useDebugValue=function(){},Le.useDeferredValue=function(B,Y){return D.H.useDeferredValue(B,Y)},Le.useEffect=function(B,Y){return D.H.useEffect(B,Y)},Le.useEffectEvent=function(B){return D.H.useEffectEvent(B)},Le.useId=function(){return D.H.useId()},Le.useImperativeHandle=function(B,Y,ce){return D.H.useImperativeHandle(B,Y,ce)},Le.useInsertionEffect=function(B,Y){return D.H.useInsertionEffect(B,Y)},Le.useLayoutEffect=function(B,Y){return D.H.useLayoutEffect(B,Y)},Le.useMemo=function(B,Y){return D.H.useMemo(B,Y)},Le.useOptimistic=function(B,Y){return D.H.useOptimistic(B,Y)},Le.useReducer=function(B,Y,ce){return D.H.useReducer(B,Y,ce)},Le.useRef=function(B){return D.H.useRef(B)},Le.useState=function(B){return D.H.useState(B)},Le.useSyncExternalStore=function(B,Y,ce){return D.H.useSyncExternalStore(B,Y,ce)},Le.useTransition=function(){return D.H.useTransition()},Le.version="19.2.0",Le}var j0;function Hp(){return j0||(j0=1,Mh.exports=Zb()),Mh.exports}var ue=Hp();const eA=qp(ue);var kh={exports:{}},Gl={},Dh={exports:{}},Ph={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function tA(){return J0||(J0=1,(function(n){function e(J,le){var se=J.length;J.push(le);e:for(;0<se;){var pe=se-1>>>1,_e=J[pe];if(0<o(_e,le))J[pe]=le,J[se]=_e,se=pe;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var le=J[0],se=J.pop();if(se!==le){J[0]=se;e:for(var pe=0,_e=J.length,B=_e>>>1;pe<B;){var Y=2*(pe+1)-1,ce=J[Y],oe=Y+1,Ee=J[oe];if(0>o(ce,se))oe<_e&&0>o(Ee,ce)?(J[pe]=Ee,J[oe]=se,pe=oe):(J[pe]=ce,J[Y]=se,pe=Y);else if(oe<_e&&0>o(Ee,se))J[pe]=Ee,J[oe]=se,pe=oe;else break e}}return le}function o(J,le){var se=J.sortIndex-le.sortIndex;return se!==0?se:J.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],f=[],_=1,w=null,T=3,C=!1,M=!1,k=!1,L=!1,G=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function Q(J){for(var le=t(f);le!==null;){if(le.callback===null)s(f);else if(le.startTime<=J)s(f),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(f)}}function ae(J){if(k=!1,Q(J),!M)if(t(p)!==null)M=!0,ne||(ne=!0,V());else{var le=t(f);le!==null&&Ie(ae,le.startTime-J)}}var ne=!1,D=-1,I=5,x=-1;function P(){return L?!0:!(n.unstable_now()-x<I)}function O(){if(L=!1,ne){var J=n.unstable_now();x=J;var le=!0;try{e:{M=!1,k&&(k=!1,$(D),D=-1),C=!0;var se=T;try{t:{for(Q(J),w=t(p);w!==null&&!(w.expirationTime>J&&P());){var pe=w.callback;if(typeof pe=="function"){w.callback=null,T=w.priorityLevel;var _e=pe(w.expirationTime<=J);if(J=n.unstable_now(),typeof _e=="function"){w.callback=_e,Q(J),le=!0;break t}w===t(p)&&s(p),Q(J)}else s(p);w=t(p)}if(w!==null)le=!0;else{var B=t(f);B!==null&&Ie(ae,B.startTime-J),le=!1}}break e}finally{w=null,T=se,C=!1}le=void 0}}finally{le?V():ne=!1}}}var V;if(typeof H=="function")V=function(){H(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Ue=U.port2;U.port1.onmessage=O,V=function(){Ue.postMessage(null)}}else V=function(){G(O,0)};function Ie(J,le){D=G(function(){J(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(J){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var se=T;T=le;try{return J()}finally{T=se}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var se=T;T=J;try{return le()}finally{T=se}},n.unstable_scheduleCallback=function(J,le,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,J){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=se+_e,J={id:_++,callback:le,priorityLevel:J,startTime:se,expirationTime:_e,sortIndex:-1},se>pe?(J.sortIndex=se,e(f,J),t(p)===null&&J===t(f)&&(k?($(D),D=-1):k=!0,Ie(ae,se-pe))):(J.sortIndex=_e,e(p,J),M||C||(M=!0,ne||(ne=!0,V()))),J},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(J){var le=T;return function(){var se=T;T=le;try{return J.apply(this,arguments)}finally{T=se}}}})(Ph)),Ph}var K0;function nA(){return K0||(K0=1,Dh.exports=tA()),Dh.exports}var Uh={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function iA(){if(Y0)return dn;Y0=1;var n=Hp();function e(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,f,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:f,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dn.createPortal=function(p,f){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(p,f,null,_)},dn.flushSync=function(p){var f=u.T,_=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=f,s.p=_,s.d.f()}},dn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(p,f))},dn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},dn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var _=f.as,w=d(_,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,C=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;_==="style"?s.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:C}):_==="script"&&s.d.X(p,{crossOrigin:w,integrity:T,fetchPriority:C,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},dn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var _=d(f.as,f.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(p)},dn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var _=f.as,w=d(_,f.crossOrigin);s.d.L(p,_,{crossOrigin:w,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},dn.preloadModule=function(p,f){if(typeof p=="string")if(f){var _=d(f.as,f.crossOrigin);s.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(p)},dn.requestFormReset=function(p){s.d.r(p)},dn.unstable_batchedUpdates=function(p,f){return p(f)},dn.useFormState=function(p,f,_){return u.H.useFormState(p,f,_)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var W0;function sA(){if(W0)return Uh.exports;W0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Uh.exports=iA(),Uh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function rA(){if(X0)return Gl;X0=1;var n=nA(),e=Hp(),t=sA();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return p(y),i;if(v===c)return p(y),r;v=v.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=v;else{for(var b=!1,R=y.child;R;){if(R===a){b=!0,a=y,c=v;break}if(R===c){b=!0,c=y,a=v;break}R=R.sibling}if(!b){for(R=v.child;R;){if(R===a){b=!0,a=v,c=y;break}if(R===c){b=!0,c=v,a=y;break}R=R.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function _(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=_(i),r!==null)return r;i=i.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),H=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function Ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case G:return"Profiler";case L:return"StrictMode";case ae:return"Suspense";case ne:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case M:return"Portal";case H:return i.displayName||"Context";case $:return(i._context.displayName||"Context")+".Consumer";case Q:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Ue(i.type)||"Memo";case I:r=i._payload,i=i._init;try{return Ue(i(r))}catch{}}return null}var Ie=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},pe=[],_e=-1;function B(i){return{current:i}}function Y(i){0>_e||(i.current=pe[_e],pe[_e]=null,_e--)}function ce(i,r){_e++,pe[_e]=i.current,i.current=r}var oe=B(null),Ee=B(null),ge=B(null),Ce=B(null);function fe(i,r){switch(ce(ge,r),ce(Ee,i),ce(oe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?f0(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=f0(r),i=h0(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(oe),ce(oe,i)}function tt(){Y(oe),Y(Ee),Y(ge)}function Ki(i){i.memoizedState!==null&&ce(Ce,i);var r=oe.current,a=h0(r,i.type);r!==a&&(ce(Ee,i),ce(oe,a))}function di(i){Ee.current===i&&(Y(oe),Y(Ee)),Ce.current===i&&(Y(Ce),Ll._currentValue=se)}var xr,Ps;function an(i){if(xr===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);xr=r&&r[1]||"",Ps=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xr+i+Ps}var Ir=!1;function fi(i,r){if(!i||Ir)return"";Ir=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(ee){var X=ee}Reflect.construct(i,[],re)}else{try{re.call()}catch(ee){X=ee}i.call(re.prototype)}}else{try{throw Error()}catch(ee){X=ee}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),b=v[0],R=v[1];if(b&&R){var q=b.split(`
`),W=R.split(`
`);for(y=c=0;c<q.length&&!q[c].includes("DetermineComponentFrameRoot");)c++;for(;y<W.length&&!W[y].includes("DetermineComponentFrameRoot");)y++;if(c===q.length||y===W.length)for(c=q.length-1,y=W.length-1;1<=c&&0<=y&&q[c]!==W[y];)y--;for(;1<=c&&0<=y;c--,y--)if(q[c]!==W[y]){if(c!==1||y!==1)do if(c--,y--,0>y||q[c]!==W[y]){var te=`
`+q[c].replace(" at new "," at ");return i.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",i.displayName)),te}while(1<=c&&0<=y);break}}}finally{Ir=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?an(a):""}function Mo(i,r){switch(i.tag){case 26:case 27:case 5:return an(i.type);case 16:return an("Lazy");case 13:return i.child!==r&&r!==null?an("Suspense Fallback"):an("Suspense");case 19:return an("SuspenseList");case 0:case 15:return fi(i.type,!1);case 11:return fi(i.type.render,!1);case 1:return fi(i.type,!0);case 31:return an("Activity");default:return""}}function Yi(i){try{var r="",a=null;do r+=Mo(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Pt=Object.prototype.hasOwnProperty,Oe=n.unstable_scheduleCallback,Mi=n.unstable_cancelCallback,ko=n.unstable_shouldYield,Mn=n.unstable_requestPaint,Xt=n.unstable_now,jn=n.unstable_getCurrentPriorityLevel,Nr=n.unstable_ImmediatePriority,Us=n.unstable_UserBlockingPriority,ki=n.unstable_NormalPriority,Mr=n.unstable_LowPriority,Do=n.unstable_IdlePriority,kr=n.log,Ka=n.unstable_setDisableYieldValue,wn=null,qt=null;function Qt(i){if(typeof kr=="function"&&Ka(i),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(wn,i)}catch{}}var Ct=Math.clz32?Math.clz32:Po,Ya=Math.log,Dr=Math.LN2;function Po(i){return i>>>=0,i===0?32:31-(Ya(i)/Dr|0)|0}var Jn=256,Wi=262144,Rt=4194304;function Kn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Yn(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=Kn(c):(b&=R,b!==0?y=Kn(b):a||(a=R&~i,a!==0&&(y=Kn(a))))):(R=c&~v,R!==0?y=Kn(R):b!==0?y=Kn(b):a||(a=c&~i,a!==0&&(y=Kn(a)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:y}function kn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Wa(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uo(){var i=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),i}function En(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Wn(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Xa(i,r,a,c,y,v){var b=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,q=i.expirationTimes,W=i.hiddenUpdates;for(a=b&~a;0<a;){var te=31-Ct(a),re=1<<te;R[te]=0,q[te]=-1;var X=W[te];if(X!==null)for(W[te]=null,te=0;te<X.length;te++){var ee=X[te];ee!==null&&(ee.lane&=-536870913)}a&=~re}c!==0&&Os(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(b&~r))}function Os(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-Ct(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Pr(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-Ct(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Ur(i,r){var a=r&-r;return a=(a&42)!==0?1:Xi(a),(a&(i.suspendedLanes|r))!==0?0:a}function Xi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Or(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:O0(i.type))}function Dn(i,r){var a=le.p;try{return le.p=i,r()}finally{le.p=a}}var me=Math.random().toString(36).slice(2),we="__reactFiber$"+me,ye="__reactProps$"+me,de="__reactContainer$"+me,Re="__reactEvents$"+me,Ye="__reactListeners$"+me,Ne="__reactHandles$"+me,nt="__reactResources$"+me,Ut="__reactMarker$"+me;function Xn(i){delete i[we],delete i[ye],delete i[Re],delete i[Ye],delete i[Ne]}function Qn(i){var r=i[we];if(r)return r;for(var a=i.parentNode;a;){if(r=a[de]||a[we]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=w0(i);i!==null;){if(a=i[we])return a;i=w0(i)}return r}i=a,a=i.parentNode}return null}function xt(i){if(i=i[we]||i[de]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Yt(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function pn(i){var r=i[nt];return r||(r=i[nt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function wt(i){i[Ut]=!0}var Di=new Set,Qi={};function Tn(i,r){Pn(i,r),Pn(i+"Capture",r)}function Pn(i,r){for(Qi[i]=r,i=0;i<r.length;i++)Di.add(r[i])}var Lr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Br={},Ls={};function Vr(i){return Pt.call(Ls,i)?!0:Pt.call(Br,i)?!1:Lr.test(i)?Ls[i]=!0:(Br[i]=!0,!1)}function Bs(i,r,a){if(Vr(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Et(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function et(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function Ot(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sn(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Zi(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(b){a=""+b,v.call(this,b)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ze(i){if(!i._valueTracker){var r=Sn(i)?"checked":"value";i._valueTracker=Zi(i,r,""+i[r])}}function pi(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=Sn(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function ln(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Zt=/[\n"\\]/g;function ve(i){return i.replace(Zt,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fe(i,r,a,c,y,v,b,R){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Ot(r)):i.value!==""+Ot(r)&&(i.value=""+Ot(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?Ge(i,b,Ot(r)):a!=null?Ge(i,b,Ot(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Ot(R):i.removeAttribute("name")}function Be(i,r,a,c,y,v,b,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){ze(i);return}a=a!=null?""+Ot(a):"",r=r!=null?""+Ot(r):a,R||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),ze(i)}function Ge(i,r,a){r==="number"&&ln(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function at(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Ot(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function ct(i,r,a){if(r!=null&&(r=""+Ot(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Ot(a):""}function yt(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(Ie(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Ot(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),ze(i)}function it(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var bn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gn(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||bn.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function es(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&gn(i,y,c)}else for(var v in r)r.hasOwnProperty(v)&&gn(i,v,r[v])}function Vs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(i){return Pi.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function gi(){}var Za=null;function Zn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qs=null,Ui=null;function qr(i){var r=xt(i);if(r&&(i=r.stateNode)){var a=i[ye]||null;e:switch(i=r.stateNode,r.type){case"input":if(Fe(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ve(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[ye]||null;if(!y)throw Error(s(90));Fe(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&pi(c)}break e;case"textarea":ct(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&at(i,!!a.multiple,r,!1)}}}var Lo=!1;function Hs(i,r,a){if(Lo)return i(r,a);Lo=!0;try{var c=i(r);return c}finally{if(Lo=!1,(qs!==null||Ui!==null)&&(gc(),qs&&(r=qs,i=Ui,Ui=qs=null,qr(r),i)))for(r=0;r<i.length;r++)qr(i[r])}}function mi(i,r){var a=i.stateNode;if(a===null)return null;var c=a[ye]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hr=!1;if(ei)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){Hr=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{Hr=!1}var Oi=null,el=null,Gr=null;function tl(){if(Gr)return Gr;var i,r=el,a=r.length,c,y="value"in Oi?Oi.value:Oi.textContent,v=y.length;for(i=0;i<a&&r[i]===y[i];i++);var b=a-i;for(c=1;c<=b&&r[a-c]===y[v-c];c++);return Gr=y.slice(i,1<c?1-c:void 0)}function Fr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ts(){return!0}function yi(){return!1}function en(i){function r(a,c,y,v,b){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ts:yi,this.isPropagationStopped=yi,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),r}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=en(ns),Gs=w({},ns,{view:0,detail:0}),nl=en(Gs),Fs,Bo,Bi,Vo=w({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:un,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bi&&(Bi&&i.type==="mousemove"?(Fs=i.screenX-Bi.screenX,Bo=i.screenY-Bi.screenY):Bo=Fs=0,Bi=i),Fs)},movementY:function(i){return"movementY"in i?i.movementY:Bo}}),il=en(Vo),zr=w({},Vo,{dataTransfer:0}),Su=en(zr),bu=w({},Gs,{relatedTarget:0}),$r=en(bu),sl=w({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Au=en(sl),qo=w({},ns,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Cu=en(qo),Ru=w({},ns,{data:0}),Vi=en(Ru),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Nu[i])?!!r[i]:!1}function un(){return Mu}var ku=w({},Gs,{key:function(i){if(i.key){var r=xu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Fr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Iu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:un,charCode:function(i){return i.type==="keypress"?Fr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Du=en(ku),zs=w({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g=en(zs),E=w({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:un}),A=en(E),N=w({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=en(N),Z=w({},Vo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),he=en(Z),Ve=w({},ns,{newState:0,oldState:0}),Lt=en(Ve),dt=[9,13,27,32],Mt=ei&&"CompositionEvent"in window,cn=null;ei&&"documentMode"in document&&(cn=document.documentMode);var is=ei&&"TextEvent"in window&&!cn,vi=ei&&(!Mt||cn&&8<cn&&11>=cn),_i=" ",jr=!1;function Ho(i,r){switch(i){case"keyup":return dt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Go=!1;function _S(i,r){switch(i){case"compositionend":return Tg(r);case"keypress":return r.which!==32?null:(jr=!0,_i);case"textInput":return i=r.data,i===_i&&jr?null:i;default:return null}}function wS(i,r){if(Go)return i==="compositionend"||!Mt&&Ho(i,r)?(i=tl(),Gr=el=Oi=null,Go=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return vi&&r.locale!=="ko"?null:r.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!ES[i.type]:r==="textarea"}function bg(i,r,a,c){qs?Ui?Ui.push(c):Ui=[c]:qs=c,r=Tc(r,"onChange"),0<r.length&&(a=new Li("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var rl=null,ol=null;function TS(i){o0(i,0)}function Pu(i){var r=Yt(i);if(pi(r))return i}function Ag(i,r){if(i==="change")return r}var Cg=!1;if(ei){var Od;if(ei){var Ld="oninput"in document;if(!Ld){var Rg=document.createElement("div");Rg.setAttribute("oninput","return;"),Ld=typeof Rg.oninput=="function"}Od=Ld}else Od=!1;Cg=Od&&(!document.documentMode||9<document.documentMode)}function xg(){rl&&(rl.detachEvent("onpropertychange",Ig),ol=rl=null)}function Ig(i){if(i.propertyName==="value"&&Pu(ol)){var r=[];bg(r,ol,i,Zn(i)),Hs(TS,r)}}function SS(i,r,a){i==="focusin"?(xg(),rl=r,ol=a,rl.attachEvent("onpropertychange",Ig)):i==="focusout"&&xg()}function bS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Pu(ol)}function AS(i,r){if(i==="click")return Pu(r)}function CS(i,r){if(i==="input"||i==="change")return Pu(r)}function RS(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Un=typeof Object.is=="function"?Object.is:RS;function al(i,r){if(Un(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Pt.call(r,y)||!Un(i[y],r[y]))return!1}return!0}function Ng(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Mg(i,r){var a=Ng(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ng(a)}}function kg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?kg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Dg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ln(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=ln(i.document)}return r}function Bd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var xS=ei&&"documentMode"in document&&11>=document.documentMode,Fo=null,Vd=null,ll=null,qd=!1;function Pg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qd||Fo==null||Fo!==ln(c)||(c=Fo,"selectionStart"in c&&Bd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ll&&al(ll,c)||(ll=c,c=Tc(Vd,"onSelect"),0<c.length&&(r=new Li("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Fo)))}function Jr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var zo={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Hd={},Ug={};ei&&(Ug=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Kr(i){if(Hd[i])return Hd[i];if(!zo[i])return i;var r=zo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ug)return Hd[i]=r[a];return i}var Og=Kr("animationend"),Lg=Kr("animationiteration"),Bg=Kr("animationstart"),IS=Kr("transitionrun"),NS=Kr("transitionstart"),MS=Kr("transitioncancel"),Vg=Kr("transitionend"),qg=new Map,Gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gd.push("scrollEnd");function wi(i,r){qg.set(i,r),Tn(r,[i])}var Uu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ti=[],$o=0,Fd=0;function Ou(){for(var i=$o,r=Fd=$o=0;r<i;){var a=ti[r];ti[r++]=null;var c=ti[r];ti[r++]=null;var y=ti[r];ti[r++]=null;var v=ti[r];if(ti[r++]=null,c!==null&&y!==null){var b=c.pending;b===null?y.next=y:(y.next=b.next,b.next=y),c.pending=y}v!==0&&Hg(a,y,v)}}function Lu(i,r,a,c){ti[$o++]=i,ti[$o++]=r,ti[$o++]=a,ti[$o++]=c,Fd|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function zd(i,r,a,c){return Lu(i,r,a,c),Bu(i)}function Yr(i,r){return Lu(i,null,null,r),Bu(i)}function Hg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&r!==null&&(y=31-Ct(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),v):null}function Bu(i){if(50<Nl)throw Nl=0,eh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var jo={};function kS(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(i,r,a,c){return new kS(i,r,a,c)}function $d(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ss(i,r){var a=i.alternate;return a===null?(a=On(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Gg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Vu(i,r,a,c,y,v){var b=0;if(c=i,typeof i=="function")$d(i)&&(b=1);else if(typeof i=="string")b=Lb(i,a,oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=On(31,a,r,y),i.elementType=x,i.lanes=v,i;case k:return Wr(a.children,y,v,r);case L:b=8,y|=24;break;case G:return i=On(12,a,r,y|2),i.elementType=G,i.lanes=v,i;case ae:return i=On(13,a,r,y),i.elementType=ae,i.lanes=v,i;case ne:return i=On(19,a,r,y),i.elementType=ne,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case H:b=10;break e;case $:b=9;break e;case Q:b=11;break e;case D:b=14;break e;case I:b=16,c=null;break e}b=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=On(b,a,r,y),r.elementType=i,r.type=c,r.lanes=v,r}function Wr(i,r,a,c){return i=On(7,i,c,r),i.lanes=a,i}function jd(i,r,a){return i=On(6,i,null,r),i.lanes=a,i}function Fg(i){var r=On(18,null,null,0);return r.stateNode=i,r}function Jd(i,r,a){return r=On(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var zg=new WeakMap;function ni(i,r){if(typeof i=="object"&&i!==null){var a=zg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Yi(r)},zg.set(i,r),r)}return{value:i,source:r,stack:Yi(r)}}var Jo=[],Ko=0,qu=null,ul=0,ii=[],si=0,$s=null,qi=1,Hi="";function rs(i,r){Jo[Ko++]=ul,Jo[Ko++]=qu,qu=i,ul=r}function $g(i,r,a){ii[si++]=qi,ii[si++]=Hi,ii[si++]=$s,$s=i;var c=qi;i=Hi;var y=32-Ct(c)-1;c&=~(1<<y),a+=1;var v=32-Ct(r)+y;if(30<v){var b=y-y%5;v=(c&(1<<b)-1).toString(32),c>>=b,y-=b,qi=1<<32-Ct(r)+y|a<<y|c,Hi=v+i}else qi=1<<v|a<<y|c,Hi=i}function Kd(i){i.return!==null&&(rs(i,1),$g(i,1,0))}function Yd(i){for(;i===qu;)qu=Jo[--Ko],Jo[Ko]=null,ul=Jo[--Ko],Jo[Ko]=null;for(;i===$s;)$s=ii[--si],ii[si]=null,Hi=ii[--si],ii[si]=null,qi=ii[--si],ii[si]=null}function jg(i,r){ii[si++]=qi,ii[si++]=Hi,ii[si++]=$s,qi=r.id,Hi=r.overflow,$s=i}var tn=null,St=null,We=!1,js=null,ri=!1,Wd=Error(s(519));function Js(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(ni(r,i)),Wd}function Jg(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[we]=i,r[ye]=c,a){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(a=0;a<kl.length;a++)je(kl[a],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":je("invalid",r),Be(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":je("invalid",r);break;case"textarea":je("invalid",r),yt(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||c0(r.textContent,a)?(c.popover!=null&&(je("beforetoggle",r),je("toggle",r)),c.onScroll!=null&&je("scroll",r),c.onScrollEnd!=null&&je("scrollend",r),c.onClick!=null&&(r.onclick=gi),r=!0):r=!1,r||Js(i,!0)}function Kg(i){for(tn=i.return;tn;)switch(tn.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:tn=tn.return}}function Yo(i){if(i!==tn)return!1;if(!We)return Kg(i),We=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||gh(i.type,i.memoizedProps)),a=!a),a&&St&&Js(i),Kg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));St=_0(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));St=_0(i)}else r===27?(r=St,ar(i.type)?(i=wh,wh=null,St=i):St=r):St=tn?ai(i.stateNode.nextSibling):null;return!0}function Xr(){St=tn=null,We=!1}function Xd(){var i=js;return i!==null&&(xn===null?xn=i:xn.push.apply(xn,i),js=null),i}function cl(i){js===null?js=[i]:js.push(i)}var Qd=B(null),Qr=null,os=null;function Ks(i,r,a){ce(Qd,r._currentValue),r._currentValue=a}function as(i){i._currentValue=Qd.current,Y(Qd)}function Zd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function ef(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var b=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var q=0;q<r.length;q++)if(R.context===r[q]){v.lanes|=a,R=v.alternate,R!==null&&(R.lanes|=a),Zd(v.return,a,i),c||(b=null);break e}v=R.next}}else if(y.tag===18){if(b=y.return,b===null)throw Error(s(341));b.lanes|=a,v=b.alternate,v!==null&&(v.lanes|=a),Zd(b,a,i),b=null}else b=y.child;if(b!==null)b.return=y;else for(b=y;b!==null;){if(b===i){b=null;break}if(y=b.sibling,y!==null){y.return=b.return,b=y;break}b=b.return}y=b}}function Wo(i,r,a,c){i=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var b=y.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var R=y.type;Un(y.pendingProps.value,b.value)||(i!==null?i.push(R):i=[R])}}else if(y===Ce.current){if(b=y.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Ll):i=[Ll])}y=y.return}i!==null&&ef(r,i,a,c),r.flags|=262144}function Hu(i){for(i=i.firstContext;i!==null;){if(!Un(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Zr(i){Qr=i,os=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function nn(i){return Yg(Qr,i)}function Gu(i,r){return Qr===null&&Zr(i),Yg(i,r)}function Yg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},os===null){if(i===null)throw Error(s(308));os=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else os=os.next=r;return a}var DS=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},PS=n.unstable_scheduleCallback,US=n.unstable_NormalPriority,Ht={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tf(){return{controller:new DS,data:new Map,refCount:0}}function dl(i){i.refCount--,i.refCount===0&&PS(US,function(){i.controller.abort()})}var fl=null,nf=0,Xo=0,Qo=null;function OS(i,r){if(fl===null){var a=fl=[];nf=0,Xo=oh(),Qo={status:"pending",value:void 0,then:function(c){a.push(c)}}}return nf++,r.then(Wg,Wg),r}function Wg(){if(--nf===0&&fl!==null){Qo!==null&&(Qo.status="fulfilled");var i=fl;fl=null,Xo=0,Qo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function LS(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Xg=J.S;J.S=function(i,r){Py=Xt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&OS(i,r),Xg!==null&&Xg(i,r)};var eo=B(null);function sf(){var i=eo.current;return i!==null?i:_t.pooledCache}function Fu(i,r){r===null?ce(eo,eo.current):ce(eo,r.pool)}function Qg(){var i=sf();return i===null?null:{parent:Ht._currentValue,pool:i}}var Zo=Error(s(460)),rf=Error(s(474)),zu=Error(s(542)),$u={then:function(){}};function Zg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function em(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(gi,gi),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,nm(i),i;default:if(typeof r.status=="string")r.then(gi,gi);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,nm(i),i}throw no=r,Zo}}function to(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(no=a,Zo):a}}var no=null;function tm(){if(no===null)throw Error(s(459));var i=no;return no=null,i}function nm(i){if(i===Zo||i===zu)throw Error(s(483))}var ea=null,hl=0;function ju(i){var r=hl;return hl+=1,ea===null&&(ea=[]),em(ea,i,r)}function pl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Ju(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function im(i){function r(z,F){if(i){var K=z.deletions;K===null?(z.deletions=[F],z.flags|=16):K.push(F)}}function a(z,F){if(!i)return null;for(;F!==null;)r(z,F),F=F.sibling;return null}function c(z){for(var F=new Map;z!==null;)z.key!==null?F.set(z.key,z):F.set(z.index,z),z=z.sibling;return F}function y(z,F){return z=ss(z,F),z.index=0,z.sibling=null,z}function v(z,F,K){return z.index=K,i?(K=z.alternate,K!==null?(K=K.index,K<F?(z.flags|=67108866,F):K):(z.flags|=67108866,F)):(z.flags|=1048576,F)}function b(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function R(z,F,K,ie){return F===null||F.tag!==6?(F=jd(K,z.mode,ie),F.return=z,F):(F=y(F,K),F.return=z,F)}function q(z,F,K,ie){var Me=K.type;return Me===k?te(z,F,K.props.children,ie,K.key):F!==null&&(F.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===I&&to(Me)===F.type)?(F=y(F,K.props),pl(F,K),F.return=z,F):(F=Vu(K.type,K.key,K.props,null,z.mode,ie),pl(F,K),F.return=z,F)}function W(z,F,K,ie){return F===null||F.tag!==4||F.stateNode.containerInfo!==K.containerInfo||F.stateNode.implementation!==K.implementation?(F=Jd(K,z.mode,ie),F.return=z,F):(F=y(F,K.children||[]),F.return=z,F)}function te(z,F,K,ie,Me){return F===null||F.tag!==7?(F=Wr(K,z.mode,ie,Me),F.return=z,F):(F=y(F,K),F.return=z,F)}function re(z,F,K){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=jd(""+F,z.mode,K),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return K=Vu(F.type,F.key,F.props,null,z.mode,K),pl(K,F),K.return=z,K;case M:return F=Jd(F,z.mode,K),F.return=z,F;case I:return F=to(F),re(z,F,K)}if(Ie(F)||V(F))return F=Wr(F,z.mode,K,null),F.return=z,F;if(typeof F.then=="function")return re(z,ju(F),K);if(F.$$typeof===H)return re(z,Gu(z,F),K);Ju(z,F)}return null}function X(z,F,K,ie){var Me=F!==null?F.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Me!==null?null:R(z,F,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===Me?q(z,F,K,ie):null;case M:return K.key===Me?W(z,F,K,ie):null;case I:return K=to(K),X(z,F,K,ie)}if(Ie(K)||V(K))return Me!==null?null:te(z,F,K,ie,null);if(typeof K.then=="function")return X(z,F,ju(K),ie);if(K.$$typeof===H)return X(z,F,Gu(z,K),ie);Ju(z,K)}return null}function ee(z,F,K,ie,Me){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return z=z.get(K)||null,R(F,z,""+ie,Me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return z=z.get(ie.key===null?K:ie.key)||null,q(F,z,ie,Me);case M:return z=z.get(ie.key===null?K:ie.key)||null,W(F,z,ie,Me);case I:return ie=to(ie),ee(z,F,K,ie,Me)}if(Ie(ie)||V(ie))return z=z.get(K)||null,te(F,z,ie,Me,null);if(typeof ie.then=="function")return ee(z,F,K,ju(ie),Me);if(ie.$$typeof===H)return ee(z,F,K,Gu(F,ie),Me);Ju(F,ie)}return null}function Te(z,F,K,ie){for(var Me=null,st=null,Ae=F,He=F=0,Ke=null;Ae!==null&&He<K.length;He++){Ae.index>He?(Ke=Ae,Ae=null):Ke=Ae.sibling;var rt=X(z,Ae,K[He],ie);if(rt===null){Ae===null&&(Ae=Ke);break}i&&Ae&&rt.alternate===null&&r(z,Ae),F=v(rt,F,He),st===null?Me=rt:st.sibling=rt,st=rt,Ae=Ke}if(He===K.length)return a(z,Ae),We&&rs(z,He),Me;if(Ae===null){for(;He<K.length;He++)Ae=re(z,K[He],ie),Ae!==null&&(F=v(Ae,F,He),st===null?Me=Ae:st.sibling=Ae,st=Ae);return We&&rs(z,He),Me}for(Ae=c(Ae);He<K.length;He++)Ke=ee(Ae,z,He,K[He],ie),Ke!==null&&(i&&Ke.alternate!==null&&Ae.delete(Ke.key===null?He:Ke.key),F=v(Ke,F,He),st===null?Me=Ke:st.sibling=Ke,st=Ke);return i&&Ae.forEach(function(fr){return r(z,fr)}),We&&rs(z,He),Me}function ke(z,F,K,ie){if(K==null)throw Error(s(151));for(var Me=null,st=null,Ae=F,He=F=0,Ke=null,rt=K.next();Ae!==null&&!rt.done;He++,rt=K.next()){Ae.index>He?(Ke=Ae,Ae=null):Ke=Ae.sibling;var fr=X(z,Ae,rt.value,ie);if(fr===null){Ae===null&&(Ae=Ke);break}i&&Ae&&fr.alternate===null&&r(z,Ae),F=v(fr,F,He),st===null?Me=fr:st.sibling=fr,st=fr,Ae=Ke}if(rt.done)return a(z,Ae),We&&rs(z,He),Me;if(Ae===null){for(;!rt.done;He++,rt=K.next())rt=re(z,rt.value,ie),rt!==null&&(F=v(rt,F,He),st===null?Me=rt:st.sibling=rt,st=rt);return We&&rs(z,He),Me}for(Ae=c(Ae);!rt.done;He++,rt=K.next())rt=ee(Ae,z,He,rt.value,ie),rt!==null&&(i&&rt.alternate!==null&&Ae.delete(rt.key===null?He:rt.key),F=v(rt,F,He),st===null?Me=rt:st.sibling=rt,st=rt);return i&&Ae.forEach(function(Kb){return r(z,Kb)}),We&&rs(z,He),Me}function mt(z,F,K,ie){if(typeof K=="object"&&K!==null&&K.type===k&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var Me=K.key;F!==null;){if(F.key===Me){if(Me=K.type,Me===k){if(F.tag===7){a(z,F.sibling),ie=y(F,K.props.children),ie.return=z,z=ie;break e}}else if(F.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===I&&to(Me)===F.type){a(z,F.sibling),ie=y(F,K.props),pl(ie,K),ie.return=z,z=ie;break e}a(z,F);break}else r(z,F);F=F.sibling}K.type===k?(ie=Wr(K.props.children,z.mode,ie,K.key),ie.return=z,z=ie):(ie=Vu(K.type,K.key,K.props,null,z.mode,ie),pl(ie,K),ie.return=z,z=ie)}return b(z);case M:e:{for(Me=K.key;F!==null;){if(F.key===Me)if(F.tag===4&&F.stateNode.containerInfo===K.containerInfo&&F.stateNode.implementation===K.implementation){a(z,F.sibling),ie=y(F,K.children||[]),ie.return=z,z=ie;break e}else{a(z,F);break}else r(z,F);F=F.sibling}ie=Jd(K,z.mode,ie),ie.return=z,z=ie}return b(z);case I:return K=to(K),mt(z,F,K,ie)}if(Ie(K))return Te(z,F,K,ie);if(V(K)){if(Me=V(K),typeof Me!="function")throw Error(s(150));return K=Me.call(K),ke(z,F,K,ie)}if(typeof K.then=="function")return mt(z,F,ju(K),ie);if(K.$$typeof===H)return mt(z,F,Gu(z,K),ie);Ju(z,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,F!==null&&F.tag===6?(a(z,F.sibling),ie=y(F,K),ie.return=z,z=ie):(a(z,F),ie=jd(K,z.mode,ie),ie.return=z,z=ie),b(z)):a(z,F)}return function(z,F,K,ie){try{hl=0;var Me=mt(z,F,K,ie);return ea=null,Me}catch(Ae){if(Ae===Zo||Ae===zu)throw Ae;var st=On(29,Ae,null,z.mode);return st.lanes=ie,st.return=z,st}finally{}}}var io=im(!0),sm=im(!1),Ys=!1;function of(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function af(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ws(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Xs(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Bu(i),Hg(i,null,a),r}return Lu(i,c,r,a),Bu(i)}function gl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Pr(i,a)}}function lf(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=b:v=v.next=b,a=a.next}while(a!==null);v===null?y=v=r:v=v.next=r}else y=v=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var uf=!1;function ml(){if(uf){var i=Qo;if(i!==null)throw i}}function yl(i,r,a,c){uf=!1;var y=i.updateQueue;Ys=!1;var v=y.firstBaseUpdate,b=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var q=R,W=q.next;q.next=null,b===null?v=W:b.next=W,b=q;var te=i.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==b&&(R===null?te.firstBaseUpdate=W:R.next=W,te.lastBaseUpdate=q))}if(v!==null){var re=y.baseState;b=0,te=W=q=null,R=v;do{var X=R.lane&-536870913,ee=X!==R.lane;if(ee?(Je&X)===X:(c&X)===X){X!==0&&X===Xo&&(uf=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Te=i,ke=R;X=r;var mt=a;switch(ke.tag){case 1:if(Te=ke.payload,typeof Te=="function"){re=Te.call(mt,re,X);break e}re=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=ke.payload,X=typeof Te=="function"?Te.call(mt,re,X):Te,X==null)break e;re=w({},re,X);break e;case 2:Ys=!0}}X=R.callback,X!==null&&(i.flags|=64,ee&&(i.flags|=8192),ee=y.callbacks,ee===null?y.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(W=te=ee,q=re):te=te.next=ee,b|=X;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;ee=R,R=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);te===null&&(q=re),y.baseState=q,y.firstBaseUpdate=W,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),nr|=b,i.lanes=b,i.memoizedState=re}}function rm(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function om(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)rm(a[i],r)}var ta=B(null),Ku=B(0);function am(i,r){i=ms,ce(Ku,i),ce(ta,r),ms=i|r.baseLanes}function cf(){ce(Ku,ms),ce(ta,ta.current)}function df(){ms=Ku.current,Y(ta),Y(Ku)}var Ln=B(null),oi=null;function Qs(i){var r=i.alternate;ce(Bt,Bt.current&1),ce(Ln,i),oi===null&&(r===null||ta.current!==null||r.memoizedState!==null)&&(oi=i)}function ff(i){ce(Bt,Bt.current),ce(Ln,i),oi===null&&(oi=i)}function lm(i){i.tag===22?(ce(Bt,Bt.current),ce(Ln,i),oi===null&&(oi=i)):Zs()}function Zs(){ce(Bt,Bt.current),ce(Ln,Ln.current)}function Bn(i){Y(Ln),oi===i&&(oi=null),Y(Bt)}var Bt=B(0);function Yu(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||vh(a)||_h(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ls=0,qe=null,pt=null,Gt=null,Wu=!1,na=!1,so=!1,Xu=0,vl=0,ia=null,BS=0;function kt(){throw Error(s(321))}function hf(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Un(i[a],r[a]))return!1;return!0}function pf(i,r,a,c,y,v){return ls=v,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=i===null||i.memoizedState===null?$m:If,so=!1,v=a(c,y),so=!1,na&&(v=cm(r,a,c,y)),um(i),v}function um(i){J.H=El;var r=pt!==null&&pt.next!==null;if(ls=0,Gt=pt=qe=null,Wu=!1,vl=0,ia=null,r)throw Error(s(300));i===null||Ft||(i=i.dependencies,i!==null&&Hu(i)&&(Ft=!0))}function cm(i,r,a,c){qe=i;var y=0;do{if(na&&(ia=null),vl=0,na=!1,25<=y)throw Error(s(301));if(y+=1,Gt=pt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}J.H=jm,v=r(a,c)}while(na);return v}function VS(){var i=J.H,r=i.useState()[0];return r=typeof r.then=="function"?_l(r):r,i=i.useState()[0],(pt!==null?pt.memoizedState:null)!==i&&(qe.flags|=1024),r}function gf(){var i=Xu!==0;return Xu=0,i}function mf(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function yf(i){if(Wu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Wu=!1}ls=0,Gt=pt=qe=null,na=!1,vl=Xu=0,ia=null}function mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?qe.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Vt(){if(pt===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=pt.next;var r=Gt===null?qe.memoizedState:Gt.next;if(r!==null)Gt=r,pt=i;else{if(i===null)throw qe.alternate===null?Error(s(467)):Error(s(310));pt=i,i={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Gt===null?qe.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(i){var r=vl;return vl+=1,ia===null&&(ia=[]),i=em(ia,i,r),r=qe,(Gt===null?r.memoizedState:Gt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?$m:If),i}function Zu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return _l(i);if(i.$$typeof===H)return nn(i)}throw Error(s(438,String(i)))}function vf(i){var r=null,a=qe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qu(),qe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=P;return r.index++,a}function us(i,r){return typeof r=="function"?r(i):r}function ec(i){var r=Vt();return _f(r,pt,i)}function _f(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var b=y.next;y.next=v.next,v.next=b}r.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{r=y.next;var R=b=null,q=null,W=r,te=!1;do{var re=W.lane&-536870913;if(re!==W.lane?(Je&re)===re:(ls&re)===re){var X=W.revertLane;if(X===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),re===Xo&&(te=!0);else if((ls&X)===X){W=W.next,X===Xo&&(te=!0);continue}else re={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},q===null?(R=q=re,b=v):q=q.next=re,qe.lanes|=X,nr|=X;re=W.action,so&&a(v,re),v=W.hasEagerState?W.eagerState:a(v,re)}else X={lane:re,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},q===null?(R=q=X,b=v):q=q.next=X,qe.lanes|=re,nr|=re;W=W.next}while(W!==null&&W!==r);if(q===null?b=v:q.next=R,!Un(v,i.memoizedState)&&(Ft=!0,te&&(a=Qo,a!==null)))throw a;i.memoizedState=v,i.baseState=b,i.baseQueue=q,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function wf(i){var r=Vt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=r.memoizedState;if(y!==null){a.pending=null;var b=y=y.next;do v=i(v,b.action),b=b.next;while(b!==y);Un(v,r.memoizedState)||(Ft=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,c]}function dm(i,r,a){var c=qe,y=Vt(),v=We;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!Un((pt||y).memoizedState,a);if(b&&(y.memoizedState=a,Ft=!0),y=y.queue,Sf(pm.bind(null,c,y,i),[i]),y.getSnapshot!==r||b||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,sa(9,{destroy:void 0},hm.bind(null,c,y,a,r),null),_t===null)throw Error(s(349));v||(ls&127)!==0||fm(c,r,a)}return a}function fm(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=qe.updateQueue,r===null?(r=Qu(),qe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function hm(i,r,a,c){r.value=a,r.getSnapshot=c,gm(r)&&mm(i)}function pm(i,r,a){return a(function(){gm(r)&&mm(i)})}function gm(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Un(i,a)}catch{return!0}}function mm(i){var r=Yr(i,2);r!==null&&In(r,i,2)}function Ef(i){var r=mn();if(typeof i=="function"){var a=i;if(i=a(),so){Qt(!0);try{a()}finally{Qt(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:i},r}function ym(i,r,a,c){return i.baseState=a,_f(i,pt,typeof c=="function"?c:us)}function qS(i,r,a,c,y){if(ic(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){v.listeners.push(b)}};J.T!==null?a(!0):v.isTransition=!1,c(v),a=r.pending,a===null?(v.next=r.pending=v,vm(r,v)):(v.next=a.next,r.pending=a.next=v)}}function vm(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var v=J.T,b={};J.T=b;try{var R=a(y,c),q=J.S;q!==null&&q(b,R),_m(i,r,R)}catch(W){Tf(i,r,W)}finally{v!==null&&b.types!==null&&(v.types=b.types),J.T=v}}else try{v=a(y,c),_m(i,r,v)}catch(W){Tf(i,r,W)}}function _m(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){wm(i,r,c)},function(c){return Tf(i,r,c)}):wm(i,r,a)}function wm(i,r,a){r.status="fulfilled",r.value=a,Em(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,vm(i,a)))}function Tf(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Em(r),r=r.next;while(r!==c)}i.action=null}function Em(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Tm(i,r){return r}function Sm(i,r){if(We){var a=_t.formState;if(a!==null){e:{var c=qe;if(We){if(St){t:{for(var y=St,v=ri;y.nodeType!==8;){if(!v){y=null;break t}if(y=ai(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){St=ai(y.nextSibling),c=y.data==="F!";break e}}Js(c)}c=!1}c&&(r=a[0])}}return a=mn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tm,lastRenderedState:r},a.queue=c,a=Gm.bind(null,qe,c),c.dispatch=a,c=Ef(!1),v=xf.bind(null,qe,!1,c.queue),c=mn(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=qS.bind(null,qe,y,v,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function bm(i){var r=Vt();return Am(r,pt,i)}function Am(i,r,a){if(r=_f(i,r,Tm)[0],i=ec(us)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=_l(r)}catch(b){throw b===Zo?zu:b}else c=r;r=Vt();var y=r.queue,v=y.dispatch;return a!==r.memoizedState&&(qe.flags|=2048,sa(9,{destroy:void 0},HS.bind(null,y,a),null)),[c,v,i]}function HS(i,r){i.action=r}function Cm(i){var r=Vt(),a=pt;if(a!==null)return Am(r,a,i);Vt(),r=r.memoizedState,a=Vt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function sa(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=qe.updateQueue,r===null&&(r=Qu(),qe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function Rm(){return Vt().memoizedState}function tc(i,r,a,c){var y=mn();qe.flags|=i,y.memoizedState=sa(1|r,{destroy:void 0},a,c===void 0?null:c)}function nc(i,r,a,c){var y=Vt();c=c===void 0?null:c;var v=y.memoizedState.inst;pt!==null&&c!==null&&hf(c,pt.memoizedState.deps)?y.memoizedState=sa(r,v,a,c):(qe.flags|=i,y.memoizedState=sa(1|r,v,a,c))}function xm(i,r){tc(8390656,8,i,r)}function Sf(i,r){nc(2048,8,i,r)}function GS(i){qe.flags|=4;var r=qe.updateQueue;if(r===null)r=Qu(),qe.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function Im(i){var r=Vt().memoizedState;return GS({ref:r,nextImpl:i}),function(){if((lt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Nm(i,r){return nc(4,2,i,r)}function Mm(i,r){return nc(4,4,i,r)}function km(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Dm(i,r,a){a=a!=null?a.concat([i]):null,nc(4,4,km.bind(null,r,i),a)}function bf(){}function Pm(i,r){var a=Vt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&hf(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function Um(i,r){var a=Vt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&hf(r,c[1]))return c[0];if(c=i(),so){Qt(!0);try{i()}finally{Qt(!1)}}return a.memoizedState=[c,r],c}function Af(i,r,a){return a===void 0||(ls&1073741824)!==0&&(Je&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=Oy(),qe.lanes|=i,nr|=i,a)}function Om(i,r,a,c){return Un(a,r)?a:ta.current!==null?(i=Af(i,a,c),Un(i,r)||(Ft=!0),i):(ls&42)===0||(ls&1073741824)!==0&&(Je&261930)===0?(Ft=!0,i.memoizedState=a):(i=Oy(),qe.lanes|=i,nr|=i,r)}function Lm(i,r,a,c,y){var v=le.p;le.p=v!==0&&8>v?v:8;var b=J.T,R={};J.T=R,xf(i,!1,r,a);try{var q=y(),W=J.S;if(W!==null&&W(R,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var te=LS(q,c);wl(i,r,te,Hn(i))}else wl(i,r,c,Hn(i))}catch(re){wl(i,r,{then:function(){},status:"rejected",reason:re},Hn())}finally{le.p=v,b!==null&&R.types!==null&&(b.types=R.types),J.T=b}}function FS(){}function Cf(i,r,a,c){if(i.tag!==5)throw Error(s(476));var y=Bm(i).queue;Lm(i,y,r,se,a===null?FS:function(){return Vm(i),a(c)})}function Bm(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:se},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Vm(i){var r=Bm(i);r.next===null&&(r=i.alternate.memoizedState),wl(i,r.next.queue,{},Hn())}function Rf(){return nn(Ll)}function qm(){return Vt().memoizedState}function Hm(){return Vt().memoizedState}function zS(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Hn();i=Ws(a);var c=Xs(r,i,a);c!==null&&(In(c,r,a),gl(c,r,a)),r={cache:tf()},i.payload=r;return}r=r.return}}function $S(i,r,a){var c=Hn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ic(i)?Fm(r,a):(a=zd(i,r,a,c),a!==null&&(In(a,i,c),zm(a,r,c)))}function Gm(i,r,a){var c=Hn();wl(i,r,a,c)}function wl(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ic(i))Fm(r,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var b=r.lastRenderedState,R=v(b,a);if(y.hasEagerState=!0,y.eagerState=R,Un(R,b))return Lu(i,r,y,0),_t===null&&Ou(),!1}catch{}finally{}if(a=zd(i,r,y,c),a!==null)return In(a,i,c),zm(a,r,c),!0}return!1}function xf(i,r,a,c){if(c={lane:2,revertLane:oh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ic(i)){if(r)throw Error(s(479))}else r=zd(i,a,c,2),r!==null&&In(r,i,2)}function ic(i){var r=i.alternate;return i===qe||r!==null&&r===qe}function Fm(i,r){na=Wu=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function zm(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Pr(i,a)}}var El={readContext:nn,use:Zu,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};El.useEffectEvent=kt;var $m={readContext:nn,use:Zu,useCallback:function(i,r){return mn().memoizedState=[i,r===void 0?null:r],i},useContext:nn,useEffect:xm,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,tc(4194308,4,km.bind(null,r,i),a)},useLayoutEffect:function(i,r){return tc(4194308,4,i,r)},useInsertionEffect:function(i,r){tc(4,2,i,r)},useMemo:function(i,r){var a=mn();r=r===void 0?null:r;var c=i();if(so){Qt(!0);try{i()}finally{Qt(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=mn();if(a!==void 0){var y=a(r);if(so){Qt(!0);try{a(r)}finally{Qt(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=$S.bind(null,qe,i),[c.memoizedState,i]},useRef:function(i){var r=mn();return i={current:i},r.memoizedState=i},useState:function(i){i=Ef(i);var r=i.queue,a=Gm.bind(null,qe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:bf,useDeferredValue:function(i,r){var a=mn();return Af(a,i,r)},useTransition:function(){var i=Ef(!1);return i=Lm.bind(null,qe,i.queue,!0,!1),mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=qe,y=mn();if(We){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),_t===null)throw Error(s(349));(Je&127)!==0||fm(c,r,a)}y.memoizedState=a;var v={value:a,getSnapshot:r};return y.queue=v,xm(pm.bind(null,c,v,i),[i]),c.flags|=2048,sa(9,{destroy:void 0},hm.bind(null,c,v,a,r),null),a},useId:function(){var i=mn(),r=_t.identifierPrefix;if(We){var a=Hi,c=qi;a=(c&~(1<<32-Ct(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Xu++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=BS++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Rf,useFormState:Sm,useActionState:Sm,useOptimistic:function(i){var r=mn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=xf.bind(null,qe,!0,a),a.dispatch=r,[i,r]},useMemoCache:vf,useCacheRefresh:function(){return mn().memoizedState=zS.bind(null,qe)},useEffectEvent:function(i){var r=mn(),a={impl:i};return r.memoizedState=a,function(){if((lt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},If={readContext:nn,use:Zu,useCallback:Pm,useContext:nn,useEffect:Sf,useImperativeHandle:Dm,useInsertionEffect:Nm,useLayoutEffect:Mm,useMemo:Um,useReducer:ec,useRef:Rm,useState:function(){return ec(us)},useDebugValue:bf,useDeferredValue:function(i,r){var a=Vt();return Om(a,pt.memoizedState,i,r)},useTransition:function(){var i=ec(us)[0],r=Vt().memoizedState;return[typeof i=="boolean"?i:_l(i),r]},useSyncExternalStore:dm,useId:qm,useHostTransitionStatus:Rf,useFormState:bm,useActionState:bm,useOptimistic:function(i,r){var a=Vt();return ym(a,pt,i,r)},useMemoCache:vf,useCacheRefresh:Hm};If.useEffectEvent=Im;var jm={readContext:nn,use:Zu,useCallback:Pm,useContext:nn,useEffect:Sf,useImperativeHandle:Dm,useInsertionEffect:Nm,useLayoutEffect:Mm,useMemo:Um,useReducer:wf,useRef:Rm,useState:function(){return wf(us)},useDebugValue:bf,useDeferredValue:function(i,r){var a=Vt();return pt===null?Af(a,i,r):Om(a,pt.memoizedState,i,r)},useTransition:function(){var i=wf(us)[0],r=Vt().memoizedState;return[typeof i=="boolean"?i:_l(i),r]},useSyncExternalStore:dm,useId:qm,useHostTransitionStatus:Rf,useFormState:Cm,useActionState:Cm,useOptimistic:function(i,r){var a=Vt();return pt!==null?ym(a,pt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:vf,useCacheRefresh:Hm};jm.useEffectEvent=Im;function Nf(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:w({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Mf={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=Hn(),y=Ws(c);y.payload=r,a!=null&&(y.callback=a),r=Xs(i,y,c),r!==null&&(In(r,i,c),gl(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=Hn(),y=Ws(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Xs(i,y,c),r!==null&&(In(r,i,c),gl(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Hn(),c=Ws(a);c.tag=2,r!=null&&(c.callback=r),r=Xs(i,c,a),r!==null&&(In(r,i,a),gl(r,i,a))}};function Jm(i,r,a,c,y,v,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,b):r.prototype&&r.prototype.isPureReactComponent?!al(a,c)||!al(y,v):!0}function Km(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&Mf.enqueueReplaceState(r,r.state,null)}function ro(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=w({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Ym(i){Uu(i)}function Wm(i){console.error(i)}function Xm(i){Uu(i)}function sc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Qm(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function kf(i,r,a){return a=Ws(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(i,r)},a}function Zm(i){return i=Ws(i),i.tag=3,i}function ey(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){Qm(r,a,c)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){Qm(r,a,c),typeof y!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function jS(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Wo(r,a,y,!0),a=Ln.current,a!==null){switch(a.tag){case 31:case 13:return oi===null?mc():a.alternate===null&&Dt===0&&(Dt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===$u?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),ih(i,c,y)),!1;case 22:return a.flags|=65536,c===$u?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),ih(i,c,y)),!1}throw Error(s(435,a.tag))}return ih(i,c,y),mc(),!1}if(We)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Wd&&(i=Error(s(422),{cause:c}),cl(ni(i,a)))):(c!==Wd&&(r=Error(s(423),{cause:c}),cl(ni(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=ni(c,a),y=kf(i.stateNode,c,y),lf(i,y),Dt!==4&&(Dt=2)),!1;var v=Error(s(520),{cause:c});if(v=ni(v,a),Il===null?Il=[v]:Il.push(v),Dt!==4&&(Dt=2),r===null)return!0;c=ni(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=kf(a.stateNode,c,i),lf(a,i),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ir===null||!ir.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Zm(y),ey(y,i,a,c),lf(a,y),!1}a=a.return}while(a!==null);return!1}var Df=Error(s(461)),Ft=!1;function sn(i,r,a,c){r.child=i===null?sm(r,null,a,c):io(r,i.child,a,c)}function ty(i,r,a,c,y){a=a.render;var v=r.ref;if("ref"in c){var b={};for(var R in c)R!=="ref"&&(b[R]=c[R])}else b=c;return Zr(r),c=pf(i,r,a,b,v,y),R=gf(),i!==null&&!Ft?(mf(i,r,y),cs(i,r,y)):(We&&R&&Kd(r),r.flags|=1,sn(i,r,c,y),r.child)}function ny(i,r,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!$d(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,iy(i,r,v,c,y)):(i=Vu(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!Hf(i,y)){var b=v.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(b,c)&&i.ref===r.ref)return cs(i,r,y)}return r.flags|=1,i=ss(v,c),i.ref=r.ref,i.return=r,r.child=i}function iy(i,r,a,c,y){if(i!==null){var v=i.memoizedProps;if(al(v,c)&&i.ref===r.ref)if(Ft=!1,r.pendingProps=c=v,Hf(i,y))(i.flags&131072)!==0&&(Ft=!0);else return r.lanes=i.lanes,cs(i,r,y)}return Pf(i,r,a,c,y)}function sy(i,r,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return ry(i,r,v,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fu(r,v!==null?v.cachePool:null),v!==null?am(r,v):cf(),lm(r);else return c=r.lanes=536870912,ry(i,r,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Fu(r,v.cachePool),am(r,v),Zs(),r.memoizedState=null):(i!==null&&Fu(r,null),cf(),Zs());return sn(i,r,y,a),r.child}function Tl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ry(i,r,a,c,y){var v=sf();return v=v===null?null:{parent:Ht._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},i!==null&&Fu(r,null),cf(),lm(r),i!==null&&Wo(i,r,c,!0),r.childLanes=y,null}function rc(i,r){return r=ac({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function oy(i,r,a){return io(r,i.child,null,a),i=rc(r,r.pendingProps),i.flags|=2,Bn(r),r.memoizedState=null,i}function JS(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(We){if(c.mode==="hidden")return i=rc(r,c),r.lanes=536870912,Tl(null,i);if(ff(r),(i=St)?(i=v0(i,ri),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:$s!==null?{id:qi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},a=Fg(i),a.return=r,r.child=a,tn=r,St=null)):i=null,i===null)throw Js(r);return r.lanes=536870912,null}return rc(r,c)}var v=i.memoizedState;if(v!==null){var b=v.dehydrated;if(ff(r),y)if(r.flags&256)r.flags&=-257,r=oy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ft||Wo(i,r,a,!1),y=(a&i.childLanes)!==0,Ft||y){if(c=_t,c!==null&&(b=Ur(c,a),b!==0&&b!==v.retryLane))throw v.retryLane=b,Yr(i,b),In(c,i,b),Df;mc(),r=oy(i,r,a)}else i=v.treeContext,St=ai(b.nextSibling),tn=r,We=!0,js=null,ri=!1,i!==null&&jg(r,i),r=rc(r,c),r.flags|=4096;return r}return i=ss(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function oc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Pf(i,r,a,c,y){return Zr(r),a=pf(i,r,a,c,void 0,y),c=gf(),i!==null&&!Ft?(mf(i,r,y),cs(i,r,y)):(We&&c&&Kd(r),r.flags|=1,sn(i,r,a,y),r.child)}function ay(i,r,a,c,y,v){return Zr(r),r.updateQueue=null,a=cm(r,c,a,y),um(i),c=gf(),i!==null&&!Ft?(mf(i,r,v),cs(i,r,v)):(We&&c&&Kd(r),r.flags|=1,sn(i,r,a,v),r.child)}function ly(i,r,a,c,y){if(Zr(r),r.stateNode===null){var v=jo,b=a.contextType;typeof b=="object"&&b!==null&&(v=nn(b)),v=new a(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Mf,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},of(r),b=a.contextType,v.context=typeof b=="object"&&b!==null?nn(b):jo,v.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Nf(r,a,b,c),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(b=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),b!==v.state&&Mf.enqueueReplaceState(v,v.state,null),yl(r,c,v,y),ml(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){v=r.stateNode;var R=r.memoizedProps,q=ro(a,R);v.props=q;var W=v.context,te=a.contextType;b=jo,typeof te=="object"&&te!==null&&(b=nn(te));var re=a.getDerivedStateFromProps;te=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||W!==b)&&Km(r,v,c,b),Ys=!1;var X=r.memoizedState;v.state=X,yl(r,c,v,y),ml(),W=r.memoizedState,R||X!==W||Ys?(typeof re=="function"&&(Nf(r,a,re,c),W=r.memoizedState),(q=Ys||Jm(r,a,q,c,X,W,b))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=W),v.props=c,v.state=W,v.context=b,c=q):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,af(i,r),b=r.memoizedProps,te=ro(a,b),v.props=te,re=r.pendingProps,X=v.context,W=a.contextType,q=jo,typeof W=="object"&&W!==null&&(q=nn(W)),R=a.getDerivedStateFromProps,(W=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b!==re||X!==q)&&Km(r,v,c,q),Ys=!1,X=r.memoizedState,v.state=X,yl(r,c,v,y),ml();var ee=r.memoizedState;b!==re||X!==ee||Ys||i!==null&&i.dependencies!==null&&Hu(i.dependencies)?(typeof R=="function"&&(Nf(r,a,R,c),ee=r.memoizedState),(te=Ys||Jm(r,a,te,c,X,ee,q)||i!==null&&i.dependencies!==null&&Hu(i.dependencies))?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ee,q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ee,q)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ee),v.props=c,v.state=ee,v.context=q,c=te):(typeof v.componentDidUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(r.flags|=1024),c=!1)}return v=c,oc(i,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&c?(r.child=io(r,i.child,null,y),r.child=io(r,null,a,y)):sn(i,r,a,y),r.memoizedState=v.state,i=r.child):i=cs(i,r,y),i}function uy(i,r,a,c){return Xr(),r.flags|=256,sn(i,r,a,c),r.child}var Uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Of(i){return{baseLanes:i,cachePool:Qg()}}function Lf(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=qn),i}function cy(i,r,a){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,b;if((b=v)||(b=i!==null&&i.memoizedState===null?!1:(Bt.current&2)!==0),b&&(y=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(We){if(y?Qs(r):Zs(),(i=St)?(i=v0(i,ri),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:$s!==null?{id:qi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},a=Fg(i),a.return=r,r.child=a,tn=r,St=null)):i=null,i===null)throw Js(r);return _h(i)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Zs(),y=r.mode,R=ac({mode:"hidden",children:R},y),c=Wr(c,y,a,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=Of(a),c.childLanes=Lf(i,b,a),r.memoizedState=Uf,Tl(null,c)):(Qs(r),Bf(r,R))}var q=i.memoizedState;if(q!==null&&(R=q.dehydrated,R!==null)){if(v)r.flags&256?(Qs(r),r.flags&=-257,r=Vf(i,r,a)):r.memoizedState!==null?(Zs(),r.child=i.child,r.flags|=128,r=null):(Zs(),R=c.fallback,y=r.mode,c=ac({mode:"visible",children:c.children},y),R=Wr(R,y,a,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,io(r,i.child,null,a),c=r.child,c.memoizedState=Of(a),c.childLanes=Lf(i,b,a),r.memoizedState=Uf,r=Tl(null,c));else if(Qs(r),_h(R)){if(b=R.nextSibling&&R.nextSibling.dataset,b)var W=b.dgst;b=W,c=Error(s(419)),c.stack="",c.digest=b,cl({value:c,source:null,stack:null}),r=Vf(i,r,a)}else if(Ft||Wo(i,r,a,!1),b=(a&i.childLanes)!==0,Ft||b){if(b=_t,b!==null&&(c=Ur(b,a),c!==0&&c!==q.retryLane))throw q.retryLane=c,Yr(i,c),In(b,i,c),Df;vh(R)||mc(),r=Vf(i,r,a)}else vh(R)?(r.flags|=192,r.child=i.child,r=null):(i=q.treeContext,St=ai(R.nextSibling),tn=r,We=!0,js=null,ri=!1,i!==null&&jg(r,i),r=Bf(r,c.children),r.flags|=4096);return r}return y?(Zs(),R=c.fallback,y=r.mode,q=i.child,W=q.sibling,c=ss(q,{mode:"hidden",children:c.children}),c.subtreeFlags=q.subtreeFlags&65011712,W!==null?R=ss(W,R):(R=Wr(R,y,a,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,Tl(null,c),c=r.child,R=i.child.memoizedState,R===null?R=Of(a):(y=R.cachePool,y!==null?(q=Ht._currentValue,y=y.parent!==q?{parent:q,pool:q}:y):y=Qg(),R={baseLanes:R.baseLanes|a,cachePool:y}),c.memoizedState=R,c.childLanes=Lf(i,b,a),r.memoizedState=Uf,Tl(i.child,c)):(Qs(r),a=i.child,i=a.sibling,a=ss(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=a,r.memoizedState=null,a)}function Bf(i,r){return r=ac({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function ac(i,r){return i=On(22,i,null,r),i.lanes=0,i}function Vf(i,r,a){return io(r,i.child,null,a),i=Bf(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function dy(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),Zd(i.return,r,a)}function qf(i,r,a,c,y,v){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=a,b.tailMode=y,b.treeForkCount=v)}function fy(i,r,a){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var b=Bt.current,R=(b&2)!==0;if(R?(b=b&1|2,r.flags|=128):b&=1,ce(Bt,b),sn(i,r,c,a),c=We?ul:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dy(i,a,r);else if(i.tag===19)dy(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&Yu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),qf(r,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&Yu(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}qf(r,!0,a,null,v,c);break;case"together":qf(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function cs(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),nr|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Wo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=ss(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=ss(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Hf(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Hu(i)))}function KS(i,r,a){switch(r.tag){case 3:fe(r,r.stateNode.containerInfo),Ks(r,Ht,i.memoizedState.cache),Xr();break;case 27:case 5:Ki(r);break;case 4:fe(r,r.stateNode.containerInfo);break;case 10:Ks(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ff(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Qs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?cy(i,r,a):(Qs(r),i=cs(i,r,a),i!==null?i.sibling:null);Qs(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Wo(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return fy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Bt,Bt.current),c)break;return null;case 22:return r.lanes=0,sy(i,r,a,r.pendingProps);case 24:Ks(r,Ht,i.memoizedState.cache)}return cs(i,r,a)}function hy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ft=!0;else{if(!Hf(i,a)&&(r.flags&128)===0)return Ft=!1,KS(i,r,a);Ft=(i.flags&131072)!==0}else Ft=!1,We&&(r.flags&1048576)!==0&&$g(r,ul,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=to(r.elementType),r.type=i,typeof i=="function")$d(i)?(c=ro(i,c),r.tag=1,r=ly(null,r,i,c,a)):(r.tag=0,r=Pf(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===Q){r.tag=11,r=ty(null,r,i,c,a);break e}else if(y===D){r.tag=14,r=ny(null,r,i,c,a);break e}}throw r=Ue(i)||i,Error(s(306,r,""))}}return r;case 0:return Pf(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=ro(c,r.pendingProps),ly(i,r,c,y,a);case 3:e:{if(fe(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,af(i,r),yl(r,c,null,a);var b=r.memoizedState;if(c=b.cache,Ks(r,Ht,c),c!==v.cache&&ef(r,[Ht],a,!0),ml(),c=b.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=uy(i,r,c,a);break e}else if(c!==y){y=ni(Error(s(424)),r),cl(y),r=uy(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=ai(i.firstChild),tn=r,We=!0,js=null,ri=!0,a=sm(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Xr(),c===y){r=cs(i,r,a);break e}sn(i,r,c,a)}r=r.child}return r;case 26:return oc(i,r),i===null?(a=b0(r.type,null,r.pendingProps,null))?r.memoizedState=a:We||(a=r.type,i=r.pendingProps,c=Sc(ge.current).createElement(a),c[we]=r,c[ye]=i,rn(c,a,i),wt(c),r.stateNode=c):r.memoizedState=b0(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Ki(r),i===null&&We&&(c=r.stateNode=E0(r.type,r.pendingProps,ge.current),tn=r,ri=!0,y=St,ar(r.type)?(wh=y,St=ai(c.firstChild)):St=y),sn(i,r,r.pendingProps.children,a),oc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&We&&((y=c=St)&&(c=bb(c,r.type,r.pendingProps,ri),c!==null?(r.stateNode=c,tn=r,St=ai(c.firstChild),ri=!1,y=!0):y=!1),y||Js(r)),Ki(r),y=r.type,v=r.pendingProps,b=i!==null?i.memoizedProps:null,c=v.children,gh(y,v)?c=null:b!==null&&gh(y,b)&&(r.flags|=32),r.memoizedState!==null&&(y=pf(i,r,VS,null,null,a),Ll._currentValue=y),oc(i,r),sn(i,r,c,a),r.child;case 6:return i===null&&We&&((i=a=St)&&(a=Ab(a,r.pendingProps,ri),a!==null?(r.stateNode=a,tn=r,St=null,i=!0):i=!1),i||Js(r)),null;case 13:return cy(i,r,a);case 4:return fe(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=io(r,null,c,a):sn(i,r,c,a),r.child;case 11:return ty(i,r,r.type,r.pendingProps,a);case 7:return sn(i,r,r.pendingProps,a),r.child;case 8:return sn(i,r,r.pendingProps.children,a),r.child;case 12:return sn(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Ks(r,r.type,c.value),sn(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Zr(r),y=nn(y),c=c(y),r.flags|=1,sn(i,r,c,a),r.child;case 14:return ny(i,r,r.type,r.pendingProps,a);case 15:return iy(i,r,r.type,r.pendingProps,a);case 19:return fy(i,r,a);case 31:return JS(i,r,a);case 22:return sy(i,r,a,r.pendingProps);case 24:return Zr(r),c=nn(Ht),i===null?(y=sf(),y===null&&(y=_t,v=tf(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),r.memoizedState={parent:c,cache:y},of(r),Ks(r,Ht,y)):((i.lanes&a)!==0&&(af(i,r),yl(r,null,null,a),ml()),y=i.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ks(r,Ht,c)):(c=v.cache,Ks(r,Ht,c),c!==y.cache&&ef(r,[Ht],a,!0))),sn(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ds(i){i.flags|=4}function Gf(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(qy())i.flags|=8192;else throw no=$u,rf}else i.flags&=-16777217}function py(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!I0(r))if(qy())i.flags|=8192;else throw no=$u,rf}function lc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Uo():536870912,i.lanes|=r,la|=r)}function Sl(i,r){if(!We)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function bt(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function YS(i,r,a){var c=r.pendingProps;switch(Yd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(r),null;case 1:return bt(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),as(Ht),tt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Yo(r)?ds(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xd())),bt(r),null;case 26:var y=r.type,v=r.memoizedState;return i===null?(ds(r),v!==null?(bt(r),py(r,v)):(bt(r),Gf(r,y,null,c,a))):v?v!==i.memoizedState?(ds(r),bt(r),py(r,v)):(bt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&ds(r),bt(r),Gf(r,y,i,c,a)),null;case 27:if(di(r),a=ge.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ds(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return bt(r),null}i=oe.current,Yo(r)?Jg(r):(i=E0(y,c,a),r.stateNode=i,ds(r))}return bt(r),null;case 5:if(di(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ds(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return bt(r),null}if(v=oe.current,Yo(r))Jg(r);else{var b=Sc(ge.current);switch(v){case 1:v=b.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=b.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=b.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=b.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=b.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?b.createElement(y,{is:c.is}):b.createElement(y)}}v[we]=r,v[ye]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)v.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=v;e:switch(rn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ds(r)}}return bt(r),Gf(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&ds(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=ge.current,Yo(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=tn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[we]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||c0(i.nodeValue,a)),i||Js(r,!0)}else i=Sc(i).createTextNode(c),i[we]=r,r.stateNode=i}return bt(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=Yo(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[we]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;bt(r),i=!1}else a=Xd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Bn(r),r):(Bn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return bt(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Yo(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[we]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;bt(r),y=!1}else y=Xd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Bn(r),r):(Bn(r),null)}return Bn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),lc(r,r.updateQueue),bt(r),null);case 4:return tt(),i===null&&ch(r.stateNode.containerInfo),bt(r),null;case 10:return as(r.type),bt(r),null;case 19:if(Y(Bt),c=r.memoizedState,c===null)return bt(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)Sl(c,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=Yu(i),v!==null){for(r.flags|=128,Sl(c,!1),i=v.updateQueue,r.updateQueue=i,lc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Gg(a,i),a=a.sibling;return ce(Bt,Bt.current&1|2),We&&rs(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&Xt()>hc&&(r.flags|=128,y=!0,Sl(c,!1),r.lanes=4194304)}else{if(!y)if(i=Yu(v),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,lc(r,i),Sl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!We)return bt(r),null}else 2*Xt()-c.renderingStartTime>hc&&a!==536870912&&(r.flags|=128,y=!0,Sl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(i=c.last,i!==null?i.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Xt(),i.sibling=null,a=Bt.current,ce(Bt,y?a&1|2:a&1),We&&rs(r,c.treeForkCount),i):(bt(r),null);case 22:case 23:return Bn(r),df(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(bt(r),r.subtreeFlags&6&&(r.flags|=8192)):bt(r),a=r.updateQueue,a!==null&&lc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&Y(eo),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),as(Ht),bt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function WS(i,r){switch(Yd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return as(Ht),tt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return di(r),null;case 31:if(r.memoizedState!==null){if(Bn(r),r.alternate===null)throw Error(s(340));Xr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Bn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Xr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Y(Bt),null;case 4:return tt(),null;case 10:return as(r.type),null;case 22:case 23:return Bn(r),df(),i!==null&&Y(eo),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return as(Ht),null;case 25:return null;default:return null}}function gy(i,r){switch(Yd(r),r.tag){case 3:as(Ht),tt();break;case 26:case 27:case 5:di(r);break;case 4:tt();break;case 31:r.memoizedState!==null&&Bn(r);break;case 13:Bn(r);break;case 19:Y(Bt);break;case 10:as(r.type);break;case 22:case 23:Bn(r),df(),i!==null&&Y(eo);break;case 24:as(Ht)}}function bl(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,b=a.inst;c=v(),b.destroy=c}a=a.next}while(a!==y)}}catch(R){ht(r,r.return,R)}}function er(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var b=c.inst,R=b.destroy;if(R!==void 0){b.destroy=void 0,y=r;var q=a,W=R;try{W()}catch(te){ht(y,q,te)}}}c=c.next}while(c!==v)}}catch(te){ht(r,r.return,te)}}function my(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{om(r,a)}catch(c){ht(i,i.return,c)}}}function yy(i,r,a){a.props=ro(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){ht(i,r,c)}}function Al(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){ht(i,r,y)}}function Gi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){ht(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){ht(i,r,y)}else a.current=null}function vy(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){ht(i,i.return,y)}}function Ff(i,r,a){try{var c=i.stateNode;vb(c,i.type,a,r),c[ye]=r}catch(y){ht(i,i.return,y)}}function _y(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ar(i.type)||i.tag===4}function zf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||_y(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ar(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $f(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=gi));else if(c!==4&&(c===27&&ar(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for($f(i,r,a),i=i.sibling;i!==null;)$f(i,r,a),i=i.sibling}function uc(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&ar(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(uc(i,r,a),i=i.sibling;i!==null;)uc(i,r,a),i=i.sibling}function wy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);rn(r,c,a),r[we]=i,r[ye]=a}catch(v){ht(i,i.return,v)}}var fs=!1,zt=!1,jf=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function XS(i,r){if(i=i.containerInfo,hh=Nc,i=Dg(i),Bd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var b=0,R=-1,q=-1,W=0,te=0,re=i,X=null;t:for(;;){for(var ee;re!==a||y!==0&&re.nodeType!==3||(R=b+y),re!==v||c!==0&&re.nodeType!==3||(q=b+c),re.nodeType===3&&(b+=re.nodeValue.length),(ee=re.firstChild)!==null;)X=re,re=ee;for(;;){if(re===i)break t;if(X===a&&++W===y&&(R=b),X===v&&++te===c&&(q=b),(ee=re.nextSibling)!==null)break;re=X,X=re.parentNode}re=ee}a=R===-1||q===-1?null:{start:R,end:q}}else a=null}a=a||{start:0,end:0}}else a=null;for(ph={focusedElem:i,selectionRange:a},Nc=!1,Wt=r;Wt!==null;)if(r=Wt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Wt=i;else for(;Wt!==null;){switch(r=Wt,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=r,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var Te=ro(a.type,y);i=c.getSnapshotBeforeUpdate(Te,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(ke){ht(a,a.return,ke)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)yh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Wt=i;break}Wt=r.return}}function Ty(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ps(i,a),c&4&&bl(5,a);break;case 1:if(ps(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(b){ht(a,a.return,b)}else{var y=ro(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){ht(a,a.return,b)}}c&64&&my(a),c&512&&Al(a,a.return);break;case 3:if(ps(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{om(i,r)}catch(b){ht(a,a.return,b)}}break;case 27:r===null&&c&4&&wy(a);case 26:case 5:ps(i,a),r===null&&c&4&&vy(a),c&512&&Al(a,a.return);break;case 12:ps(i,a);break;case 31:ps(i,a),c&4&&Ay(i,a);break;case 13:ps(i,a),c&4&&Cy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=ob.bind(null,a),Cb(i,a))));break;case 22:if(c=a.memoizedState!==null||fs,!c){r=r!==null&&r.memoizedState!==null||zt,y=fs;var v=zt;fs=c,(zt=r)&&!v?gs(i,a,(a.subtreeFlags&8772)!==0):ps(i,a),fs=y,zt=v}break;case 30:break;default:ps(i,a)}}function Sy(i){var r=i.alternate;r!==null&&(i.alternate=null,Sy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Xn(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var It=null,An=!1;function hs(i,r,a){for(a=a.child;a!==null;)by(i,r,a),a=a.sibling}function by(i,r,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(wn,a)}catch{}switch(a.tag){case 26:zt||Gi(a,r),hs(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||Gi(a,r);var c=It,y=An;ar(a.type)&&(It=a.stateNode,An=!1),hs(i,r,a),Pl(a.stateNode),It=c,An=y;break;case 5:zt||Gi(a,r);case 6:if(c=It,y=An,It=null,hs(i,r,a),It=c,An=y,It!==null)if(An)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(a.stateNode)}catch(v){ht(a,r,v)}else try{It.removeChild(a.stateNode)}catch(v){ht(a,r,v)}break;case 18:It!==null&&(An?(i=It,m0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ma(i)):m0(It,a.stateNode));break;case 4:c=It,y=An,It=a.stateNode.containerInfo,An=!0,hs(i,r,a),It=c,An=y;break;case 0:case 11:case 14:case 15:er(2,a,r),zt||er(4,a,r),hs(i,r,a);break;case 1:zt||(Gi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&yy(a,r,c)),hs(i,r,a);break;case 21:hs(i,r,a);break;case 22:zt=(c=zt)||a.memoizedState!==null,hs(i,r,a),zt=c;break;default:hs(i,r,a)}}function Ay(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ma(i)}catch(a){ht(r,r.return,a)}}}function Cy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ma(i)}catch(a){ht(r,r.return,a)}}function QS(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Ey),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Ey),r;default:throw Error(s(435,i.tag))}}function cc(i,r){var a=QS(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=ab.bind(null,i,c);c.then(y,y)}})}function Cn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,b=r,R=b;e:for(;R!==null;){switch(R.tag){case 27:if(ar(R.type)){It=R.stateNode,An=!1;break e}break;case 5:It=R.stateNode,An=!1;break e;case 3:case 4:It=R.stateNode.containerInfo,An=!0;break e}R=R.return}if(It===null)throw Error(s(160));by(v,b,y),It=null,An=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Ry(r,i),r=r.sibling}var Ei=null;function Ry(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Cn(r,i),Rn(i),c&4&&(er(3,i,i.return),bl(3,i),er(5,i,i.return));break;case 1:Cn(r,i),Rn(i),c&512&&(zt||a===null||Gi(a,a.return)),c&64&&fs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=Ei;if(Cn(r,i),Rn(i),c&512&&(zt||a===null||Gi(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ut]||v[we]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),rn(v,c,a),v[we]=i,wt(v),c=v;break e;case"link":var b=R0("link","href",y).get(c+(a.href||""));if(b){for(var R=0;R<b.length;R++)if(v=b[R],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(R,1);break t}}v=y.createElement(c),rn(v,c,a),y.head.appendChild(v);break;case"meta":if(b=R0("meta","content",y).get(c+(a.content||""))){for(R=0;R<b.length;R++)if(v=b[R],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(R,1);break t}}v=y.createElement(c),rn(v,c,a),y.head.appendChild(v);break;default:throw Error(s(468,c))}v[we]=i,wt(v),c=v}i.stateNode=c}else x0(y,i.type,i.stateNode);else i.stateNode=C0(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?x0(y,i.type,i.stateNode):C0(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Ff(i,i.memoizedProps,a.memoizedProps)}break;case 27:Cn(r,i),Rn(i),c&512&&(zt||a===null||Gi(a,a.return)),a!==null&&c&4&&Ff(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Cn(r,i),Rn(i),c&512&&(zt||a===null||Gi(a,a.return)),i.flags&32){y=i.stateNode;try{it(y,"")}catch(Te){ht(i,i.return,Te)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Ff(i,y,a!==null?a.memoizedProps:y)),c&1024&&(jf=!0);break;case 6:if(Cn(r,i),Rn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Te){ht(i,i.return,Te)}}break;case 3:if(Cc=null,y=Ei,Ei=bc(r.containerInfo),Cn(r,i),Ei=y,Rn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ma(r.containerInfo)}catch(Te){ht(i,i.return,Te)}jf&&(jf=!1,xy(i));break;case 4:c=Ei,Ei=bc(i.stateNode.containerInfo),Cn(r,i),Rn(i),Ei=c;break;case 12:Cn(r,i),Rn(i);break;case 31:Cn(r,i),Rn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,cc(i,c)));break;case 13:Cn(r,i),Rn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fc=Xt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,cc(i,c)));break;case 22:y=i.memoizedState!==null;var q=a!==null&&a.memoizedState!==null,W=fs,te=zt;if(fs=W||y,zt=te||q,Cn(r,i),zt=te,fs=W,Rn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||q||fs||zt||oo(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){q=a=r;try{if(v=q.stateNode,y)b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{R=q.stateNode;var re=q.memoizedProps.style,X=re!=null&&re.hasOwnProperty("display")?re.display:null;R.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Te){ht(q,q.return,Te)}}}else if(r.tag===6){if(a===null){q=r;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(Te){ht(q,q.return,Te)}}}else if(r.tag===18){if(a===null){q=r;try{var ee=q.stateNode;y?y0(ee,!0):y0(q.stateNode,!1)}catch(Te){ht(q,q.return,Te)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,cc(i,a))));break;case 19:Cn(r,i),Rn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,cc(i,c)));break;case 30:break;case 21:break;default:Cn(r,i),Rn(i)}}function Rn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(_y(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,v=zf(i);uc(i,v,y);break;case 5:var b=a.stateNode;a.flags&32&&(it(b,""),a.flags&=-33);var R=zf(i);uc(i,R,b);break;case 3:case 4:var q=a.stateNode.containerInfo,W=zf(i);$f(i,W,q);break;default:throw Error(s(161))}}catch(te){ht(i,i.return,te)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function xy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;xy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ps(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ty(i,r.alternate,r),r=r.sibling}function oo(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:er(4,r,r.return),oo(r);break;case 1:Gi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&yy(r,r.return,a),oo(r);break;case 27:Pl(r.stateNode);case 26:case 5:Gi(r,r.return),oo(r);break;case 22:r.memoizedState===null&&oo(r);break;case 30:oo(r);break;default:oo(r)}i=i.sibling}}function gs(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,v=r,b=v.flags;switch(v.tag){case 0:case 11:case 15:gs(y,v,a),bl(4,v);break;case 1:if(gs(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(W){ht(c,c.return,W)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)rm(q[y],R)}catch(W){ht(c,c.return,W)}}a&&b&64&&my(v),Al(v,v.return);break;case 27:wy(v);case 26:case 5:gs(y,v,a),a&&c===null&&b&4&&vy(v),Al(v,v.return);break;case 12:gs(y,v,a);break;case 31:gs(y,v,a),a&&b&4&&Ay(y,v);break;case 13:gs(y,v,a),a&&b&4&&Cy(y,v);break;case 22:v.memoizedState===null&&gs(y,v,a),Al(v,v.return);break;case 30:break;default:gs(y,v,a)}r=r.sibling}}function Jf(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&dl(a))}function Kf(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&dl(i))}function Ti(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Iy(i,r,a,c),r=r.sibling}function Iy(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Ti(i,r,a,c),y&2048&&bl(9,r);break;case 1:Ti(i,r,a,c);break;case 3:Ti(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&dl(i)));break;case 12:if(y&2048){Ti(i,r,a,c),i=r.stateNode;try{var v=r.memoizedProps,b=v.id,R=v.onPostCommit;typeof R=="function"&&R(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(q){ht(r,r.return,q)}}else Ti(i,r,a,c);break;case 31:Ti(i,r,a,c);break;case 13:Ti(i,r,a,c);break;case 23:break;case 22:v=r.stateNode,b=r.alternate,r.memoizedState!==null?v._visibility&2?Ti(i,r,a,c):Cl(i,r):v._visibility&2?Ti(i,r,a,c):(v._visibility|=2,ra(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Jf(b,r);break;case 24:Ti(i,r,a,c),y&2048&&Kf(r.alternate,r);break;default:Ti(i,r,a,c)}}function ra(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,b=r,R=a,q=c,W=b.flags;switch(b.tag){case 0:case 11:case 15:ra(v,b,R,q,y),bl(8,b);break;case 23:break;case 22:var te=b.stateNode;b.memoizedState!==null?te._visibility&2?ra(v,b,R,q,y):Cl(v,b):(te._visibility|=2,ra(v,b,R,q,y)),y&&W&2048&&Jf(b.alternate,b);break;case 24:ra(v,b,R,q,y),y&&W&2048&&Kf(b.alternate,b);break;default:ra(v,b,R,q,y)}r=r.sibling}}function Cl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:Cl(a,c),y&2048&&Jf(c.alternate,c);break;case 24:Cl(a,c),y&2048&&Kf(c.alternate,c);break;default:Cl(a,c)}r=r.sibling}}var Rl=8192;function oa(i,r,a){if(i.subtreeFlags&Rl)for(i=i.child;i!==null;)Ny(i,r,a),i=i.sibling}function Ny(i,r,a){switch(i.tag){case 26:oa(i,r,a),i.flags&Rl&&i.memoizedState!==null&&Bb(a,Ei,i.memoizedState,i.memoizedProps);break;case 5:oa(i,r,a);break;case 3:case 4:var c=Ei;Ei=bc(i.stateNode.containerInfo),oa(i,r,a),Ei=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Rl,Rl=16777216,oa(i,r,a),Rl=c):oa(i,r,a));break;default:oa(i,r,a)}}function My(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function xl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Wt=c,Dy(c,i)}My(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ky(i),i=i.sibling}function ky(i){switch(i.tag){case 0:case 11:case 15:xl(i),i.flags&2048&&er(9,i,i.return);break;case 3:xl(i);break;case 12:xl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,dc(i)):xl(i);break;default:xl(i)}}function dc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Wt=c,Dy(c,i)}My(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:er(8,r,r.return),dc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,dc(r));break;default:dc(r)}i=i.sibling}}function Dy(i,r){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:er(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:dl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Wt=c;else e:for(a=i;Wt!==null;){c=Wt;var y=c.sibling,v=c.return;if(Sy(c),c===a){Wt=null;break e}if(y!==null){y.return=v,Wt=y;break e}Wt=v}}}var ZS={getCacheForType:function(i){var r=nn(Ht),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return nn(Ht).controller.signal}},eb=typeof WeakMap=="function"?WeakMap:Map,lt=0,_t=null,$e=null,Je=0,ft=0,Vn=null,tr=!1,aa=!1,Yf=!1,ms=0,Dt=0,nr=0,ao=0,Wf=0,qn=0,la=0,Il=null,xn=null,Xf=!1,fc=0,Py=0,hc=1/0,pc=null,ir=null,Jt=0,sr=null,ua=null,ys=0,Qf=0,Zf=null,Uy=null,Nl=0,eh=null;function Hn(){return(lt&2)!==0&&Je!==0?Je&-Je:J.T!==null?oh():Or()}function Oy(){if(qn===0)if((Je&536870912)===0||We){var i=Wi;Wi<<=1,(Wi&3932160)===0&&(Wi=262144),qn=i}else qn=536870912;return i=Ln.current,i!==null&&(i.flags|=32),qn}function In(i,r,a){(i===_t&&(ft===2||ft===9)||i.cancelPendingCommit!==null)&&(ca(i,0),rr(i,Je,qn,!1)),Wn(i,a),((lt&2)===0||i!==_t)&&(i===_t&&((lt&2)===0&&(ao|=a),Dt===4&&rr(i,Je,qn,!1)),Fi(i))}function Ly(i,r,a){if((lt&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||kn(i,r),y=c?ib(i,r):nh(i,r,!0),v=c;do{if(y===0){aa&&!c&&rr(i,r,0,!1);break}else{if(a=i.current.alternate,v&&!tb(a)){y=nh(i,r,!1),v=!1;continue}if(y===2){if(v=r,i.errorRecoveryDisabledLanes&v)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var R=i;y=Il;var q=R.current.memoizedState.isDehydrated;if(q&&(ca(R,b).flags|=256),b=nh(R,b,!1),b!==2){if(Yf&&!q){R.errorRecoveryDisabledLanes|=v,ao|=v,y=4;break e}v=xn,xn=y,v!==null&&(xn===null?xn=v:xn.push.apply(xn,v))}y=b}if(v=!1,y!==2)continue}}if(y===1){ca(i,0),rr(i,r,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:rr(c,r,qn,!tr);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=fc+300-Xt(),10<y)){if(rr(c,r,qn,!tr),Yn(c,0,!0)!==0)break e;ys=r,c.timeoutHandle=p0(By.bind(null,c,a,xn,pc,Xf,r,qn,ao,la,tr,v,"Throttled",-0,0),y);break e}By(c,a,xn,pc,Xf,r,qn,ao,la,tr,v,null,-0,0)}}break}while(!0);Fi(i)}function By(i,r,a,c,y,v,b,R,q,W,te,re,X,ee){if(i.timeoutHandle=-1,re=r.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},Ny(r,v,re);var Te=(v&62914560)===v?fc-Xt():(v&4194048)===v?Py-Xt():0;if(Te=Vb(re,Te),Te!==null){ys=v,i.cancelPendingCommit=Te(jy.bind(null,i,r,v,a,c,y,b,R,q,te,re,null,X,ee)),rr(i,v,b,!W);return}}jy(i,r,v,a,c,y,b,R,q)}function tb(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Un(v(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function rr(i,r,a,c){r&=~Wf,r&=~ao,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var v=31-Ct(y),b=1<<v;c[v]=-1,y&=~b}a!==0&&Os(i,a,r)}function gc(){return(lt&6)===0?(Ml(0),!1):!0}function th(){if($e!==null){if(ft===0)var i=$e.return;else i=$e,os=Qr=null,yf(i),ea=null,hl=0,i=$e;for(;i!==null;)gy(i.alternate,i),i=i.return;$e=null}}function ca(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,Eb(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ys=0,th(),_t=i,$e=a=ss(i.current,null),Je=r,ft=0,Vn=null,tr=!1,aa=kn(i,r),Yf=!1,la=qn=Wf=ao=nr=Dt=0,xn=Il=null,Xf=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-Ct(c),v=1<<y;r|=i[y],c&=~v}return ms=r,Ou(),a}function Vy(i,r){qe=null,J.H=El,r===Zo||r===zu?(r=tm(),ft=3):r===rf?(r=tm(),ft=4):ft=r===Df?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,$e===null&&(Dt=1,sc(i,ni(r,i.current)))}function qy(){var i=Ln.current;return i===null?!0:(Je&4194048)===Je?oi===null:(Je&62914560)===Je||(Je&536870912)!==0?i===oi:!1}function Hy(){var i=J.H;return J.H=El,i===null?El:i}function Gy(){var i=J.A;return J.A=ZS,i}function mc(){Dt=4,tr||(Je&4194048)!==Je&&Ln.current!==null||(aa=!0),(nr&134217727)===0&&(ao&134217727)===0||_t===null||rr(_t,Je,qn,!1)}function nh(i,r,a){var c=lt;lt|=2;var y=Hy(),v=Gy();(_t!==i||Je!==r)&&(pc=null,ca(i,r)),r=!1;var b=Dt;e:do try{if(ft!==0&&$e!==null){var R=$e,q=Vn;switch(ft){case 8:th(),b=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var W=ft;if(ft=0,Vn=null,da(i,R,q,W),a&&aa){b=0;break e}break;default:W=ft,ft=0,Vn=null,da(i,R,q,W)}}nb(),b=Dt;break}catch(te){Vy(i,te)}while(!0);return r&&i.shellSuspendCounter++,os=Qr=null,lt=c,J.H=y,J.A=v,$e===null&&(_t=null,Je=0,Ou()),b}function nb(){for(;$e!==null;)Fy($e)}function ib(i,r){var a=lt;lt|=2;var c=Hy(),y=Gy();_t!==i||Je!==r?(pc=null,hc=Xt()+500,ca(i,r)):aa=kn(i,r);e:do try{if(ft!==0&&$e!==null){r=$e;var v=Vn;t:switch(ft){case 1:ft=0,Vn=null,da(i,r,v,1);break;case 2:case 9:if(Zg(v)){ft=0,Vn=null,zy(r);break}r=function(){ft!==2&&ft!==9||_t!==i||(ft=7),Fi(i)},v.then(r,r);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Zg(v)?(ft=0,Vn=null,zy(r)):(ft=0,Vn=null,da(i,r,v,7));break;case 5:var b=null;switch($e.tag){case 26:b=$e.memoizedState;case 5:case 27:var R=$e;if(b?I0(b):R.stateNode.complete){ft=0,Vn=null;var q=R.sibling;if(q!==null)$e=q;else{var W=R.return;W!==null?($e=W,yc(W)):$e=null}break t}}ft=0,Vn=null,da(i,r,v,5);break;case 6:ft=0,Vn=null,da(i,r,v,6);break;case 8:th(),Dt=6;break e;default:throw Error(s(462))}}sb();break}catch(te){Vy(i,te)}while(!0);return os=Qr=null,J.H=c,J.A=y,lt=a,$e!==null?0:(_t=null,Je=0,Ou(),Dt)}function sb(){for(;$e!==null&&!ko();)Fy($e)}function Fy(i){var r=hy(i.alternate,i,ms);i.memoizedProps=i.pendingProps,r===null?yc(i):$e=r}function zy(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=ay(a,r,r.pendingProps,r.type,void 0,Je);break;case 11:r=ay(a,r,r.pendingProps,r.type.render,r.ref,Je);break;case 5:yf(r);default:gy(a,r),r=$e=Gg(r,ms),r=hy(a,r,ms)}i.memoizedProps=i.pendingProps,r===null?yc(i):$e=r}function da(i,r,a,c){os=Qr=null,yf(r),ea=null,hl=0;var y=r.return;try{if(jS(i,y,r,a,Je)){Dt=1,sc(i,ni(a,i.current)),$e=null;return}}catch(v){if(y!==null)throw $e=y,v;Dt=1,sc(i,ni(a,i.current)),$e=null;return}r.flags&32768?(We||c===1?i=!0:aa||(Je&536870912)!==0?i=!1:(tr=i=!0,(c===2||c===9||c===3||c===6)&&(c=Ln.current,c!==null&&c.tag===13&&(c.flags|=16384))),$y(r,i)):yc(r)}function yc(i){var r=i;do{if((r.flags&32768)!==0){$y(r,tr);return}i=r.return;var a=YS(r.alternate,r,ms);if(a!==null){$e=a;return}if(r=r.sibling,r!==null){$e=r;return}$e=r=i}while(r!==null);Dt===0&&(Dt=5)}function $y(i,r){do{var a=WS(i.alternate,i);if(a!==null){a.flags&=32767,$e=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){$e=i;return}$e=i=a}while(i!==null);Dt=6,$e=null}function jy(i,r,a,c,y,v,b,R,q){i.cancelPendingCommit=null;do vc();while(Jt!==0);if((lt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=Fd,Xa(i,a,v,b,R,q),i===_t&&($e=_t=null,Je=0),ua=r,sr=i,ys=a,Qf=v,Zf=y,Uy=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,lb(ki,function(){return Xy(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,y=le.p,le.p=2,b=lt,lt|=4;try{XS(i,r,a)}finally{lt=b,le.p=y,J.T=c}}Jt=1,Jy(),Ky(),Yy()}}function Jy(){if(Jt===1){Jt=0;var i=sr,r=ua,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var c=le.p;le.p=2;var y=lt;lt|=4;try{Ry(r,i);var v=ph,b=Dg(i.containerInfo),R=v.focusedElem,q=v.selectionRange;if(b!==R&&R&&R.ownerDocument&&kg(R.ownerDocument.documentElement,R)){if(q!==null&&Bd(R)){var W=q.start,te=q.end;if(te===void 0&&(te=W),"selectionStart"in R)R.selectionStart=W,R.selectionEnd=Math.min(te,R.value.length);else{var re=R.ownerDocument||document,X=re&&re.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Te=R.textContent.length,ke=Math.min(q.start,Te),mt=q.end===void 0?ke:Math.min(q.end,Te);!ee.extend&&ke>mt&&(b=mt,mt=ke,ke=b);var z=Mg(R,ke),F=Mg(R,mt);if(z&&F&&(ee.rangeCount!==1||ee.anchorNode!==z.node||ee.anchorOffset!==z.offset||ee.focusNode!==F.node||ee.focusOffset!==F.offset)){var K=re.createRange();K.setStart(z.node,z.offset),ee.removeAllRanges(),ke>mt?(ee.addRange(K),ee.extend(F.node,F.offset)):(K.setEnd(F.node,F.offset),ee.addRange(K))}}}}for(re=[],ee=R;ee=ee.parentNode;)ee.nodeType===1&&re.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<re.length;R++){var ie=re[R];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Nc=!!hh,ph=hh=null}finally{lt=y,le.p=c,J.T=a}}i.current=r,Jt=2}}function Ky(){if(Jt===2){Jt=0;var i=sr,r=ua,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var c=le.p;le.p=2;var y=lt;lt|=4;try{Ty(i,r.alternate,r)}finally{lt=y,le.p=c,J.T=a}}Jt=3}}function Yy(){if(Jt===4||Jt===3){Jt=0,Mn();var i=sr,r=ua,a=ys,c=Uy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Jt=5:(Jt=0,ua=sr=null,Wy(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ir=null),hi(a),r=r.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(wn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=J.T,y=le.p,le.p=2,J.T=null;try{for(var v=i.onRecoverableError,b=0;b<c.length;b++){var R=c[b];v(R.value,{componentStack:R.stack})}}finally{J.T=r,le.p=y}}(ys&3)!==0&&vc(),Fi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===eh?Nl++:(Nl=0,eh=i):Nl=0,Ml(0)}}function Wy(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,dl(r)))}function vc(){return Jy(),Ky(),Yy(),Xy()}function Xy(){if(Jt!==5)return!1;var i=sr,r=Qf;Qf=0;var a=hi(ys),c=J.T,y=le.p;try{le.p=32>a?32:a,J.T=null,a=Zf,Zf=null;var v=sr,b=ys;if(Jt=0,ua=sr=null,ys=0,(lt&6)!==0)throw Error(s(331));var R=lt;if(lt|=4,ky(v.current),Iy(v,v.current,b,a),lt=R,Ml(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(wn,v)}catch{}return!0}finally{le.p=y,J.T=c,Wy(i,r)}}function Qy(i,r,a){r=ni(a,r),r=kf(i.stateNode,r,2),i=Xs(i,r,2),i!==null&&(Wn(i,2),Fi(i))}function ht(i,r,a){if(i.tag===3)Qy(i,i,a);else for(;r!==null;){if(r.tag===3){Qy(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ir===null||!ir.has(c))){i=ni(a,i),a=Zm(2),c=Xs(r,a,2),c!==null&&(ey(a,c,r,i),Wn(c,2),Fi(c));break}}r=r.return}}function ih(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new eb;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(Yf=!0,y.add(a),i=rb.bind(null,i,r,a),r.then(i,i))}function rb(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,_t===i&&(Je&a)===a&&(Dt===4||Dt===3&&(Je&62914560)===Je&&300>Xt()-fc?(lt&2)===0&&ca(i,0):Wf|=a,la===Je&&(la=0)),Fi(i)}function Zy(i,r){r===0&&(r=Uo()),i=Yr(i,r),i!==null&&(Wn(i,r),Fi(i))}function ob(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),Zy(i,a)}function ab(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),Zy(i,a)}function lb(i,r){return Oe(i,r)}var _c=null,fa=null,sh=!1,wc=!1,rh=!1,or=0;function Fi(i){i!==fa&&i.next===null&&(fa===null?_c=fa=i:fa=fa.next=i),wc=!0,sh||(sh=!0,cb())}function Ml(i,r){if(!rh&&wc){rh=!0;do for(var a=!1,c=_c;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var b=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-Ct(42|i)+1)-1,v&=y&~(b&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,i0(c,v))}else v=Je,v=Yn(c,c===_t?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||kn(c,v)||(a=!0,i0(c,v));c=c.next}while(a);rh=!1}}function ub(){e0()}function e0(){wc=sh=!1;var i=0;or!==0&&wb()&&(i=or);for(var r=Xt(),a=null,c=_c;c!==null;){var y=c.next,v=t0(c,r);v===0?(c.next=null,a===null?_c=y:a.next=y,y===null&&(fa=a)):(a=c,(i!==0||(v&3)!==0)&&(wc=!0)),c=y}Jt!==0&&Jt!==5||Ml(i),or!==0&&(or=0)}function t0(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var b=31-Ct(v),R=1<<b,q=y[b];q===-1?((R&a)===0||(R&c)!==0)&&(y[b]=Wa(R,r)):q<=r&&(i.expiredLanes|=R),v&=~R}if(r=_t,a=Je,a=Yn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(ft===2||ft===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Mi(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||kn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Mi(c),hi(a)){case 2:case 8:a=Us;break;case 32:a=ki;break;case 268435456:a=Do;break;default:a=ki}return c=n0.bind(null,i),a=Oe(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Mi(c),i.callbackPriority=2,i.callbackNode=null,2}function n0(i,r){if(Jt!==0&&Jt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(vc()&&i.callbackNode!==a)return null;var c=Je;return c=Yn(i,i===_t?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Ly(i,c,r),t0(i,Xt()),i.callbackNode!=null&&i.callbackNode===a?n0.bind(null,i):null)}function i0(i,r){if(vc())return null;Ly(i,r,!0)}function cb(){Tb(function(){(lt&6)!==0?Oe(Nr,ub):e0()})}function oh(){if(or===0){var i=Xo;i===0&&(i=Jn,Jn<<=1,(Jn&261888)===0&&(Jn=256)),or=i}return or}function s0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Oo(""+i)}function r0(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function db(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var v=s0((y[ye]||null).action),b=c.submitter;b&&(r=(r=b[ye]||null)?s0(r.formAction):b.getAttribute("formAction"),r!==null&&(v=r,b=null));var R=new Li("action","action",null,c,y);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(or!==0){var q=b?r0(y,b):new FormData(y);Cf(a,{pending:!0,data:q,method:y.method,action:v},null,q)}}else typeof v=="function"&&(R.preventDefault(),q=b?r0(y,b):new FormData(y),Cf(a,{pending:!0,data:q,method:y.method,action:v},v,q))},currentTarget:y}]})}}for(var ah=0;ah<Gd.length;ah++){var lh=Gd[ah],fb=lh.toLowerCase(),hb=lh[0].toUpperCase()+lh.slice(1);wi(fb,"on"+hb)}wi(Og,"onAnimationEnd"),wi(Lg,"onAnimationIteration"),wi(Bg,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(IS,"onTransitionRun"),wi(NS,"onTransitionStart"),wi(MS,"onTransitionCancel"),wi(Vg,"onTransitionEnd"),Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"]),Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function o0(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var b=c.length-1;0<=b;b--){var R=c[b],q=R.instance,W=R.currentTarget;if(R=R.listener,q!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=W;try{v(y)}catch(te){Uu(te)}y.currentTarget=null,v=q}else for(b=0;b<c.length;b++){if(R=c[b],q=R.instance,W=R.currentTarget,R=R.listener,q!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=W;try{v(y)}catch(te){Uu(te)}y.currentTarget=null,v=q}}}}function je(i,r){var a=r[Re];a===void 0&&(a=r[Re]=new Set);var c=i+"__bubble";a.has(c)||(a0(r,i,2,!1),a.add(c))}function uh(i,r,a){var c=0;r&&(c|=4),a0(a,i,c,r)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function ch(i){if(!i[Ec]){i[Ec]=!0,Di.forEach(function(a){a!=="selectionchange"&&(pb.has(a)||uh(a,!1,i),uh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Ec]||(r[Ec]=!0,uh("selectionchange",!1,r))}}function a0(i,r,a,c){switch(O0(r)){case 2:var y=Gb;break;case 8:y=Fb;break;default:y=Ah}a=y.bind(null,r,a,i),y=void 0,!Hr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function dh(i,r,a,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var R=c.stateNode.containerInfo;if(R===y)break;if(b===4)for(b=c.return;b!==null;){var q=b.tag;if((q===3||q===4)&&b.stateNode.containerInfo===y)return;b=b.return}for(;R!==null;){if(b=Qn(R),b===null)return;if(q=b.tag,q===5||q===6||q===26||q===27){c=v=b;continue e}R=R.parentNode}}c=c.return}Hs(function(){var W=v,te=Zn(a),re=[];e:{var X=qg.get(i);if(X!==void 0){var ee=Li,Te=i;switch(i){case"keypress":if(Fr(a)===0)break e;case"keydown":case"keyup":ee=Du;break;case"focusin":Te="focus",ee=$r;break;case"focusout":Te="blur",ee=$r;break;case"beforeblur":case"afterblur":ee=$r;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=A;break;case Og:case Lg:case Bg:ee=Au;break;case Vg:ee=j;break;case"scroll":case"scrollend":ee=nl;break;case"wheel":ee=he;break;case"copy":case"cut":case"paste":ee=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=g;break;case"toggle":case"beforetoggle":ee=Lt}var ke=(r&4)!==0,mt=!ke&&(i==="scroll"||i==="scrollend"),z=ke?X!==null?X+"Capture":null:X;ke=[];for(var F=W,K;F!==null;){var ie=F;if(K=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||K===null||z===null||(ie=mi(F,z),ie!=null&&ke.push(Dl(F,ie,K))),mt)break;F=F.return}0<ke.length&&(X=new ee(X,Te,null,a,te),re.push({event:X,listeners:ke}))}}if((r&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",X&&a!==Za&&(Te=a.relatedTarget||a.fromElement)&&(Qn(Te)||Te[de]))break e;if((ee||X)&&(X=te.window===te?te:(X=te.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Te=a.relatedTarget||a.toElement,ee=W,Te=Te?Qn(Te):null,Te!==null&&(mt=l(Te),ke=Te.tag,Te!==mt||ke!==5&&ke!==27&&ke!==6)&&(Te=null)):(ee=null,Te=W),ee!==Te)){if(ke=il,ie="onMouseLeave",z="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(ke=g,ie="onPointerLeave",z="onPointerEnter",F="pointer"),mt=ee==null?X:Yt(ee),K=Te==null?X:Yt(Te),X=new ke(ie,F+"leave",ee,a,te),X.target=mt,X.relatedTarget=K,ie=null,Qn(te)===W&&(ke=new ke(z,F+"enter",Te,a,te),ke.target=K,ke.relatedTarget=mt,ie=ke),mt=ie,ee&&Te)t:{for(ke=gb,z=ee,F=Te,K=0,ie=z;ie;ie=ke(ie))K++;ie=0;for(var Me=F;Me;Me=ke(Me))ie++;for(;0<K-ie;)z=ke(z),K--;for(;0<ie-K;)F=ke(F),ie--;for(;K--;){if(z===F||F!==null&&z===F.alternate){ke=z;break t}z=ke(z),F=ke(F)}ke=null}else ke=null;ee!==null&&l0(re,X,ee,ke,!1),Te!==null&&mt!==null&&l0(re,mt,Te,ke,!0)}}e:{if(X=W?Yt(W):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var st=Ag;else if(Sg(X))if(Cg)st=CS;else{st=bS;var Ae=SS}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?W&&Vs(W.elementType)&&(st=Ag):st=AS;if(st&&(st=st(i,W))){bg(re,st,a,te);break e}Ae&&Ae(i,X,W),i==="focusout"&&W&&X.type==="number"&&W.memoizedProps.value!=null&&Ge(X,"number",X.value)}switch(Ae=W?Yt(W):window,i){case"focusin":(Sg(Ae)||Ae.contentEditable==="true")&&(Fo=Ae,Vd=W,ll=null);break;case"focusout":ll=Vd=Fo=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,Pg(re,a,te);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":Pg(re,a,te)}var He;if(Mt)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Go?Ho(i,a)&&(Ke="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ke="onCompositionStart");Ke&&(vi&&a.locale!=="ko"&&(Go||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Go&&(He=tl()):(Oi=te,el="value"in Oi?Oi.value:Oi.textContent,Go=!0)),Ae=Tc(W,Ke),0<Ae.length&&(Ke=new Vi(Ke,i,null,a,te),re.push({event:Ke,listeners:Ae}),He?Ke.data=He:(He=Tg(a),He!==null&&(Ke.data=He)))),(He=is?_S(i,a):wS(i,a))&&(Ke=Tc(W,"onBeforeInput"),0<Ke.length&&(Ae=new Vi("onBeforeInput","beforeinput",null,a,te),re.push({event:Ae,listeners:Ke}),Ae.data=He)),db(re,i,W,a,te)}o0(re,r)})}function Dl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Tc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=mi(i,a),y!=null&&c.unshift(Dl(i,y,v)),y=mi(i,r),y!=null&&c.push(Dl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function gb(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function l0(i,r,a,c,y){for(var v=r._reactName,b=[];a!==null&&a!==c;){var R=a,q=R.alternate,W=R.stateNode;if(R=R.tag,q!==null&&q===c)break;R!==5&&R!==26&&R!==27||W===null||(q=W,y?(W=mi(a,v),W!=null&&b.unshift(Dl(a,W,q))):y||(W=mi(a,v),W!=null&&b.push(Dl(a,W,q)))),a=a.return}b.length!==0&&i.push({event:r,listeners:b})}var mb=/\r\n?/g,yb=/\u0000|\uFFFD/g;function u0(i){return(typeof i=="string"?i:""+i).replace(mb,`
`).replace(yb,"")}function c0(i,r){return r=u0(r),u0(i)===r}function gt(i,r,a,c,y,v){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||it(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&it(i,""+c);break;case"className":Et(i,"class",c);break;case"tabIndex":Et(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Et(i,a,c);break;case"style":es(i,c,v);break;case"data":if(r!=="object"){Et(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Oo(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&gt(i,r,"name",y.name,y,null),gt(i,r,"formEncType",y.formEncType,y,null),gt(i,r,"formMethod",y.formMethod,y,null),gt(i,r,"formTarget",y.formTarget,y,null)):(gt(i,r,"encType",y.encType,y,null),gt(i,r,"method",y.method,y,null),gt(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Oo(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=gi);break;case"onScroll":c!=null&&je("scroll",i);break;case"onScrollEnd":c!=null&&je("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Oo(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":je("beforetoggle",i),je("toggle",i),Bs(i,"popover",c);break;case"xlinkActuate":et(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":et(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":et(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":et(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":et(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":et(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":et(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":et(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":et(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Bs(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Qa.get(a)||a,Bs(i,a,c))}}function fh(i,r,a,c,y,v){switch(a){case"style":es(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?it(i,c):(typeof c=="number"||typeof c=="bigint")&&it(i,""+c);break;case"onScroll":c!=null&&je("scroll",i);break;case"onScrollEnd":c!=null&&je("scrollend",i);break;case"onClick":c!=null&&(i.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),v=i[ye]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Bs(i,a,c)}}}function rn(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",i),je("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var b=a[v];if(b!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:gt(i,r,v,b,a,null)}}y&&gt(i,r,"srcSet",a.srcSet,a,null),c&&gt(i,r,"src",a.src,a,null);return;case"input":je("invalid",i);var R=v=b=y=null,q=null,W=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":y=te;break;case"type":b=te;break;case"checked":q=te;break;case"defaultChecked":W=te;break;case"value":v=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:gt(i,r,c,te,a,null)}}Be(i,v,R,q,W,b,y,!1);return;case"select":je("invalid",i),c=b=v=null;for(y in a)if(a.hasOwnProperty(y)&&(R=a[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":b=R;break;case"multiple":c=R;default:gt(i,r,y,R,a,null)}r=v,a=b,i.multiple=!!c,r!=null?at(i,!!c,r,!1):a!=null&&at(i,!!c,a,!0);return;case"textarea":je("invalid",i),v=y=c=null;for(b in a)if(a.hasOwnProperty(b)&&(R=a[b],R!=null))switch(b){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:gt(i,r,b,R,a,null)}yt(i,c,y,v);return;case"option":for(q in a)if(a.hasOwnProperty(q)&&(c=a[q],c!=null))switch(q){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:gt(i,r,q,c,a,null)}return;case"dialog":je("beforetoggle",i),je("toggle",i),je("cancel",i),je("close",i);break;case"iframe":case"object":je("load",i);break;case"video":case"audio":for(c=0;c<kl.length;c++)je(kl[c],i);break;case"image":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"embed":case"source":case"link":je("error",i),je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in a)if(a.hasOwnProperty(W)&&(c=a[W],c!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:gt(i,r,W,c,a,null)}return;default:if(Vs(r)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&fh(i,r,te,c,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(c=a[R],c!=null&&gt(i,r,R,c,a,null))}function vb(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,b=null,R=null,q=null,W=null,te=null;for(ee in a){var re=a[ee];if(a.hasOwnProperty(ee)&&re!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":q=re;default:c.hasOwnProperty(ee)||gt(i,r,ee,null,c,re)}}for(var X in c){var ee=c[X];if(re=a[X],c.hasOwnProperty(X)&&(ee!=null||re!=null))switch(X){case"type":v=ee;break;case"name":y=ee;break;case"checked":W=ee;break;case"defaultChecked":te=ee;break;case"value":b=ee;break;case"defaultValue":R=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:ee!==re&&gt(i,r,X,ee,c,re)}}Fe(i,b,R,q,W,te,v,y);return;case"select":ee=b=R=X=null;for(v in a)if(q=a[v],a.hasOwnProperty(v)&&q!=null)switch(v){case"value":break;case"multiple":ee=q;default:c.hasOwnProperty(v)||gt(i,r,v,null,c,q)}for(y in c)if(v=c[y],q=a[y],c.hasOwnProperty(y)&&(v!=null||q!=null))switch(y){case"value":X=v;break;case"defaultValue":R=v;break;case"multiple":b=v;default:v!==q&&gt(i,r,y,v,c,q)}r=R,a=b,c=ee,X!=null?at(i,!!a,X,!1):!!c!=!!a&&(r!=null?at(i,!!a,r,!0):at(i,!!a,a?[]:"",!1));return;case"textarea":ee=X=null;for(R in a)if(y=a[R],a.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:gt(i,r,R,null,c,y)}for(b in c)if(y=c[b],v=a[b],c.hasOwnProperty(b)&&(y!=null||v!=null))switch(b){case"value":X=y;break;case"defaultValue":ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&gt(i,r,b,y,c,v)}ct(i,X,ee);return;case"option":for(var Te in a)if(X=a[Te],a.hasOwnProperty(Te)&&X!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:gt(i,r,Te,null,c,X)}for(q in c)if(X=c[q],ee=a[q],c.hasOwnProperty(q)&&X!==ee&&(X!=null||ee!=null))switch(q){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:gt(i,r,q,X,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in a)X=a[ke],a.hasOwnProperty(ke)&&X!=null&&!c.hasOwnProperty(ke)&&gt(i,r,ke,null,c,X);for(W in c)if(X=c[W],ee=a[W],c.hasOwnProperty(W)&&X!==ee&&(X!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:gt(i,r,W,X,c,ee)}return;default:if(Vs(r)){for(var mt in a)X=a[mt],a.hasOwnProperty(mt)&&X!==void 0&&!c.hasOwnProperty(mt)&&fh(i,r,mt,void 0,c,X);for(te in c)X=c[te],ee=a[te],!c.hasOwnProperty(te)||X===ee||X===void 0&&ee===void 0||fh(i,r,te,X,c,ee);return}}for(var z in a)X=a[z],a.hasOwnProperty(z)&&X!=null&&!c.hasOwnProperty(z)&&gt(i,r,z,null,c,X);for(re in c)X=c[re],ee=a[re],!c.hasOwnProperty(re)||X===ee||X==null&&ee==null||gt(i,r,re,X,c,ee)}function d0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _b(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,b=y.initiatorType,R=y.duration;if(v&&R&&d0(b)){for(b=0,R=y.responseEnd,c+=1;c<a.length;c++){var q=a[c],W=q.startTime;if(W>R)break;var te=q.transferSize,re=q.initiatorType;te&&d0(re)&&(q=q.responseEnd,b+=te*(q<R?1:(R-W)/(q-W)))}if(--c,r+=8*(v+b)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var hh=null,ph=null;function Sc(i){return i.nodeType===9?i:i.ownerDocument}function f0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function gh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var mh=null;function wb(){var i=window.event;return i&&i.type==="popstate"?i===mh?!1:(mh=i,!0):(mh=null,!1)}var p0=typeof setTimeout=="function"?setTimeout:void 0,Eb=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,Tb=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(i){return g0.resolve(null).then(i).catch(Sb)}:p0;function Sb(i){setTimeout(function(){throw i})}function ar(i){return i==="head"}function m0(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),ma(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Pl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Pl(a);for(var v=a.firstChild;v;){var b=v.nextSibling,R=v.nodeName;v[Ut]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=b}}else a==="body"&&Pl(i.ownerDocument.body);a=y}while(a);ma(r)}function y0(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function yh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yh(a),Xn(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function bb(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ut])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=ai(i.nextSibling),i===null)break}return null}function Ab(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=ai(i.nextSibling),i===null))return null;return i}function v0(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ai(i.nextSibling),i===null))return null;return i}function vh(i){return i.data==="$?"||i.data==="$~"}function _h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Cb(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function ai(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var wh=null;function _0(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return ai(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function w0(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function E0(i,r,a){switch(r=Sc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Pl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Xn(i)}var li=new Map,T0=new Set;function bc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var vs=le.d;le.d={f:Rb,r:xb,D:Ib,C:Nb,L:Mb,m:kb,X:Pb,S:Db,M:Ub};function Rb(){var i=vs.f(),r=gc();return i||r}function xb(i){var r=xt(i);r!==null&&r.tag===5&&r.type==="form"?Vm(r):vs.r(i)}var ha=typeof document>"u"?null:document;function S0(i,r,a){var c=ha;if(c&&typeof r=="string"&&r){var y=ve(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),T0.has(y)||(T0.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),rn(r,"link",i),wt(r),c.head.appendChild(r)))}}function Ib(i){vs.D(i),S0("dns-prefetch",i,null)}function Nb(i,r){vs.C(i,r),S0("preconnect",i,r)}function Mb(i,r,a){vs.L(i,r,a);var c=ha;if(c&&i&&r){var y='link[rel="preload"][as="'+ve(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+ve(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+ve(a.imageSizes)+'"]')):y+='[href="'+ve(i)+'"]';var v=y;switch(r){case"style":v=pa(i);break;case"script":v=ga(i)}li.has(v)||(i=w({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),li.set(v,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Ul(v))||r==="script"&&c.querySelector(Ol(v))||(r=c.createElement("link"),rn(r,"link",i),wt(r),c.head.appendChild(r)))}}function kb(i,r){vs.m(i,r);var a=ha;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+ve(c)+'"][href="'+ve(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ga(i)}if(!li.has(v)&&(i=w({rel:"modulepreload",href:i},r),li.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ol(v)))return}c=a.createElement("link"),rn(c,"link",i),wt(c),a.head.appendChild(c)}}}function Db(i,r,a){vs.S(i,r,a);var c=ha;if(c&&i){var y=pn(c).hoistableStyles,v=pa(i);r=r||"default";var b=y.get(v);if(!b){var R={loading:0,preload:null};if(b=c.querySelector(Ul(v)))R.loading=5;else{i=w({rel:"stylesheet",href:i,"data-precedence":r},a),(a=li.get(v))&&Eh(i,a);var q=b=c.createElement("link");wt(q),rn(q,"link",i),q._p=new Promise(function(W,te){q.onload=W,q.onerror=te}),q.addEventListener("load",function(){R.loading|=1}),q.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Ac(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:R},y.set(v,b)}}}function Pb(i,r){vs.X(i,r);var a=ha;if(a&&i){var c=pn(a).hoistableScripts,y=ga(i),v=c.get(y);v||(v=a.querySelector(Ol(y)),v||(i=w({src:i,async:!0},r),(r=li.get(y))&&Th(i,r),v=a.createElement("script"),wt(v),rn(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function Ub(i,r){vs.M(i,r);var a=ha;if(a&&i){var c=pn(a).hoistableScripts,y=ga(i),v=c.get(y);v||(v=a.querySelector(Ol(y)),v||(i=w({src:i,async:!0,type:"module"},r),(r=li.get(y))&&Th(i,r),v=a.createElement("script"),wt(v),rn(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function b0(i,r,a,c){var y=(y=ge.current)?bc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=pa(a.href),a=pn(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=pa(a.href);var v=pn(y).hoistableStyles,b=v.get(i);if(b||(y=y.ownerDocument||y,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,b),(v=y.querySelector(Ul(i)))&&!v._p&&(b.instance=v,b.state.loading=5),li.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},li.set(i,a),v||Ob(y,i,a,b.state))),r&&c===null)throw Error(s(528,""));return b}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ga(a),a=pn(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function pa(i){return'href="'+ve(i)+'"'}function Ul(i){return'link[rel="stylesheet"]['+i+"]"}function A0(i){return w({},i,{"data-precedence":i.precedence,precedence:null})}function Ob(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),rn(r,"link",a),wt(r),i.head.appendChild(r))}function ga(i){return'[src="'+ve(i)+'"]'}function Ol(i){return"script[async]"+i}function C0(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+ve(a.href)+'"]');if(c)return r.instance=c,wt(c),c;var y=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),wt(c),rn(c,"style",y),Ac(c,a.precedence,i),r.instance=c;case"stylesheet":y=pa(a.href);var v=i.querySelector(Ul(y));if(v)return r.state.loading|=4,r.instance=v,wt(v),v;c=A0(a),(y=li.get(y))&&Eh(c,y),v=(i.ownerDocument||i).createElement("link"),wt(v);var b=v;return b._p=new Promise(function(R,q){b.onload=R,b.onerror=q}),rn(v,"link",c),r.state.loading|=4,Ac(v,a.precedence,i),r.instance=v;case"script":return v=ga(a.src),(y=i.querySelector(Ol(v)))?(r.instance=y,wt(y),y):(c=a,(y=li.get(v))&&(c=w({},a),Th(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),wt(y),rn(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Ac(c,a.precedence,i));return r.instance}function Ac(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,b=0;b<c.length;b++){var R=c[b];if(R.dataset.precedence===r)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Eh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Th(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Cc=null;function R0(i,r,a){if(Cc===null){var c=new Map,y=Cc=new Map;y.set(a,c)}else y=Cc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[Ut]||v[we]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var b=v.getAttribute(r)||"";b=i+b;var R=c.get(b);R?R.push(v):c.set(b,[v])}}return c}function x0(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function Lb(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function I0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Bb(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=pa(c.href),v=r.querySelector(Ul(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Rc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=v,wt(v);return}v=r.ownerDocument||r,c=A0(c),(y=li.get(y))&&Eh(c,y),v=v.createElement("link"),wt(v);var b=v;b._p=new Promise(function(R,q){b.onload=R,b.onerror=q}),rn(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Rc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Sh=0;function Vb(i,r){return i.stylesheets&&i.count===0&&Ic(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Ic(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&Sh===0&&(Sh=62500*_b());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ic(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Sh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Rc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var xc=null;function Ic(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,xc=new Map,r.forEach(qb,i),xc=null,Rc.call(i))}function qb(i,r){if(!(r.state.loading&4)){var a=xc.get(i);if(a)var c=a.get(null);else{a=new Map,xc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var b=y[v];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),c=b)}c&&a.set(null,c)}y=r.instance,b=y.getAttribute("data-precedence"),v=a.get(b)||c,v===c&&a.set(null,y),a.set(b,y),this.count++,c=Rc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Ll={$$typeof:H,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Hb(i,r,a,c,y,v,b,R,q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=En(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=En(0),this.hiddenUpdates=En(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function N0(i,r,a,c,y,v,b,R,q,W,te,re){return i=new Hb(i,r,a,b,q,W,te,re,R),r=1,v===!0&&(r|=24),v=On(3,null,null,r),i.current=v,v.stateNode=i,r=tf(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:r},of(v),i}function M0(i){return i?(i=jo,i):jo}function k0(i,r,a,c,y,v){y=M0(y),c.context===null?c.context=y:c.pendingContext=y,c=Ws(r),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Xs(i,c,r),a!==null&&(In(a,i,r),gl(a,i,r))}function D0(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function bh(i,r){D0(i,r),(i=i.alternate)&&D0(i,r)}function P0(i){if(i.tag===13||i.tag===31){var r=Yr(i,67108864);r!==null&&In(r,i,67108864),bh(i,67108864)}}function U0(i){if(i.tag===13||i.tag===31){var r=Hn();r=Xi(r);var a=Yr(i,r);a!==null&&In(a,i,r),bh(i,r)}}var Nc=!0;function Gb(i,r,a,c){var y=J.T;J.T=null;var v=le.p;try{le.p=2,Ah(i,r,a,c)}finally{le.p=v,J.T=y}}function Fb(i,r,a,c){var y=J.T;J.T=null;var v=le.p;try{le.p=8,Ah(i,r,a,c)}finally{le.p=v,J.T=y}}function Ah(i,r,a,c){if(Nc){var y=Ch(c);if(y===null)dh(i,r,c,Mc,a),L0(i,c);else if($b(y,i,r,a,c))c.stopPropagation();else if(L0(i,c),r&4&&-1<zb.indexOf(i)){for(;y!==null;){var v=xt(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var b=Kn(v.pendingLanes);if(b!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;b;){var q=1<<31-Ct(b);R.entanglements[1]|=q,b&=~q}Fi(v),(lt&6)===0&&(hc=Xt()+500,Ml(0))}}break;case 31:case 13:R=Yr(v,2),R!==null&&In(R,v,2),gc(),bh(v,2)}if(v=Ch(c),v===null&&dh(i,r,c,Mc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else dh(i,r,c,null,a)}}function Ch(i){return i=Zn(i),Rh(i)}var Mc=null;function Rh(i){if(Mc=null,i=Qn(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Mc=i,null}function O0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jn()){case Nr:return 2;case Us:return 8;case ki:case Mr:return 32;case Do:return 268435456;default:return 32}default:return 32}}var xh=!1,lr=null,ur=null,cr=null,Bl=new Map,Vl=new Map,dr=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L0(i,r){switch(i){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Bl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(r.pointerId)}}function ql(i,r,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=xt(r),r!==null&&P0(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function $b(i,r,a,c,y){switch(r){case"focusin":return lr=ql(lr,i,r,a,c,y),!0;case"dragenter":return ur=ql(ur,i,r,a,c,y),!0;case"mouseover":return cr=ql(cr,i,r,a,c,y),!0;case"pointerover":var v=y.pointerId;return Bl.set(v,ql(Bl.get(v)||null,i,r,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Vl.set(v,ql(Vl.get(v)||null,i,r,a,c,y)),!0}return!1}function B0(i){var r=Qn(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,Dn(i.priority,function(){U0(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Dn(i.priority,function(){U0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Ch(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Za=c,a.target.dispatchEvent(c),Za=null}else return r=xt(a),r!==null&&P0(r),i.blockedOn=a,!1;r.shift()}return!0}function V0(i,r,a){kc(i)&&a.delete(r)}function jb(){xh=!1,lr!==null&&kc(lr)&&(lr=null),ur!==null&&kc(ur)&&(ur=null),cr!==null&&kc(cr)&&(cr=null),Bl.forEach(V0),Vl.forEach(V0)}function Dc(i,r){i.blockedOn===r&&(i.blockedOn=null,xh||(xh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jb)))}var Pc=null;function q0(i){Pc!==i&&(Pc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pc===i&&(Pc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(Rh(c||a)===null)continue;break}var v=xt(a);v!==null&&(i.splice(r,3),r-=3,Cf(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function ma(i){function r(q){return Dc(q,i)}lr!==null&&Dc(lr,i),ur!==null&&Dc(ur,i),cr!==null&&Dc(cr,i),Bl.forEach(r),Vl.forEach(r);for(var a=0;a<dr.length;a++){var c=dr[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<dr.length&&(a=dr[0],a.blockedOn===null);)B0(a),a.blockedOn===null&&dr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],b=y[ye]||null;if(typeof v=="function")b||q0(a);else if(b){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,b=v[ye]||null)R=b.formAction;else if(Rh(y)!==null)continue}else R=b.action;typeof R=="function"?a[c+1]=R:(a.splice(c,3),c-=3),q0(a)}}}function H0(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(b){return y=b})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Ih(i){this._internalRoot=i}Uc.prototype.render=Ih.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=Hn();k0(a,c,i,r,null,null)},Uc.prototype.unmount=Ih.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;k0(i.current,2,null,i,null,null),gc(),r[de]=null}};function Uc(i){this._internalRoot=i}Uc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Or();i={blockedOn:null,target:i,priority:r};for(var a=0;a<dr.length&&r!==0&&r<dr[a].priority;a++);dr.splice(a,0,i),a===0&&B0(i)}};var G0=e.version;if(G0!=="19.2.0")throw Error(s(527,G0,"19.2.0"));le.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var Jb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{wn=Oc.inject(Jb),qt=Oc}catch{}}return Gl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",y=Ym,v=Wm,b=Xm;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=N0(i,1,!1,null,null,a,c,null,y,v,b,H0),i[de]=r.current,ch(i),new Ih(r)},Gl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,y="",v=Ym,b=Wm,R=Xm,q=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(q=a.formState)),r=N0(i,1,!0,r,a??null,c,y,q,v,b,R,H0),r.context=M0(null),a=r.current,c=Hn(),c=Xi(c),y=Ws(c),y.callback=null,Xs(a,y,c),a=c,r.current.lanes=a,Wn(r,a),Fi(r),i[de]=r.current,ch(i),new Uc(r)},Gl.version="19.2.0",Gl}var Q0;function oA(){if(Q0)return kh.exports;Q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kh.exports=rA(),kh.exports}var aA=oA();const lA=qp(aA),uA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),Ar=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),Z0=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),cA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),dA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})}),fA=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.25,strokeLinecap:"round",strokeLinejoin:"round",...n,style:{transform:"rotate(90deg)"},children:[S.jsx("path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z"}),S.jsx("path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845"})]}),rp=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.25,strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),S.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),S.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),S.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),ev=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("path",{d:"M12 2 L12 22",strokeWidth:2.5}),S.jsx("path",{d:"M12 2 A10 10 0 0 1 12 22",fill:"currentColor",stroke:"none"})]}),hA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25A2.25 2.25 0 0 1 13.5 8.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),pA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),gA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})}),mA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-6-13.5v13.5"})}),yA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),vA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),_A=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.25,strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("path",{d:"M16 12v2a2 2 0 0 1-2 2H9a1 1 0 0 0-1 1v3a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2h0"}),S.jsx("path",{d:"M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 1-1 1h-5a2 2 0 0 0-2 2v2"})]}),wA=n=>S.jsxs("svg",{id:"Ebene_1","data-name":"Ebene 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488.57 84.18",...n,children:[S.jsx("defs",{children:S.jsx("style",{children:`
        .cls-1-logo {
          fill: #fff;
        }
        .cls-2-logo {
          fill: #e30613;
        }
        .cls-3-logo {
          font-family: Futura-Medium, Futura;
          font-size: 72px;
          font-weight: 500;
        }
      `})}),S.jsxs("text",{className:"cls-3-logo",transform:"translate(0 63.4)",children:[S.jsx("tspan",{className:"cls-1-logo",x:"0",y:"0",children:"jaa"}),S.jsx("tspan",{className:"cls-2-logo",x:"104.27",y:"0",children:"."}),S.jsx("tspan",{className:"cls-1-logo",x:"126.49",y:"0",children:"cool media"})]})]}),EA=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),TA=({onDrop:n})=>{const[e,t]=ue.useState(!1),s=ue.useCallback(u=>{u.preventDefault(),u.stopPropagation(),u.type==="dragenter"||u.type==="dragover"?t(!0):u.type==="dragleave"&&t(!1)},[]),o=ue.useCallback(u=>{u.preventDefault(),u.stopPropagation(),t(!1),u.dataTransfer.files&&u.dataTransfer.files.length>0&&n(Array.from(u.dataTransfer.files))},[n]),l=u=>{u.target.files&&u.target.files.length>0&&n(Array.from(u.target.files))};return ue.useEffect(()=>{const u=_=>{_.preventDefault(),_.stopPropagation(),t(!0)},d=_=>{_.preventDefault(),_.stopPropagation(),t(!0)},p=_=>{_.preventDefault(),_.stopPropagation(),t(!1)},f=_=>{var T;_.preventDefault(),_.stopPropagation(),t(!1);const w=(T=_.dataTransfer)==null?void 0:T.files;w&&w.length>0&&n(Array.from(w))};return window.addEventListener("dragover",u),window.addEventListener("dragenter",d),window.addEventListener("dragleave",p),window.addEventListener("drop",f),document.addEventListener("dragover",u),document.addEventListener("drop",f),()=>{window.removeEventListener("dragover",u),window.removeEventListener("dragenter",d),window.removeEventListener("dragleave",p),window.removeEventListener("drop",f),document.removeEventListener("dragover",u),document.removeEventListener("drop",f)}},[n]),S.jsxs("div",{onDragEnter:s,onDragLeave:s,onDragOver:s,onDrop:o,className:`flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-300 ease-in-out min-h-[70vh] w-full
        ${e?"border-cyan-400 bg-gray-800":"border-gray-600 hover:border-cyan-500 hover:bg-gray-800/50"}`,children:[S.jsx("input",{type:"file",multiple:!0,accept:"image/png, image/jpeg",onChange:l,className:"hidden",id:"file-upload"}),S.jsxs("label",{htmlFor:"file-upload",className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",children:[S.jsx(uA,{className:"w-16 h-16 text-gray-500 mb-4"}),S.jsx("h2",{className:"text-xl font-semibold text-gray-300",children:"Drag & Drop Your Images Here"}),S.jsx("p",{className:"text-gray-500",children:"or click to browse"}),S.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Supports: PNG, JPG"})]})]})},SA=({files:n,masterFileId:e,onSelectMaster:t,onToggleSimpleMatch:s,onToggleLuminanceInversion:o,onDelete:l})=>{const u=(f,_)=>{f.stopPropagation(),s(_)},d=(f,_)=>{f.stopPropagation(),o(_)},p=(f,_)=>{f.stopPropagation(),l(_)};return S.jsxs("div",{className:"w-full",children:[S.jsxs("div",{className:"mb-6 space-y-2",children:[S.jsxs("p",{className:"text-lg text-gray-300",children:[S.jsx("span",{className:"font-bold text-cyan-400",children:"1."})," Select a master"]}),S.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-2",children:[S.jsx("span",{className:"font-bold text-cyan-400",children:"2."}),"If the picture is taken frontal (without perspective shift) please click on the",S.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-black/50 rounded-full border border-gray-600",children:S.jsx(rp,{className:"w-4 h-4 text-gray-300"})})]}),S.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-2",children:[S.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-purple-500/90 rounded-full",children:S.jsx(ev,{className:"w-4 h-4 text-white"})}),"= Inverted luminance (auto-detected or manual toggle)"]})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:n.map(f=>{const _=f.id===e,w=f.needsSimpleMatch,T=f.isLuminanceInverted;return S.jsxs("div",{onClick:()=>t(f.id),className:`relative rounded-lg overflow-hidden cursor-pointer group transition-all duration-200 transform hover:scale-105 aspect-square
                ${_?"ring-4 ring-cyan-400 shadow-2xl shadow-cyan-500/30":"ring-2 ring-gray-700 hover:ring-cyan-500"}
                ${w&&!_?"ring-offset-2 ring-offset-gray-900 ring-2 ring-green-500":""}`,children:[S.jsx("img",{src:f.previewUrl,alt:f.file.name,className:"w-full h-full object-contain bg-gray-800"}),S.jsx("button",{onClick:C=>p(C,f.id),className:"absolute top-1 right-1 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all duration-200 z-20",title:"Delete Image",children:S.jsx(Ar,{className:"w-4 h-4"})}),S.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none z-0",children:S.jsx("p",{className:"text-white text-xs text-center p-1 truncate",children:f.file.name})}),!_&&S.jsx("button",{onClick:C=>d(C,f.id),className:`absolute top-1 left-1 p-1.5 rounded-full transition-colors duration-200 z-20
                    ${T?"bg-purple-500/90 text-white":"bg-black/50 text-gray-300 opacity-0 group-hover:opacity-100 hover:bg-purple-500/70 hover:text-white"}`,title:T?"Inverted (Click to disable)":"Normal (Click to invert)",children:S.jsx(ev,{className:"w-4 h-4"})}),_&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"absolute inset-0 bg-cyan-500 bg-opacity-30"}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-cyan-400 text-gray-900 text-center text-xs font-bold py-0.5",children:"MASTER"})]}),!_&&S.jsx("button",{onClick:C=>u(C,f.id),className:`absolute bottom-1 right-1 p-1.5 rounded-full transition-colors duration-200 z-20
                    ${w?"bg-green-500 text-white":"bg-black/50 text-gray-300 hover:bg-gray-700 hover:text-white"}`,title:w?"Simple Match Active (Click for Perspective)":"Perspective Active (Click for Simple Match)",children:S.jsx(rp,{className:"w-5 h-5"})})]},f.id)})})]})},Ra=()=>S.jsxs("svg",{className:"animate-spin h-12 w-12 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),bA=({files:n,originalFiles:e,masterFileId:t,isDebugMode:s,onSetDebugMode:o,onBackToSelection:l,aspectRatio:u,onDelete:d,onPerspectiveFix:p,onSimpleMatchFix:f,fixingImageId:_,onExport:w,isExporting:T,isProcessing:C,processingStatus:M,processingProgress:k,onRetryEdgeFill:L,retryingEdgeFillIds:G=new Set,edgeFillCreditCost:$=6,isEdgeFillEnabled:H=!1})=>{const[Q,ae]=ue.useState("single"),[ne,D]=ue.useState(0),[I,x]=ue.useState(!0);ue.useEffect(()=>{if(n.length>0){const B=n.findIndex(ce=>ce.id===t);D(Math.min(B!==-1?B:0,n.length-1))}},[n,t]),ue.useEffect(()=>{if(!I||n.length===0)return;const B=setInterval(()=>{D(Y=>(Y+1)%n.length)},1e3/8);return()=>clearInterval(B)},[I,n.length]);const P=ue.useCallback(()=>{x(!1),D(B=>(B+1)%n.length)},[n.length]),O=ue.useCallback(()=>{x(!1),D(B=>(B-1+n.length)%n.length)},[n.length]);ue.useEffect(()=>{const B=Y=>{Q==="single"&&!I&&n.length>1&&(Y.key==="ArrowRight"?P():Y.key==="ArrowLeft"&&O())};return window.addEventListener("keydown",B),()=>{window.removeEventListener("keydown",B)}},[Q,I,n.length,P,O]);const V=B=>{x(!1),ae(B)},U=()=>{I||ae("single"),x(B=>!B)},Ue=(B,Y)=>{B.stopPropagation(),d(Y)};if(n.length===0)return null;const Ie=n[ne];if(!Ie)return null;const J=e.find(B=>B&&B.id===Ie.id),le=Ie.id===t,se=J?J.previewUrl:Ie.id.startsWith("ai-var-")?Ie.debugUrl:null,pe=J?J.file.name:Ie.originalName,_e=B=>{switch(B){case"9:16":return{aspectRatio:"9 / 16"};case"1:1":return{aspectRatio:"1 / 1"};case"16:9":return{aspectRatio:"16 / 9"};default:return{aspectRatio:"9 / 16"}}};return S.jsxs("div",{className:"w-full max-w-7xl mx-auto flex flex-col items-center",children:[S.jsxs("div",{className:"w-full flex flex-col sm:flex-row justify-between items-center mb-4 gap-4 p-2 bg-gray-800/50 rounded-lg relative overflow-hidden",children:[C&&S.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-cyan-500 transition-all duration-300 ease-out z-10",style:{width:`${k||0}%`}}),S.jsxs("div",{className:"flex items-center gap-4 flex-wrap z-20",children:[S.jsxs("div",{className:"text-left",children:[S.jsx("h2",{className:"text-xl font-semibold flex items-center gap-2",children:C?S.jsxs(S.Fragment,{children:[S.jsx(Ra,{className:"w-5 h-5"}),S.jsx("span",{className:"text-cyan-300 animate-pulse",children:"Generating Variations..."})]}):"Processing Complete"}),S.jsx("p",{className:"text-sm text-gray-400",children:C?M||"Please wait...":"Review the final aligned results below."})]}),S.jsxs("button",{onClick:l,disabled:C,className:"px-3 py-2 text-sm font-semibold text-white bg-gray-600 rounded-md hover:bg-gray-500 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Go back to change master or other settings",children:[S.jsx(Z0,{className:"w-5 h-5"}),S.jsx("span",{children:"Change Selection"})]})]}),S.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[S.jsx("button",{onClick:w,disabled:T,className:"px-3 py-2 text-sm font-semibold text-white bg-cyan-600 rounded-md hover:bg-cyan-500 transition-colors flex items-center gap-2 disabled:bg-gray-500 disabled:cursor-wait",title:"Download all processed images as a ZIP file",children:T?S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("span",{children:"Exporting..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(vA,{className:"w-5 h-5"}),S.jsx("span",{children:"Download ZIP"})]})}),S.jsxs("div",{className:"flex items-center bg-gray-700 rounded-md p-1",children:[S.jsx("button",{onClick:()=>V("grid"),className:`p-1.5 rounded ${Q==="grid"?"bg-cyan-500 text-white":"text-gray-400 hover:bg-gray-600"}`,"aria-label":"Grid View",children:S.jsx(hA,{className:"w-5 h-5"})}),S.jsx("button",{onClick:()=>V("single"),className:`p-1.5 rounded ${Q==="single"&&!I?"bg-cyan-500 text-white":"text-gray-400 hover:bg-gray-600"}`,"aria-label":"Single View",children:S.jsx(pA,{className:"w-5 h-5"})}),S.jsx("button",{onClick:U,className:`p-1.5 rounded ${I?"bg-cyan-500 text-white":"text-gray-400 hover:bg-gray-600"}`,"aria-label":I?"Pause":"Play",children:I?S.jsx(mA,{className:"w-5 h-5"}):S.jsx(gA,{className:"w-5 h-5"})})]})]})]}),Q==="single"&&Ie&&S.jsxs("div",{className:"w-full flex flex-col items-center mb-4",children:[S.jsxs("div",{className:"relative w-full max-w-2xl group",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"flex flex-col items-center",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Original"}),S.jsx("div",{className:"w-full bg-gray-900 rounded-lg overflow-hidden",style:_e(u),children:se?S.jsx("img",{src:se,alt:`Original - ${pe}`,className:"w-full h-full object-contain"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 p-4 text-center",children:S.jsx("span",{children:"Original preview not available."})})})]}),S.jsxs("div",{className:"flex flex-col items-center",children:[S.jsx("div",{className:"flex items-center gap-2 mb-2",children:S.jsx("h3",{className:"text-lg font-semibold text-cyan-400",children:"Processed"})}),S.jsxs("div",{className:"relative w-full bg-gray-900 rounded-lg overflow-hidden",style:_e(u),children:[_===Ie.id&&S.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-10",children:S.jsx(Ra,{})}),S.jsx("img",{src:(s?Ie.debugUrl:Ie.processedUrl)||Ie.processedUrl,alt:Ie.originalName,className:"w-full h-full object-contain"})]})]})]}),!I&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:O,className:"absolute -left-12 top-1/2 -translate-y-1/2 bg-black/40 text-white p-2 rounded-full opacity-20 group-hover:opacity-100 transition-opacity focus:opacity-100 disabled:opacity-20","aria-label":"Previous image",children:S.jsx(Z0,{className:"w-6 h-6"})}),S.jsx("button",{onClick:P,className:"absolute -right-12 top-1/2 -translate-y-1/2 bg-black/40 text-white p-2 rounded-full opacity-20 group-hover:opacity-100 transition-opacity focus:opacity-100 disabled:opacity-20","aria-label":"Next image",children:S.jsx(cA,{className:"w-6 h-6"})})]})]}),S.jsxs("div",{className:"text-center mt-3 p-2 rounded-md bg-gray-800 w-full max-w-2xl",children:[S.jsxs("p",{className:"text-sm text-gray-300 truncate font-mono",title:Ie.originalName,children:[`[${ne+1}/${n.length}] `,Ie.originalName]}),le&&S.jsx("p",{className:"text-xs font-bold text-cyan-400 mt-1",children:"MASTER IMAGE"})]})]}),Q==="grid"&&S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 w-full",children:n.map(B=>{if(!B)return null;const Y=B.id===t,ce=(s?B.debugUrl:B.processedUrl)||B.processedUrl;return S.jsxs("div",{style:_e(u),className:`relative rounded-lg overflow-hidden group transition-all duration-200 transform hover:scale-105
                    ${Y?"ring-4 ring-cyan-400 shadow-2xl shadow-cyan-500/30":"ring-2 ring-gray-700"}
                `,children:[_===B.id&&S.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-20",children:S.jsx(Ra,{})}),S.jsx("button",{onClick:oe=>Ue(oe,B.id),className:"absolute top-1 right-1 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all duration-200 z-10",title:"Delete Image",children:S.jsx(Ar,{className:"w-4 h-4"})}),!Y&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>p(B.id),disabled:!!_,className:"absolute bottom-1 left-1 p-1.5 rounded-full bg-black/50 text-gray-300 opacity-0 group-hover:opacity-100 hover:bg-blue-600 hover:text-white transition-all duration-200 z-10 disabled:opacity-50 disabled:cursor-not-allowed",title:H?`Re-run with Perspective Fix (${$} credits)`:"Re-run with Perspective Fix",children:S.jsx(fA,{className:"w-5 h-5"})}),S.jsx("button",{onClick:()=>f(B.id),disabled:!!_,className:"absolute bottom-1 left-12 p-1.5 rounded-full bg-black/50 text-gray-300 opacity-0 group-hover:opacity-100 hover:bg-green-600 hover:text-white transition-all duration-200 z-10 disabled:opacity-50 disabled:cursor-not-allowed",title:H?`Re-run with Simple Match (${$} credits)`:"Re-run with Simple Match (Rotation/Scale Only)",children:S.jsx(rp,{className:"w-5 h-5"})})]}),L&&S.jsx("button",{onClick:()=>L(B.id),disabled:!!_||G.has(B.id),className:`absolute bottom-1 right-1 p-1.5 rounded-full bg-black/50 text-gray-300 opacity-0 group-hover:opacity-100 hover:bg-purple-600 hover:text-white transition-all duration-200 z-10 disabled:opacity-50 disabled:cursor-not-allowed ${G.has(B.id)?"opacity-100 bg-purple-600 animate-pulse":""}`,title:`Retry AI Edge Fill (${$} credits)`,children:G.has(B.id)?S.jsx(Ra,{className:"w-5 h-5"}):S.jsx(EA,{className:"w-5 h-5"})}),S.jsx("img",{src:ce,alt:B.originalName,className:"w-full h-full object-contain bg-gray-800"}),Y&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"absolute inset-0 bg-cyan-500/30"}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-cyan-400 text-gray-900 text-center text-xs font-bold py-0.5",children:"MASTER"})]}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:S.jsx("p",{className:"text-white text-xs text-center truncate",children:B.originalName})})]},B.id)})})]})},AA=()=>{};var tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},CA=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Xw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,f=p?n[o+2]:0,_=l>>2,w=(l&3)<<4|d>>4;let T=(d&15)<<2|f>>6,C=f&63;p||(C=64,u||(T=64)),s.push(t[_],t[w],t[T],t[C])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ww(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const f=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||f==null||w==null)throw new RA;const T=l<<2|d>>4;if(s.push(T),f!==64){const C=d<<4&240|f>>2;if(s.push(C),w!==64){const M=f<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xA=function(n){const e=Ww(n);return Xw.encodeByteArray(e,!0)},ld=function(n){return xA(n).replace(/\./g,"")},Qw=function(n){try{return Xw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=()=>IA().__FIREBASE_DEFAULTS__,MA=()=>{if(typeof process>"u"||typeof tv>"u")return;const n=tv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Qw(n[1]);return e&&JSON.parse(e)},Gp=()=>{try{return AA()||NA()||MA()||kA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Zw=n=>{var e,t;return(t=(e=Gp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},DA=n=>{const e=Zw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},eE=()=>{var n;return(n=Gp())==null?void 0:n.config},tE=n=>{var e;return(e=Gp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PA=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ld(JSON.stringify(t)),ld(JSON.stringify(u)),""].join(".")}const Yl={};function OA(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?n.emulator.push(e):n.prod.push(e);return n}function LA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nv=!1;function iE(n,e){if(typeof window>"u"||typeof document>"u"||!du(window.location.host)||Yl[n]===e||Yl[n]||nv)return;Yl[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=OA().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{nv=!0,u()},T}function _(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=LA(s),C=t("text"),M=document.getElementById(C)||document.createElement("span"),k=t("learnmore"),L=document.getElementById(k)||document.createElement("a"),G=t("preprendIcon"),$=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const H=T.element;d(H),_(L,k);const Q=f();p($,G),H.append($,M,L,Q),document.body.appendChild(H)}l?(M.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function VA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){const n=vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FA(){try{return typeof indexedDB=="object"}catch{return!1}}function zA(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="FirebaseError";class xs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=$A,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?jA(l,s):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new xs(o,d,s)}}function jA(n,e){return n.replace(JA,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const JA=/\{\$([^}]+)}/g;function KA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],u=e[o];if(iv(l)&&iv(u)){if(!So(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function iv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function jl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Jl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function YA(n,e){const t=new WA(n,e);return t.subscribe.bind(t)}class WA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");XA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Oh),o.error===void 0&&(o.error=Oh),o.complete===void 0&&(o.complete=Oh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(n){return n&&n._delegate?n._delegate:n}class bo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new PA;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eC(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ZA(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZA(n){return n===co?void 0:n}function eC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new QA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const nC={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},iC=ut.INFO,sC={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},rC=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=sC[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fp{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=rC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const oC=(n,e)=>e.some(t=>n instanceof t);let sv,rv;function aC(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lC(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sE=new WeakMap,op=new WeakMap,rE=new WeakMap,Lh=new WeakMap,zp=new WeakMap;function uC(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Er(n.result)),o()},u=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&sE.set(t,n)}).catch(()=>{}),zp.set(e,n),e}function cC(n){if(op.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});op.set(n,e)}let ap={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Er(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function dC(n){ap=n(ap)}function fC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Bh(this),e,...t);return rE.set(s,e.sort?e.sort():[e]),Er(s)}:lC().includes(n)?function(...e){return n.apply(Bh(this),e),Er(sE.get(this))}:function(...e){return Er(n.apply(Bh(this),e))}}function hC(n){return typeof n=="function"?fC(n):(n instanceof IDBTransaction&&cC(n),oC(n,aC())?new Proxy(n,ap):n)}function Er(n){if(n instanceof IDBRequest)return uC(n);if(Lh.has(n))return Lh.get(n);const e=hC(n);return e!==n&&(Lh.set(n,e),zp.set(e,n)),e}const Bh=n=>zp.get(n);function pC(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=Er(u);return s&&u.addEventListener("upgradeneeded",p=>{s(Er(u.result),p.oldVersion,p.newVersion,Er(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const gC=["get","getKey","getAll","getAllKeys","count"],mC=["put","add","delete","clear"],Vh=new Map;function ov(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=mC.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||gC.includes(t)))return;const l=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let f=p.store;return s&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),o&&p.done]))[0]};return Vh.set(e,l),l}dC(n=>({...n,get:(e,t,s)=>ov(e,t)||n.get(e,t,s),has:(e,t)=>!!ov(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vC(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function vC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lp="@firebase/app",av="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Fp("@firebase/app"),_C="@firebase/app-compat",wC="@firebase/analytics-compat",EC="@firebase/analytics",TC="@firebase/app-check-compat",SC="@firebase/app-check",bC="@firebase/auth",AC="@firebase/auth-compat",CC="@firebase/database",RC="@firebase/data-connect",xC="@firebase/database-compat",IC="@firebase/functions",NC="@firebase/functions-compat",MC="@firebase/installations",kC="@firebase/installations-compat",DC="@firebase/messaging",PC="@firebase/messaging-compat",UC="@firebase/performance",OC="@firebase/performance-compat",LC="@firebase/remote-config",BC="@firebase/remote-config-compat",VC="@firebase/storage",qC="@firebase/storage-compat",HC="@firebase/firestore",GC="@firebase/ai",FC="@firebase/firestore-compat",zC="firebase",$C="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="[DEFAULT]",jC={[lp]:"fire-core",[_C]:"fire-core-compat",[EC]:"fire-analytics",[wC]:"fire-analytics-compat",[SC]:"fire-app-check",[TC]:"fire-app-check-compat",[bC]:"fire-auth",[AC]:"fire-auth-compat",[CC]:"fire-rtdb",[RC]:"fire-data-connect",[xC]:"fire-rtdb-compat",[IC]:"fire-fn",[NC]:"fire-fn-compat",[MC]:"fire-iid",[kC]:"fire-iid-compat",[DC]:"fire-fcm",[PC]:"fire-fcm-compat",[UC]:"fire-perf",[OC]:"fire-perf-compat",[LC]:"fire-rc",[BC]:"fire-rc-compat",[VC]:"fire-gcs",[qC]:"fire-gcs-compat",[HC]:"fire-fst",[FC]:"fire-fst-compat",[GC]:"fire-vertex","fire-js":"fire-js",[zC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new Map,JC=new Map,cp=new Map;function lv(n,e){try{n.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function La(n){const e=n.name;if(cp.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;cp.set(e,n);for(const t of ud.values())lv(t,n);for(const t of JC.values())lv(t,n);return!0}function $p(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Fn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new fu("app","Firebase",KC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new bo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=$C;function oE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:up,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Tr.create("bad-app-name",{appName:String(o)});if(t||(t=eE()),!t)throw Tr.create("no-options");const l=ud.get(o);if(l){if(So(t,l.options)&&So(s,l.config))return l;throw Tr.create("duplicate-app",{appName:o})}const u=new tC(o);for(const p of cp.values())u.addComponent(p);const d=new YC(t,s,u);return ud.set(o,d),d}function aE(n=up){const e=ud.get(n);if(!e&&n===up&&eE())return oE();if(!e)throw Tr.create("no-app",{appName:n});return e}function Sr(n,e,t){let s=jC[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(u.join(" "));return}La(new bo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="firebase-heartbeat-database",XC=1,iu="firebase-heartbeat-store";let qh=null;function lE(){return qh||(qh=pC(WC,XC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Tr.create("idb-open",{originalErrorMessage:n.message})})),qh}async function QC(n){try{const t=(await lE()).transaction(iu),s=await t.objectStore(iu).get(uE(n));return await t.done,s}catch(e){if(e instanceof xs)Cs.warn(e.message);else{const t=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function uv(n,e){try{const s=(await lE()).transaction(iu,"readwrite");await s.objectStore(iu).put(e,uE(n)),await s.done}catch(t){if(t instanceof xs)Cs.warn(t.message);else{const s=Tr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(s.message)}}}function uE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1024,eR=30;class tR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=dv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>eR){const u=sR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Cs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=dv(),{heartbeatsToSend:s,unsentEntries:o}=nR(this._heartbeatsCache.heartbeats),l=ld(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Cs.warn(t),""}}}function dv(){return new Date().toISOString().substring(0,10)}function nR(n,e=ZC){const t=[];let s=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),fv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),fv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class iR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FA()?zA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return uv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return uv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fv(n){return ld(JSON.stringify({version:2,heartbeats:n})).length}function sR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n){La(new bo("platform-logger",e=>new yC(e),"PRIVATE")),La(new bo("heartbeat",e=>new tR(e),"PRIVATE")),Sr(lp,av,n),Sr(lp,av,"esm2020"),Sr("fire-js","")}rR("");function cE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oR=cE,dE=new fu("auth","Firebase",cE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Fp("@firebase/auth");function aR(n,...e){cd.logLevel<=ut.WARN&&cd.warn(`Auth (${Ha}): ${n}`,...e)}function td(n,...e){cd.logLevel<=ut.ERROR&&cd.error(`Auth (${Ha}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,...e){throw Jp(n,...e)}function Ii(n,...e){return Jp(n,...e)}function jp(n,e,t){const s={...oR(),[e]:t};return new fu("auth","Firebase",s).create(e,{appName:n.name})}function As(n){return jp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lR(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ci(n,"argument-error"),jp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return dE.create(n,...e)}function Pe(n,e,...t){if(!n)throw Jp(e,...t)}function Ss(n){const e="INTERNAL ASSERTION FAILED: "+n;throw td(e),new Error(e)}function Rs(n,e){n||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function uR(){return hv()==="http:"||hv()==="https:"}function hv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uR()||qA()||"connection"in navigator)?navigator.onLine:!0}function dR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rs(t>e,"Short delay should be less than long delay!"),this.isMobile=BA()||HA()}get(){return cR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pR=new pu(3e4,6e4);function Ns(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ms(n,e,t,s,o={}){return hE(n,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=hu({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:p,...l};return VA()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&du(n.emulatorConfig.host)&&(f.credentials="include"),fE.fetch()(await pE(n,n.config.apiHost,t,d),f)})}async function hE(n,e,t){n._canInitEmulator=!1;const s={...fR,...e};try{const o=new mR(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Lc(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[p,f]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Lc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Lc(n,"user-disabled",u);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw jp(n,_,f);ci(n,_)}}catch(o){if(o instanceof xs)throw o;ci(n,"network-request-failed",{message:String(o)})}}async function gu(n,e,t,s,o={}){const l=await Ms(n,e,t,s,o);return"mfaPendingCredential"in l&&ci(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function pE(n,e,t,s){const o=`${e}${t}?${s}`,l=n,u=l.config.emulator?Kp(n.config,o):`${n.config.apiScheme}://${o}`;return hR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function gR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ii(this.auth,"network-request-failed")),pR.get())})}}function Lc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ii(n,e,s);return o.customData._tokenResponse=t,o}function pv(n){return n!==void 0&&n.enterprise!==void 0}class yR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vR(n,e){return Ms(n,"GET","/v2/recaptchaConfig",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(n,e){return Ms(n,"POST","/v1/accounts:delete",e)}async function dd(n,e){return Ms(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wR(n,e=!1){const t=Is(n),s=await t.getIdToken(e),o=Yp(s);Pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Wl(Hh(o.auth_time)),issuedAtTime:Wl(Hh(o.iat)),expirationTime:Wl(Hh(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Hh(n){return Number(n)*1e3}function Yp(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return td("JWT malformed, contained fewer than 3 sections"),null;try{const o=Qw(t);return o?JSON.parse(o):(td("Failed to decode base64 JWT payload"),null)}catch(o){return td("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function gv(n){const e=Yp(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof xs&&ER(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function ER({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(n){var w;const e=n.auth,t=await n.getIdToken(),s=await su(n,dd(e,{idToken:t}));Pe(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(w=o.providerUserInfo)!=null&&w.length?gE(o.providerUserInfo):[],u=bR(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),f=d?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new fp(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,_)}async function SR(n){const e=Is(n);await fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bR(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function gE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(n,e){const t=await hE(n,{},async()=>{const s=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await pE(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&du(n.emulatorConfig.host)&&(p.credentials="include"),fE.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function CR(n,e){return Ms(n,"POST","/v2/accounts:revokeToken",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=gv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await AR(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,u=new Ia;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Pe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Pe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ri{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new TR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new fp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await su(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wR(this,e)}reload(){return SR(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await fd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await su(this,_R(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,f=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:C,providerData:M,stsTokenManager:k}=t;Pe(w&&k,e,"internal-error");const L=Ia.fromJSON(this.name,k);Pe(typeof w=="string",e,"internal-error"),hr(s,e.name),hr(o,e.name),Pe(typeof T=="boolean",e,"internal-error"),Pe(typeof C=="boolean",e,"internal-error"),hr(l,e.name),hr(u,e.name),hr(d,e.name),hr(p,e.name),hr(f,e.name),hr(_,e.name);const G=new Ri({uid:w,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:C,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:L,createdAt:f,lastLoginAt:_});return M&&Array.isArray(M)&&(G.providerData=M.map($=>({...$}))),p&&(G._redirectEventId=p),G}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ia;o.updateFromServerResponse(t);const l=new Ri({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await fd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Pe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?gE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Ia;d.updateFromIdToken(s);const p=new Ri({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new fp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,f),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;function bs(n){Rs(n instanceof Function,"Expected a class definition");let e=mv.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mE.type="NONE";const yv=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(n,e,t){return`firebase:${n}:${e}:${t}`}class Na{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=nd(this.userKey,o.apiKey,l),this.fullPersistenceKey=nd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dd(this.auth,{idToken:e}).catch(()=>{});return t?Ri._fromGetAccountInfoResponse(this.auth,t,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Na(bs(yv),e,s);const o=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=o[0]||bs(yv);const u=nd(s,e.config.apiKey,e.name);let d=null;for(const f of t)try{const _=await f._get(u);if(_){let w;if(typeof _=="string"){const T=await dd(e,{idToken:_}).catch(()=>{});if(!T)break;w=await Ri._fromGetAccountInfoResponse(e,T,_)}else w=Ri._fromJSON(e,_);f!==l&&(d=w),l=f;break}}catch{}const p=o.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Na(l,e,s):(l=p[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(u)}catch{}})),new Na(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TE(e))return"Blackberry";if(SE(e))return"Webos";if(vE(e))return"Safari";if((e.includes("chrome/")||_E(e))&&!e.includes("edge/"))return"Chrome";if(EE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function yE(n=vn()){return/firefox\//i.test(n)}function vE(n=vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _E(n=vn()){return/crios\//i.test(n)}function wE(n=vn()){return/iemobile/i.test(n)}function EE(n=vn()){return/android/i.test(n)}function TE(n=vn()){return/blackberry/i.test(n)}function SE(n=vn()){return/webos/i.test(n)}function Wp(n=vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RR(n=vn()){var e;return Wp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function xR(){return GA()&&document.documentMode===10}function bE(n=vn()){return Wp(n)||EE(n)||SE(n)||TE(n)||/windows phone/i.test(n)||wE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(n,e=[]){let t;switch(n){case"Browser":t=vv(vn());break;case"Worker":t=`${vv(vn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ha}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const p=e(l);u(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(n,e={}){return Ms(n,"GET","/v2/passwordPolicy",Ns(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=6;class kR{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??MR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new IR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bs(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Na.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dd(this,{idToken:e}),s=await Ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Fn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(As(this));const t=e?Is(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NR(this),t=new kR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await CR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bs(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Na.create(this,[bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&aR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ks(n){return Is(n)}class _v{constructor(e){this.auth=e,this.observer=null,this.addObserver=YA(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PR(n){Cd=n}function CE(n){return Cd.loadJS(n)}function UR(){return Cd.recaptchaEnterpriseScript}function OR(){return Cd.gapiScript}function LR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class BR{constructor(){this.enterprise=new VR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class VR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qR="recaptcha-enterprise",RE="NO_RECAPTCHA";class HR{constructor(e){this.type=qR,this.auth=ks(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{vR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new yR(p);return l.tenantId==null?l._agentRecaptchaConfig=f:l._tenantRecaptchaConfigs[l.tenantId]=f,u(f.siteKey)}}).catch(p=>{d(p)})})}function o(l,u,d){const p=window.grecaptcha;pv(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(f=>{u(f)}).catch(()=>{u(RE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BR().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(d=>{if(!t&&pv(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=UR();p.length!==0&&(p+=d),CE(p).then(()=>{o(d,l,u)}).catch(f=>{u(f)})}}).catch(d=>{u(d)})})}}async function wv(n,e,t,s=!1,o=!1){const l=new HR(n);let u;if(o)u=RE;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function hd(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await wv(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await wv(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n,e){const t=$p(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(So(l,e??{}))return o;ci(o,"already-initialized")}return t.initialize({options:e})}function FR(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(bs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function zR(n,e,t){const s=ks(n);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=xE(e),{host:u,port:d}=$R(e),p=d===null?"":`:${d}`,f={url:`${l}//${u}${p}/`},_=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(So(f,s.config.emulator)&&So(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,du(u)?(nE(`${l}//${u}${p}`),iE("Auth",!0)):jR()}function xE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $R(n){const e=xE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Ev(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:Ev(u)}}}function Ev(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,t){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function JR(n,e){return Ms(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(n,e){return gu(n,"POST","/v1/accounts:signInWithPassword",Ns(n,e))}async function YR(n,e){return Ms(n,"POST","/v1/accounts:sendOobCode",Ns(n,e))}async function WR(n,e){return YR(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}async function QR(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Xp{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ru(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ru(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hd(e,t,"signInWithPassword",KR);case"emailLink":return XR(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hd(e,s,"signUpPassword",JR);case"emailLink":return QR(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(n,e){return gu(n,"POST","/v1/accounts:signInWithIdp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="http://localhost";class Ao extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const u=new Ao(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ma(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ma(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ma(e,t)}buildRequest(){const e={requestUri:ZR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function t1(n){const e=jl(Jl(n)).link,t=e?jl(Jl(e)).deep_link_id:null,s=jl(Jl(n)).deep_link_id;return(s?jl(Jl(s)).link:null)||s||t||e||n}class Qp{constructor(e){const t=jl(Jl(e)),s=t.apiKey??null,o=t.oobCode??null,l=e1(t.mode??null);Pe(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=t1(e);try{return new Qp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,t){return ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Qp.parseLink(t);return Pe(s,"argument-error"),ru._fromEmailAndCode(e,s.code,s.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends Zp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends mu{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ao._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Es.credential(t,s)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends mu{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends mu{constructor(){super("twitter.com")}static credential(e,t){return Ao._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return vr.credential(t,s)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(n,e){return gu(n,"POST","/v1/accounts:signUp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Ri._fromIdTokenResponse(e,s,o),u=Tv(s);return new Co({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Tv(s);return new Co({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Tv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends xs{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,pd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new pd(e,t,s,o)}}function IE(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?pd._fromErrorAndOperation(n,l,e,s):l})}async function i1(n,e,t=!1){const s=await su(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Co._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(n,e,t=!1){const{auth:s}=n;if(Fn(s.app))return Promise.reject(As(s));const o="reauthenticate";try{const l=await su(n,IE(s,o,e,n),t);Pe(l.idToken,s,"internal-error");const u=Yp(l.idToken);Pe(u,s,"internal-error");const{sub:d}=u;return Pe(n.uid===d,s,"user-mismatch"),Co._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ci(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(n,e,t=!1){if(Fn(n.app))return Promise.reject(As(n));const s="signIn",o=await IE(n,s,e),l=await Co._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function r1(n,e){return NE(ks(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(n){const e=ks(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function o1(n,e,t){const s=ks(n);await hd(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",WR)}async function a1(n,e,t){if(Fn(n.app))return Promise.reject(As(n));const s=ks(n),u=await hd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",n1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&ME(n),p}),d=await Co._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(d.user),d}function l1(n,e,t){return Fn(n.app)?Promise.reject(As(n)):r1(Is(n),Ga.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ME(n),s})}function u1(n,e,t,s){return Is(n).onIdTokenChanged(e,t,s)}function c1(n,e,t){return Is(n).beforeAuthStateChanged(e,t)}function d1(n,e,t,s){return Is(n).onAuthStateChanged(e,t,s)}function f1(n){return Is(n).signOut()}const gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=1e3,p1=10;class DE extends kE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);xR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,p1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},h1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}DE.type="LOCAL";const g1=DE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends kE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}PE.type="SESSION";const UE=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Rd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(u).map(async f=>f(t.origin,l)),p=await m1(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,p)=>{const f=eg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return window}function v1(n){Ji().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function _1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function E1(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebaseLocalStorageDb",T1=1,md="firebaseLocalStorage",BE="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xd(n,e){return n.transaction([md],e?"readwrite":"readonly").objectStore(md)}function S1(){const n=indexedDB.deleteDatabase(LE);return new yu(n).toPromise()}function hp(){const n=indexedDB.open(LE,T1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(md,{keyPath:BE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(md)?e(s):(s.close(),await S1(),e(await hp()))})})}async function Sv(n,e,t){const s=xd(n,!0).put({[BE]:e,value:t});return new yu(s).toPromise()}async function b1(n,e){const t=xd(n,!1).get(e),s=await new yu(t).toPromise();return s===void 0?null:s.value}function bv(n,e){const t=xd(n,!0).delete(e);return new yu(t).toPromise()}const A1=800,C1=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>C1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rd._getInstance(E1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await _1(),!this.activeServiceWorker)return;this.sender=new y1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hp();return await Sv(e,gd,"1"),await bv(e,gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Sv(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>b1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=xd(o,!1).getAll();return new yu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const R1=VE;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n,e){return e?bs(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ma(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function x1(n){return NE(n.auth,new tg(n),n.bypassAuthState)}function I1(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),s1(t,new tg(n),n.bypassAuthState)}async function N1(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),i1(t,new tg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x1;case"linkViaPopup":case"linkViaRedirect":return N1;case"reauthViaPopup":case"reauthViaRedirect":return I1;default:ci(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new pu(2e3,1e4);async function k1(n,e,t){if(Fn(n.app))return Promise.reject(Ii(n,"operation-not-supported-in-this-environment"));const s=ks(n);lR(n,e,Zp);const o=qE(s,t);return new vo(s,"signInViaPopup",e,o).executeNotNull()}class vo extends HE{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M1.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="pendingRedirect",id=new Map;class P1 extends HE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const s=await U1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U1(n,e){const t=B1(e),s=L1(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function O1(n,e){id.set(n._key(),e)}function L1(n){return bs(n._redirectPersistence)}function B1(n){return nd(D1,n.config.apiKey,n.name)}async function V1(n,e,t=!1){if(Fn(n.app))return Promise.reject(As(n));const s=ks(n),o=qE(s,e),u=await new P1(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=600*1e3;class H1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!GE(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ii(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Av(e))}saveEventToCache(e){this.cachedEventUids.add(Av(e)),this.lastProcessedEventTime=Date.now()}}function Av(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function G1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(n,e={}){return Ms(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$1=/^https?/;async function j1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await F1(n);for(const t of e)try{if(J1(t))return}catch{}ci(n,"unauthorized-domain")}function J1(n){const e=dp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!$1.test(t))return!1;if(z1.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new pu(3e4,6e4);function Cv(){const n=Ji().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Y1(n){return new Promise((e,t)=>{var o,l,u;function s(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),t(Ii(n,"network-request-failed"))},timeout:K1.get()})}if((l=(o=Ji().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Ji().gapi)!=null&&u.load)s();else{const d=LR("iframefcb");return Ji()[d]=()=>{gapi.load?s():t(Ii(n,"network-request-failed"))},CE(`${OR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw sd=null,e})}let sd=null;function W1(n){return sd=sd||Y1(n),sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new pu(5e3,15e3),Q1="__/auth/iframe",Z1="emulator/auth/iframe",ex={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nx(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Kp(e,Z1):`https://${n.config.authDomain}/${Q1}`,s={apiKey:e.apiKey,appName:n.name,v:Ha},o=tx.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${hu(s).slice(1)}`}async function ix(n){const e=await W1(n),t=Ji().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:nx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ex,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=Ii(n,"network-request-failed"),d=Ji().setTimeout(()=>{l(u)},X1.get());function p(){Ji().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rx=500,ox=600,ax="_blank",lx="http://localhost";class Rv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ux(n,e,t,s=rx,o=ox){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...sx,width:s.toString(),height:o.toString(),top:l,left:u},f=vn().toLowerCase();t&&(d=_E(f)?ax:t),yE(f)&&(e=e||lx,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[C,M])=>`${T}${C}=${M},`,"");if(RR(f)&&d!=="_self")return cx(e||"",d),new Rv(null);const w=window.open(e||"",d,_);Pe(w,n,"popup-blocked");try{w.focus()}catch{}return new Rv(w)}function cx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="__/auth/handler",fx="emulator/auth/handler",hx=encodeURIComponent("fac");async function xv(n,e,t,s,o,l){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Ha,eventId:o};if(e instanceof Zp){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",KA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))u[_]=w}if(e instanceof mu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),f=p?`#${hx}=${encodeURIComponent(p)}`:"";return`${px(n)}?${hu(d).slice(1)}${f}`}function px({config:n}){return n.emulator?Kp(n,fx):`https://${n.authDomain}/${dx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="webStorageSupport";class gx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UE,this._completeRedirectFn=V1,this._overrideRedirectResult=O1}async _openPopup(e,t,s,o){var u;Rs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await xv(e,t,s,dp(),o);return ux(e,l,eg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await xv(e,t,s,dp(),o);return v1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Rs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ix(e),s=new H1(e);return t.register("authEvent",o=>(Pe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gh,{type:Gh},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[Gh];l!==void 0&&t(!!l),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bE()||vE()||Wp()}}const mx=gx;var Iv="@firebase/auth",Nv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _x(n){La(new bo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AE(n)},f=new DR(s,o,l,p);return FR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),La(new bo("auth-internal",e=>{const t=ks(e.getProvider("auth").getImmediate());return(s=>new yx(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(Iv,Nv,vx(n)),Sr(Iv,Nv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=300,Ex=tE("authIdTokenMaxAge")||wx;let Mv=null;const Tx=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Ex)return;const o=t==null?void 0:t.token;Mv!==o&&(Mv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Sx(n=aE()){const e=$p(n,"auth");if(e.isInitialized())return e.getImmediate();const t=GR(n,{popupRedirectResolver:mx,persistence:[R1,g1,UE]}),s=tE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=Tx(l.toString());c1(t,u,()=>u(t.currentUser)),u1(t,d=>u(d))}}const o=Zw("auth");return o&&zR(t,`http://${o}`),t}function bx(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}PR({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Ii("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",bx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_x("Browser");var Ax="firebase",Cx="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(Ax,Cx,"app");var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ng;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,I){function x(){}x.prototype=I.prototype,D.F=I.prototype,D.prototype=new x,D.prototype.constructor=D,D.D=function(P,O,V){for(var U=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)U[Ue-2]=arguments[Ue];return I.prototype[O].apply(P,U)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,I,x){x||(x=0);const P=Array(16);if(typeof I=="string")for(var O=0;O<16;++O)P[O]=I.charCodeAt(x++)|I.charCodeAt(x++)<<8|I.charCodeAt(x++)<<16|I.charCodeAt(x++)<<24;else for(O=0;O<16;++O)P[O]=I[x++]|I[x++]<<8|I[x++]<<16|I[x++]<<24;I=D.g[0],x=D.g[1],O=D.g[2];let V=D.g[3],U;U=I+(V^x&(O^V))+P[0]+3614090360&4294967295,I=x+(U<<7&4294967295|U>>>25),U=V+(O^I&(x^O))+P[1]+3905402710&4294967295,V=I+(U<<12&4294967295|U>>>20),U=O+(x^V&(I^x))+P[2]+606105819&4294967295,O=V+(U<<17&4294967295|U>>>15),U=x+(I^O&(V^I))+P[3]+3250441966&4294967295,x=O+(U<<22&4294967295|U>>>10),U=I+(V^x&(O^V))+P[4]+4118548399&4294967295,I=x+(U<<7&4294967295|U>>>25),U=V+(O^I&(x^O))+P[5]+1200080426&4294967295,V=I+(U<<12&4294967295|U>>>20),U=O+(x^V&(I^x))+P[6]+2821735955&4294967295,O=V+(U<<17&4294967295|U>>>15),U=x+(I^O&(V^I))+P[7]+4249261313&4294967295,x=O+(U<<22&4294967295|U>>>10),U=I+(V^x&(O^V))+P[8]+1770035416&4294967295,I=x+(U<<7&4294967295|U>>>25),U=V+(O^I&(x^O))+P[9]+2336552879&4294967295,V=I+(U<<12&4294967295|U>>>20),U=O+(x^V&(I^x))+P[10]+4294925233&4294967295,O=V+(U<<17&4294967295|U>>>15),U=x+(I^O&(V^I))+P[11]+2304563134&4294967295,x=O+(U<<22&4294967295|U>>>10),U=I+(V^x&(O^V))+P[12]+1804603682&4294967295,I=x+(U<<7&4294967295|U>>>25),U=V+(O^I&(x^O))+P[13]+4254626195&4294967295,V=I+(U<<12&4294967295|U>>>20),U=O+(x^V&(I^x))+P[14]+2792965006&4294967295,O=V+(U<<17&4294967295|U>>>15),U=x+(I^O&(V^I))+P[15]+1236535329&4294967295,x=O+(U<<22&4294967295|U>>>10),U=I+(O^V&(x^O))+P[1]+4129170786&4294967295,I=x+(U<<5&4294967295|U>>>27),U=V+(x^O&(I^x))+P[6]+3225465664&4294967295,V=I+(U<<9&4294967295|U>>>23),U=O+(I^x&(V^I))+P[11]+643717713&4294967295,O=V+(U<<14&4294967295|U>>>18),U=x+(V^I&(O^V))+P[0]+3921069994&4294967295,x=O+(U<<20&4294967295|U>>>12),U=I+(O^V&(x^O))+P[5]+3593408605&4294967295,I=x+(U<<5&4294967295|U>>>27),U=V+(x^O&(I^x))+P[10]+38016083&4294967295,V=I+(U<<9&4294967295|U>>>23),U=O+(I^x&(V^I))+P[15]+3634488961&4294967295,O=V+(U<<14&4294967295|U>>>18),U=x+(V^I&(O^V))+P[4]+3889429448&4294967295,x=O+(U<<20&4294967295|U>>>12),U=I+(O^V&(x^O))+P[9]+568446438&4294967295,I=x+(U<<5&4294967295|U>>>27),U=V+(x^O&(I^x))+P[14]+3275163606&4294967295,V=I+(U<<9&4294967295|U>>>23),U=O+(I^x&(V^I))+P[3]+4107603335&4294967295,O=V+(U<<14&4294967295|U>>>18),U=x+(V^I&(O^V))+P[8]+1163531501&4294967295,x=O+(U<<20&4294967295|U>>>12),U=I+(O^V&(x^O))+P[13]+2850285829&4294967295,I=x+(U<<5&4294967295|U>>>27),U=V+(x^O&(I^x))+P[2]+4243563512&4294967295,V=I+(U<<9&4294967295|U>>>23),U=O+(I^x&(V^I))+P[7]+1735328473&4294967295,O=V+(U<<14&4294967295|U>>>18),U=x+(V^I&(O^V))+P[12]+2368359562&4294967295,x=O+(U<<20&4294967295|U>>>12),U=I+(x^O^V)+P[5]+4294588738&4294967295,I=x+(U<<4&4294967295|U>>>28),U=V+(I^x^O)+P[8]+2272392833&4294967295,V=I+(U<<11&4294967295|U>>>21),U=O+(V^I^x)+P[11]+1839030562&4294967295,O=V+(U<<16&4294967295|U>>>16),U=x+(O^V^I)+P[14]+4259657740&4294967295,x=O+(U<<23&4294967295|U>>>9),U=I+(x^O^V)+P[1]+2763975236&4294967295,I=x+(U<<4&4294967295|U>>>28),U=V+(I^x^O)+P[4]+1272893353&4294967295,V=I+(U<<11&4294967295|U>>>21),U=O+(V^I^x)+P[7]+4139469664&4294967295,O=V+(U<<16&4294967295|U>>>16),U=x+(O^V^I)+P[10]+3200236656&4294967295,x=O+(U<<23&4294967295|U>>>9),U=I+(x^O^V)+P[13]+681279174&4294967295,I=x+(U<<4&4294967295|U>>>28),U=V+(I^x^O)+P[0]+3936430074&4294967295,V=I+(U<<11&4294967295|U>>>21),U=O+(V^I^x)+P[3]+3572445317&4294967295,O=V+(U<<16&4294967295|U>>>16),U=x+(O^V^I)+P[6]+76029189&4294967295,x=O+(U<<23&4294967295|U>>>9),U=I+(x^O^V)+P[9]+3654602809&4294967295,I=x+(U<<4&4294967295|U>>>28),U=V+(I^x^O)+P[12]+3873151461&4294967295,V=I+(U<<11&4294967295|U>>>21),U=O+(V^I^x)+P[15]+530742520&4294967295,O=V+(U<<16&4294967295|U>>>16),U=x+(O^V^I)+P[2]+3299628645&4294967295,x=O+(U<<23&4294967295|U>>>9),U=I+(O^(x|~V))+P[0]+4096336452&4294967295,I=x+(U<<6&4294967295|U>>>26),U=V+(x^(I|~O))+P[7]+1126891415&4294967295,V=I+(U<<10&4294967295|U>>>22),U=O+(I^(V|~x))+P[14]+2878612391&4294967295,O=V+(U<<15&4294967295|U>>>17),U=x+(V^(O|~I))+P[5]+4237533241&4294967295,x=O+(U<<21&4294967295|U>>>11),U=I+(O^(x|~V))+P[12]+1700485571&4294967295,I=x+(U<<6&4294967295|U>>>26),U=V+(x^(I|~O))+P[3]+2399980690&4294967295,V=I+(U<<10&4294967295|U>>>22),U=O+(I^(V|~x))+P[10]+4293915773&4294967295,O=V+(U<<15&4294967295|U>>>17),U=x+(V^(O|~I))+P[1]+2240044497&4294967295,x=O+(U<<21&4294967295|U>>>11),U=I+(O^(x|~V))+P[8]+1873313359&4294967295,I=x+(U<<6&4294967295|U>>>26),U=V+(x^(I|~O))+P[15]+4264355552&4294967295,V=I+(U<<10&4294967295|U>>>22),U=O+(I^(V|~x))+P[6]+2734768916&4294967295,O=V+(U<<15&4294967295|U>>>17),U=x+(V^(O|~I))+P[13]+1309151649&4294967295,x=O+(U<<21&4294967295|U>>>11),U=I+(O^(x|~V))+P[4]+4149444226&4294967295,I=x+(U<<6&4294967295|U>>>26),U=V+(x^(I|~O))+P[11]+3174756917&4294967295,V=I+(U<<10&4294967295|U>>>22),U=O+(I^(V|~x))+P[2]+718787259&4294967295,O=V+(U<<15&4294967295|U>>>17),U=x+(V^(O|~I))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(O+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+V&4294967295}s.prototype.v=function(D,I){I===void 0&&(I=D.length);const x=I-this.blockSize,P=this.C;let O=this.h,V=0;for(;V<I;){if(O==0)for(;V<=x;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<I;)if(P[O++]=D.charCodeAt(V++),O==this.blockSize){o(this,P),O=0;break}}else for(;V<I;)if(P[O++]=D[V++],O==this.blockSize){o(this,P),O=0;break}}this.h=O,this.o+=I},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;I=this.o*8;for(var x=D.length-8;x<D.length;++x)D[x]=I&255,I/=256;for(this.v(D),D=Array(16),I=0,x=0;x<4;++x)for(let P=0;P<32;P+=8)D[I++]=this.g[x]>>>P&255;return D};function l(D,I){var x=d;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=I(D)}function u(D,I){this.h=I;const x=[];let P=!0;for(let O=D.length-1;O>=0;O--){const V=D[O]|0;P&&V==I||(x[O]=V,P=!1)}this.g=x}var d={};function p(D){return-128<=D&&D<128?l(D,function(I){return new u([I|0],I<0?-1:0)}):new u([D|0],D<0?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return w;if(D<0)return L(f(-D));const I=[];let x=1;for(let P=0;D>=x;P++)I[P]=D/x|0,x*=4294967296;return new u(I,0)}function _(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return L(_(D.substring(1),I));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=f(Math.pow(I,8));let P=w;for(let V=0;V<D.length;V+=8){var O=Math.min(8,D.length-V);const U=parseInt(D.substring(V,V+O),I);O<8?(O=f(Math.pow(I,O)),P=P.j(O).add(f(U))):(P=P.j(x),P=P.add(f(U)))}return P}var w=p(0),T=p(1),C=p(16777216);n=u.prototype,n.m=function(){if(k(this))return-L(this).m();let D=0,I=1;for(let x=0;x<this.g.length;x++){const P=this.i(x);D+=(P>=0?P:4294967296+P)*I,I*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(k(this))return"-"+L(this).toString(D);const I=f(Math.pow(D,6));var x=this;let P="";for(;;){const O=Q(x,I).g;x=G(x,O.j(I));let V=((x.g.length>0?x.g[0]:x.h)>>>0).toString(D);if(x=O,M(x))return V+P;for(;V.length<6;)V="0"+V;P=V+P}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(let I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function k(D){return D.h==-1}n.l=function(D){return D=G(this,D),k(D)?-1:M(D)?0:1};function L(D){const I=D.g.length,x=[];for(let P=0;P<I;P++)x[P]=~D.g[P];return new u(x,~D.h).add(T)}n.abs=function(){return k(this)?L(this):this},n.add=function(D){const I=Math.max(this.g.length,D.g.length),x=[];let P=0;for(let O=0;O<=I;O++){let V=P+(this.i(O)&65535)+(D.i(O)&65535),U=(V>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);P=U>>>16,V&=65535,U&=65535,x[O]=U<<16|V}return new u(x,x[x.length-1]&-2147483648?-1:0)};function G(D,I){return D.add(L(I))}n.j=function(D){if(M(this)||M(D))return w;if(k(this))return k(D)?L(this).j(L(D)):L(L(this).j(D));if(k(D))return L(this.j(L(D)));if(this.l(C)<0&&D.l(C)<0)return f(this.m()*D.m());const I=this.g.length+D.g.length,x=[];for(var P=0;P<2*I;P++)x[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<D.g.length;O++){const V=this.i(P)>>>16,U=this.i(P)&65535,Ue=D.i(O)>>>16,Ie=D.i(O)&65535;x[2*P+2*O]+=U*Ie,$(x,2*P+2*O),x[2*P+2*O+1]+=V*Ie,$(x,2*P+2*O+1),x[2*P+2*O+1]+=U*Ue,$(x,2*P+2*O+1),x[2*P+2*O+2]+=V*Ue,$(x,2*P+2*O+2)}for(D=0;D<I;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=I;D<2*I;D++)x[D]=0;return new u(x,0)};function $(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function H(D,I){this.g=D,this.h=I}function Q(D,I){if(M(I))throw Error("division by zero");if(M(D))return new H(w,w);if(k(D))return I=Q(L(D),I),new H(L(I.g),L(I.h));if(k(I))return I=Q(D,L(I)),new H(L(I.g),I.h);if(D.g.length>30){if(k(D)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var x=T,P=I;P.l(D)<=0;)x=ae(x),P=ae(P);var O=ne(x,1),V=ne(P,1);for(P=ne(P,2),x=ne(x,2);!M(P);){var U=V.add(P);U.l(D)<=0&&(O=O.add(x),V=U),P=ne(P,1),x=ne(x,1)}return I=G(D,O.j(I)),new H(O,I)}for(O=w;D.l(I)>=0;){for(x=Math.max(1,Math.floor(D.m()/I.m())),P=Math.ceil(Math.log(x)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),V=f(x),U=V.j(I);k(U)||U.l(D)>0;)x-=P,V=f(x),U=V.j(I);M(V)&&(V=T),O=O.add(V),D=G(D,U)}return new H(O,D)}n.B=function(D){return Q(this,D).h},n.and=function(D){const I=Math.max(this.g.length,D.g.length),x=[];for(let P=0;P<I;P++)x[P]=this.i(P)&D.i(P);return new u(x,this.h&D.h)},n.or=function(D){const I=Math.max(this.g.length,D.g.length),x=[];for(let P=0;P<I;P++)x[P]=this.i(P)|D.i(P);return new u(x,this.h|D.h)},n.xor=function(D){const I=Math.max(this.g.length,D.g.length),x=[];for(let P=0;P<I;P++)x[P]=this.i(P)^D.i(P);return new u(x,this.h^D.h)};function ae(D){const I=D.g.length+1,x=[];for(let P=0;P<I;P++)x[P]=D.i(P)<<1|D.i(P-1)>>>31;return new u(x,D.h)}function ne(D,I){const x=I>>5;I%=32;const P=D.g.length-x,O=[];for(let V=0;V<P;V++)O[V]=I>0?D.i(V+x)>>>I|D.i(V+x+1)<<32-I:D.i(V+x);return new u(O,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=_,ng=u}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var E=0;E<g.length;++E){var A=g[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=t(this);function o(g,E){if(E)e:{var A=s;g=g.split(".");for(var N=0;N<g.length-1;N++){var j=g[N];if(!(j in A))break e;A=A[j]}g=g[g.length-1],N=A[g],E=E(N),E!=N&&E!=null&&e(A,g,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(E){var A=[],N;for(N in E)Object.prototype.hasOwnProperty.call(E,N)&&A.push([N,E[N]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function p(g,E,A){return g.call.apply(g.bind,arguments)}function f(g,E,A){return f=p,f.apply(null,arguments)}function _(g,E){var A=Array.prototype.slice.call(arguments,1);return function(){var N=A.slice();return N.push.apply(N,arguments),g.apply(this,N)}}function w(g,E){function A(){}A.prototype=E.prototype,g.Z=E.prototype,g.prototype=new A,g.prototype.constructor=g,g.Ob=function(N,j,Z){for(var he=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)he[Ve-2]=arguments[Ve];return E.prototype[j].apply(N,he)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function C(g){const E=g.length;if(E>0){const A=Array(E);for(let N=0;N<E;N++)A[N]=g[N];return A}return[]}function M(g,E){for(let N=1;N<arguments.length;N++){const j=arguments[N];var A=typeof j;if(A=A!="object"?A:j?Array.isArray(j)?"array":A:"null",A=="array"||A=="object"&&typeof j.length=="number"){A=g.length||0;const Z=j.length||0;g.length=A+Z;for(let he=0;he<Z;he++)g[A+he]=j[he]}else g.push(j)}}class k{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function L(g){u.setTimeout(()=>{throw g},0)}function G(){var g=D;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class ${constructor(){this.h=this.g=null}add(E,A){const N=H.get();N.set(E,A),this.h?this.h.next=N:this.g=N,this.h=N}}var H=new k(()=>new Q,g=>g.reset());class Q{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ne=!1,D=new $,I=()=>{const g=Promise.resolve(void 0);ae=()=>{g.then(x)}};function x(){for(var g;g=G();){try{g.h.call(g.g)}catch(A){L(A)}var E=H;E.j(g),E.h<100&&(E.h++,g.next=E.g,E.g=g)}ne=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};u.addEventListener("test",A,E),u.removeEventListener("test",A,E)}catch{}return g})();function U(g){return/^[\s\xa0]*$/.test(g)}function Ue(g,E){O.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,E)}w(Ue,O),Ue.prototype.init=function(g,E){const A=this.type=g.type,N=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget,E||(A=="mouseover"?E=g.fromElement:A=="mouseout"&&(E=g.toElement)),this.relatedTarget=E,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),J=0;function le(g,E,A,N,j){this.listener=g,this.proxy=null,this.src=E,this.type=A,this.capture=!!N,this.ha=j,this.key=++J,this.da=this.fa=!1}function se(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function pe(g,E,A){for(const N in g)E.call(A,g[N],N,g)}function _e(g,E){for(const A in g)E.call(void 0,g[A],A,g)}function B(g){const E={};for(const A in g)E[A]=g[A];return E}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(g,E){let A,N;for(let j=1;j<arguments.length;j++){N=arguments[j];for(A in N)g[A]=N[A];for(let Z=0;Z<Y.length;Z++)A=Y[Z],Object.prototype.hasOwnProperty.call(N,A)&&(g[A]=N[A])}}function oe(g){this.src=g,this.g={},this.h=0}oe.prototype.add=function(g,E,A,N,j){const Z=g.toString();g=this.g[Z],g||(g=this.g[Z]=[],this.h++);const he=ge(g,E,N,j);return he>-1?(E=g[he],A||(E.fa=!1)):(E=new le(E,this.src,Z,!!N,j),E.fa=A,g.push(E)),E};function Ee(g,E){const A=E.type;if(A in g.g){var N=g.g[A],j=Array.prototype.indexOf.call(N,E,void 0),Z;(Z=j>=0)&&Array.prototype.splice.call(N,j,1),Z&&(se(E),g.g[A].length==0&&(delete g.g[A],g.h--))}}function ge(g,E,A,N){for(let j=0;j<g.length;++j){const Z=g[j];if(!Z.da&&Z.listener==E&&Z.capture==!!A&&Z.ha==N)return j}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),fe={};function tt(g,E,A,N,j){if(Array.isArray(E)){for(let Z=0;Z<E.length;Z++)tt(g,E[Z],A,N,j);return null}return A=Yi(A),g&&g[Ie]?g.J(E,A,d(N)?!!N.capture:!1,j):Ki(g,E,A,!1,N,j)}function Ki(g,E,A,N,j,Z){if(!E)throw Error("Invalid event type");const he=d(j)?!!j.capture:!!j;let Ve=fi(g);if(Ve||(g[Ce]=Ve=new oe(g)),A=Ve.add(E,A,N,he,Z),A.proxy)return A;if(N=di(),A.proxy=N,N.src=g,N.listener=A,g.addEventListener)V||(j=he),j===void 0&&(j=!1),g.addEventListener(E.toString(),N,j);else if(g.attachEvent)g.attachEvent(an(E.toString()),N);else if(g.addListener&&g.removeListener)g.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return A}function di(){function g(A){return E.call(g.src,g.listener,A)}const E=Ir;return g}function xr(g,E,A,N,j){if(Array.isArray(E))for(var Z=0;Z<E.length;Z++)xr(g,E[Z],A,N,j);else N=d(N)?!!N.capture:!!N,A=Yi(A),g&&g[Ie]?(g=g.i,Z=String(E).toString(),Z in g.g&&(E=g.g[Z],A=ge(E,A,N,j),A>-1&&(se(E[A]),Array.prototype.splice.call(E,A,1),E.length==0&&(delete g.g[Z],g.h--)))):g&&(g=fi(g))&&(E=g.g[E.toString()],g=-1,E&&(g=ge(E,A,N,j)),(A=g>-1?E[g]:null)&&Ps(A))}function Ps(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[Ie])Ee(E.i,g);else{var A=g.type,N=g.proxy;E.removeEventListener?E.removeEventListener(A,N,g.capture):E.detachEvent?E.detachEvent(an(A),N):E.addListener&&E.removeListener&&E.removeListener(N),(A=fi(E))?(Ee(A,g),A.h==0&&(A.src=null,E[Ce]=null)):se(g)}}}function an(g){return g in fe?fe[g]:fe[g]="on"+g}function Ir(g,E){if(g.da)g=!0;else{E=new Ue(E,this);const A=g.listener,N=g.ha||g.src;g.fa&&Ps(g),g=A.call(N,E)}return g}function fi(g){return g=g[Ce],g instanceof oe?g:null}var Mo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yi(g){return typeof g=="function"?g:(g[Mo]||(g[Mo]=function(E){return g.handleEvent(E)}),g[Mo])}function Pt(){P.call(this),this.i=new oe(this),this.M=this,this.G=null}w(Pt,P),Pt.prototype[Ie]=!0,Pt.prototype.removeEventListener=function(g,E,A,N){xr(this,g,E,A,N)};function Oe(g,E){var A,N=g.G;if(N)for(A=[];N;N=N.G)A.push(N);if(g=g.M,N=E.type||E,typeof E=="string")E=new O(E,g);else if(E instanceof O)E.target=E.target||g;else{var j=E;E=new O(N,g),ce(E,j)}j=!0;let Z,he;if(A)for(he=A.length-1;he>=0;he--)Z=E.g=A[he],j=Mi(Z,N,!0,E)&&j;if(Z=E.g=g,j=Mi(Z,N,!0,E)&&j,j=Mi(Z,N,!1,E)&&j,A)for(he=0;he<A.length;he++)Z=E.g=A[he],j=Mi(Z,N,!1,E)&&j}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var g=this.i;for(const E in g.g){const A=g.g[E];for(let N=0;N<A.length;N++)se(A[N]);delete g.g[E],g.h--}}this.G=null},Pt.prototype.J=function(g,E,A,N){return this.i.add(String(g),E,!1,A,N)},Pt.prototype.K=function(g,E,A,N){return this.i.add(String(g),E,!0,A,N)};function Mi(g,E,A,N){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();let j=!0;for(let Z=0;Z<E.length;++Z){const he=E[Z];if(he&&!he.da&&he.capture==A){const Ve=he.listener,Lt=he.ha||he.src;he.fa&&Ee(g.i,he),j=Ve.call(Lt,N)!==!1&&j}}return j&&!N.defaultPrevented}function ko(g,E){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(g,E||0)}function Mn(g){g.g=ko(()=>{g.g=null,g.i&&(g.i=!1,Mn(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class Xt extends P{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Mn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jn(g){P.call(this),this.h=g,this.g={}}w(jn,P);var Nr=[];function Us(g){pe(g.g,function(E,A){this.g.hasOwnProperty(A)&&Ps(E)},g),g.g={}}jn.prototype.N=function(){jn.Z.N.call(this),Us(this)},jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ki=u.JSON.stringify,Mr=u.JSON.parse,Do=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function kr(){}function Ka(){}var wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){O.call(this,"d")}w(qt,O);function Qt(){O.call(this,"c")}w(Qt,O);var Ct={},Ya=null;function Dr(){return Ya=Ya||new Pt}Ct.Ia="serverreachability";function Po(g){O.call(this,Ct.Ia,g)}w(Po,O);function Jn(g){const E=Dr();Oe(E,new Po(E))}Ct.STAT_EVENT="statevent";function Wi(g,E){O.call(this,Ct.STAT_EVENT,g),this.stat=E}w(Wi,O);function Rt(g){const E=Dr();Oe(E,new Wi(E,g))}Ct.Ja="timingevent";function Kn(g,E){O.call(this,Ct.Ja,g),this.size=E}w(Kn,O);function Yn(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},E)}function kn(){this.g=!0}kn.prototype.ua=function(){this.g=!1};function Wa(g,E,A,N,j,Z){g.info(function(){if(g.g)if(Z){var he="",Ve=Z.split("&");for(let dt=0;dt<Ve.length;dt++){var Lt=Ve[dt].split("=");if(Lt.length>1){const Mt=Lt[0];Lt=Lt[1];const cn=Mt.split("_");he=cn.length>=2&&cn[1]=="type"?he+(Mt+"="+Lt+"&"):he+(Mt+"=redacted&")}}}else he=null;else he=Z;return"XMLHTTP REQ ("+N+") [attempt "+j+"]: "+E+`
`+A+`
`+he})}function Uo(g,E,A,N,j,Z,he){g.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+j+"]: "+E+`
`+A+`
`+Z+" "+he})}function En(g,E,A,N){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+Xa(g,A)+(N?" "+N:"")})}function Wn(g,E){g.info(function(){return"TIMEOUT: "+E})}kn.prototype.info=function(){};function Xa(g,E){if(!g.g)return E;if(!E)return null;try{const Z=JSON.parse(E);if(Z){for(g=0;g<Z.length;g++)if(Array.isArray(Z[g])){var A=Z[g];if(!(A.length<2)){var N=A[1];if(Array.isArray(N)&&!(N.length<1)){var j=N[0];if(j!="noop"&&j!="stop"&&j!="close")for(let he=1;he<N.length;he++)N[he]=""}}}}return ki(Z)}catch{return E}}var Os={NO_ERROR:0,TIMEOUT:8},Pr={},Ur;function Xi(){}w(Xi,kr),Xi.prototype.g=function(){return new XMLHttpRequest},Ur=new Xi;function hi(g){return encodeURIComponent(String(g))}function Or(g){var E=1;g=g.split(":");const A=[];for(;E>0&&g.length;)A.push(g.shift()),E--;return g.length&&A.push(g.join(":")),A}function Dn(g,E,A,N){this.j=g,this.i=E,this.l=A,this.S=N||1,this.V=new jn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new me}function me(){this.i=null,this.g="",this.h=!1}var we={},ye={};function de(g,E,A){g.M=1,g.A=pi(et(E)),g.u=A,g.R=!0,Re(g,null)}function Re(g,E){g.F=Date.now(),Ut(g),g.B=et(g.A);var A=g.B,N=g.S;Array.isArray(N)||(N=[String(N)]),Vs(A.i,"t",N),g.C=0,A=g.j.L,g.h=new me,g.g=Nu(g.j,A?E:null,!g.u),g.P>0&&(g.O=new Xt(f(g.Y,g,g.g),g.P)),E=g.V,A=g.g,N=g.ba;var j="readystatechange";Array.isArray(j)||(j&&(Nr[0]=j.toString()),j=Nr);for(let Z=0;Z<j.length;Z++){const he=tt(A,j[Z],N||E.handleEvent,!1,E.h||E);if(!he)break;E.g[he.key]=he}E=g.J?B(g.J):{},g.u?(g.v||(g.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,E)):(g.v="GET",g.g.ea(g.B,g.v,null,E)),Jn(),Wa(g.i,g.v,g.B,g.l,g.S,g.u)}Dn.prototype.ba=function(g){g=g.target;const E=this.O;E&&yi(g)==3?E.j():this.Y(g)},Dn.prototype.Y=function(g){try{if(g==this.g)e:{const Ve=yi(this.g),Lt=this.g.ya(),dt=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||Ve!=4||Lt==7||(Lt==8||dt<=0?Jn(3):Jn(2)),Qn(this);var E=this.g.ca();this.X=E;var A=Ye(this);if(this.o=E==200,Uo(this.i,this.v,this.B,this.l,this.S,Ve,E),this.o){if(this.U&&!this.L){t:{if(this.g){var N,j=this.g;if((N=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(N)){var Z=N;break t}}Z=null}if(g=Z)En(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pn(this,g);else{this.o=!1,this.m=3,Rt(12),Yt(this),xt(this);break e}}if(this.R){g=!0;let Mt;for(;!this.K&&this.C<A.length;)if(Mt=nt(this,A),Mt==ye){Ve==4&&(this.m=4,Rt(14),g=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==we){this.m=4,Rt(15),En(this.i,this.l,A,"[Invalid Chunk]"),g=!1;break}else En(this.i,this.l,Mt,null),pn(this,Mt);if(Ne(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||A.length!=0||this.h.h||(this.m=1,Rt(16),g=!1),this.o=this.o&&g,!g)En(this.i,this.l,A,"[Invalid Chunked Response]"),Yt(this),xt(this);else if(A.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),sl(he),he.P=!0,Rt(11))}}else En(this.i,this.l,A,null),pn(this,A);Ve==4&&Yt(this),this.o&&!this.K&&(Ve==4?Cu(this.j,this):(this.o=!1,Ut(this)))}else ns(this.g),E==400&&A.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Yt(this),xt(this)}}}catch{}finally{}};function Ye(g){if(!Ne(g))return g.g.la();const E=en(g.g);if(E==="")return"";let A="";const N=E.length,j=yi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Yt(g),xt(g),"";g.h.i=new u.TextDecoder}for(let Z=0;Z<N;Z++)g.h.h=!0,A+=g.h.i.decode(E[Z],{stream:!(j&&Z==N-1)});return E.length=0,g.h.g+=A,g.C=0,g.h.g}function Ne(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function nt(g,E){var A=g.C,N=E.indexOf(`
`,A);return N==-1?ye:(A=Number(E.substring(A,N)),isNaN(A)?we:(N+=1,N+A>E.length?ye:(E=E.slice(N,N+A),g.C=N+A,E)))}Dn.prototype.cancel=function(){this.K=!0,Yt(this)};function Ut(g){g.T=Date.now()+g.H,Xn(g,g.H)}function Xn(g,E){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Yn(f(g.aa,g),E)}function Qn(g){g.D&&(u.clearTimeout(g.D),g.D=null)}Dn.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Wn(this.i,this.B),this.M!=2&&(Jn(),Rt(17)),Yt(this),this.m=2,xt(this)):Xn(this,this.T-g)};function xt(g){g.j.I==0||g.K||Cu(g.j,g)}function Yt(g){Qn(g);var E=g.O;E&&typeof E.dispose=="function"&&E.dispose(),g.O=null,Us(g.V),g.g&&(E=g.g,g.g=null,E.abort(),E.dispose())}function pn(g,E){try{var A=g.j;if(A.I!=0&&(A.g==g||Pn(A.h,g))){if(!g.L&&Pn(A.h,g)&&A.I==3){try{var N=A.Ba.g.parse(E)}catch{N=null}if(Array.isArray(N)&&N.length==3){var j=N;if(j[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<g.F)qo(A),Fs(A);else break e;$r(A),Rt(18)}}else A.xa=j[1],0<A.xa-A.K&&j[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Yn(f(A.Va,A),6e3));Tn(A.h)<=1&&A.ta&&(A.ta=void 0)}else Vi(A,11)}else if((g.L||A.g==g)&&qo(A),!U(E))for(j=A.Ba.g.parse(E),E=0;E<j.length;E++){let dt=j[E];const Mt=dt[0];if(!(Mt<=A.K))if(A.K=Mt,dt=dt[1],A.I==2)if(dt[0]=="c"){A.M=dt[1],A.ba=dt[2];const cn=dt[3];cn!=null&&(A.ka=cn,A.j.info("VER="+A.ka));const is=dt[4];is!=null&&(A.za=is,A.j.info("SVER="+A.za));const vi=dt[5];vi!=null&&typeof vi=="number"&&vi>0&&(N=1.5*vi,A.O=N,A.j.info("backChannelRequestTimeoutMs_="+N)),N=A;const _i=g.g;if(_i){const jr=_i.g?_i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var Z=N.h;Z.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Lr(Z,Z.h),Z.h=null))}if(N.G){const Ho=_i.g?_i.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(N.wa=Ho,ze(N.J,N.G,Ho))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-g.F,A.j.info("Handshake RTT: "+A.T+"ms")),N=A;var he=g;if(N.na=Iu(N,N.L?N.ba:null,N.W),he.L){Br(N.h,he);var Ve=he,Lt=N.O;Lt&&(Ve.H=Lt),Ve.D&&(Qn(Ve),Ut(Ve)),N.g=he}else bu(N);A.i.length>0&&Bi(A)}else dt[0]!="stop"&&dt[0]!="close"||Vi(A,7);else A.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Vi(A,7):nl(A):dt[0]!="noop"&&A.l&&A.l.qa(dt),A.A=0)}}Jn(4)}catch{}}var wt=class{constructor(g,E){this.g=g,this.map=E}};function Di(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qi(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Tn(g){return g.h?1:g.g?g.g.size:0}function Pn(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function Lr(g,E){g.g?g.g.add(E):g.h=E}function Br(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}Di.prototype.cancel=function(){if(this.i=Ls(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ls(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const A of g.g.values())E=E.concat(A.G);return E}return C(g.i)}var Vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bs(g,E){if(g){g=g.split("&");for(let A=0;A<g.length;A++){const N=g[A].indexOf("=");let j,Z=null;N>=0?(j=g[A].substring(0,N),Z=g[A].substring(N+1)):j=g[A],E(j,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Et(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;g instanceof Et?(this.l=g.l,Ot(this,g.j),this.o=g.o,this.g=g.g,Sn(this,g.u),this.h=g.h,Zi(this,Qa(g.i)),this.m=g.m):g&&(E=String(g).match(Vr))?(this.l=!1,Ot(this,E[1]||"",!0),this.o=ln(E[2]||""),this.g=ln(E[3]||"",!0),Sn(this,E[4]),this.h=ln(E[5]||"",!0),Zi(this,E[6]||"",!0),this.m=ln(E[7]||"")):(this.l=!1,this.i=new yt(null,this.l))}Et.prototype.toString=function(){const g=[];var E=this.j;E&&g.push(Zt(E,Fe,!0),":");var A=this.g;return(A||E=="file")&&(g.push("//"),(E=this.o)&&g.push(Zt(E,Fe,!0),"@"),g.push(hi(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&g.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Zt(A,A.charAt(0)=="/"?Ge:Be,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Zt(A,ct)),g.join("")},Et.prototype.resolve=function(g){const E=et(this);let A=!!g.j;A?Ot(E,g.j):A=!!g.o,A?E.o=g.o:A=!!g.g,A?E.g=g.g:A=g.u!=null;var N=g.h;if(A)Sn(E,g.u);else if(A=!!g.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var j=E.h.lastIndexOf("/");j!=-1&&(N=E.h.slice(0,j+1)+N)}if(j=N,j==".."||j==".")N="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){N=j.lastIndexOf("/",0)==0,j=j.split("/");const Z=[];for(let he=0;he<j.length;){const Ve=j[he++];Ve=="."?N&&he==j.length&&Z.push(""):Ve==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&he==j.length&&Z.push("")):(Z.push(Ve),N=!0)}N=Z.join("/")}else N=j}return A?E.h=N:A=g.i.toString()!=="",A?Zi(E,Qa(g.i)):A=!!g.m,A&&(E.m=g.m),E};function et(g){return new Et(g)}function Ot(g,E,A){g.j=A?ln(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function Sn(g,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);g.u=E}else g.u=null}function Zi(g,E,A){E instanceof yt?(g.i=E,Oo(g.i,g.l)):(A||(E=Zt(E,at)),g.i=new yt(E,g.l))}function ze(g,E,A){g.i.set(E,A)}function pi(g){return ze(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ln(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Zt(g,E,A){return typeof g=="string"?(g=encodeURI(g).replace(E,ve),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function ve(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Fe=/[#\/\?@]/g,Be=/[#\?:]/g,Ge=/[#\?]/g,at=/[#\?@]/g,ct=/#/g;function yt(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function it(g){g.g||(g.g=new Map,g.h=0,g.i&&Bs(g.i,function(E,A){g.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}n=yt.prototype,n.add=function(g,E){it(this),this.i=null,g=Pi(this,g);let A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(E),this.h+=1,this};function bn(g,E){it(g),E=Pi(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function gn(g,E){return it(g),E=Pi(g,E),g.g.has(E)}n.forEach=function(g,E){it(this),this.g.forEach(function(A,N){A.forEach(function(j){g.call(E,j,N,this)},this)},this)};function es(g,E){it(g);let A=[];if(typeof E=="string")gn(g,E)&&(A=A.concat(g.g.get(Pi(g,E))));else for(g=Array.from(g.g.values()),E=0;E<g.length;E++)A=A.concat(g[E]);return A}n.set=function(g,E){return it(this),this.i=null,g=Pi(this,g),gn(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g?(g=es(this,g),g.length>0?String(g[0]):E):E};function Vs(g,E,A){bn(g,E),A.length>0&&(g.i=null,g.g.set(Pi(g,E),C(A)),g.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(let N=0;N<E.length;N++){var A=E[N];const j=hi(A);A=es(this,A);for(let Z=0;Z<A.length;Z++){let he=j;A[Z]!==""&&(he+="="+hi(A[Z])),g.push(he)}}return this.i=g.join("&")};function Qa(g){const E=new yt;return E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),E}function Pi(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function Oo(g,E){E&&!g.j&&(it(g),g.i=null,g.g.forEach(function(A,N){const j=N.toLowerCase();N!=j&&(bn(this,N),Vs(this,j,A))},g)),g.j=E}function gi(g,E){const A=new kn;if(u.Image){const N=new Image;N.onload=_(Zn,A,"TestLoadImage: loaded",!0,E,N),N.onerror=_(Zn,A,"TestLoadImage: error",!1,E,N),N.onabort=_(Zn,A,"TestLoadImage: abort",!1,E,N),N.ontimeout=_(Zn,A,"TestLoadImage: timeout",!1,E,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=g}else E(!1)}function Za(g,E){const A=new kn,N=new AbortController,j=setTimeout(()=>{N.abort(),Zn(A,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:N.signal}).then(Z=>{clearTimeout(j),Z.ok?Zn(A,"TestPingServer: ok",!0,E):Zn(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(j),Zn(A,"TestPingServer: error",!1,E)})}function Zn(g,E,A,N,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),N(A)}catch{}}function qs(){this.g=new Do}function Ui(g){this.i=g.Sb||null,this.h=g.ab||!1}w(Ui,kr),Ui.prototype.g=function(){return new qr(this.i,this.h)};function qr(g,E){Pt.call(this),this.H=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(qr,Pt),n=qr.prototype,n.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=E,this.readyState=1,mi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(E.body=g),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?Hs(this):mi(this),this.readyState==3&&Lo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Hs(this))},n.Na=function(g){this.g&&(this.response=g,Hs(this))},n.ga=function(){this.g&&Hs(this)};function Hs(g){g.readyState=4,g.l=null,g.j=null,g.B=null,mi(g)}n.setRequestHeader=function(g,E){this.A.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=E.next();return g.join(`\r
`)};function mi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ei(g){let E="";return pe(g,function(A,N){E+=N,E+=":",E+=A,E+=`\r
`}),E}function Hr(g,E,A){e:{for(N in A){var N=!1;break e}N=!0}N||(A=ei(A),typeof g=="string"?A!=null&&hi(A):ze(g,E,A))}function vt(g){Pt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(vt,Pt);var Oi=/^https?$/i,el=["POST","PUT"];n=vt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,E,A,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ur.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(Z){Gr(this,Z);return}if(g=A||"",A=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var j in N)A.set(j,N[j]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())A.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(A.keys()).find(Z=>Z.toLowerCase()=="content-type"),j=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(el,E,void 0)>=0)||N||j||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,he]of A)this.g.setRequestHeader(Z,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Z){Gr(this,Z)}};function Gr(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.o=5,tl(g),ts(g)}function tl(g){g.A||(g.A=!0,Oe(g,"complete"),Oe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Oe(this,"complete"),Oe(this,"abort"),ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Fr(this):this.Xa())},n.Xa=function(){Fr(this)};function Fr(g){if(g.h&&typeof l<"u"){if(g.v&&yi(g)==4)setTimeout(g.Ca.bind(g),0);else if(Oe(g,"readystatechange"),yi(g)==4){g.h=!1;try{const Z=g.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var N;if(N=Z===0){let he=String(g.D).match(Vr)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),N=!Oi.test(he?he.toLowerCase():"")}A=N}if(A)Oe(g,"complete"),Oe(g,"success");else{g.o=6;try{var j=yi(g)>2?g.g.statusText:""}catch{j=""}g.l=j+" ["+g.ca()+"]",tl(g)}}finally{ts(g)}}}}function ts(g,E){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const A=g.g;g.g=null,E||Oe(g,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function yi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return yi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),Mr(E)}};function en(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(g){const E={};g=(g.g&&yi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<g.length;N++){if(U(g[N]))continue;var A=Or(g[N]);const j=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Z=E[j]||[];E[j]=Z,Z.push(A)}_e(E,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(g,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||E}function Gs(g){this.za=0,this.i=[],this.j=new kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Li("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Li("baseRetryDelayMs",5e3,g),this.Za=Li("retryDelaySeedMs",1e4,g),this.Ta=Li("forwardChannelMaxRetries",2,g),this.va=Li("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Di(g&&g.concurrentRequestLimit),this.Ba=new qs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Gs.prototype,n.ka=8,n.I=1,n.connect=function(g,E,A,N){Rt(0),this.W=g,this.H=E||{},A&&N!==void 0&&(this.H.OSID=A,this.H.OAID=N),this.F=this.X,this.J=Iu(this,null,this.W),Bi(this)};function nl(g){if(Bo(g),g.I==3){var E=g.V++,A=et(g.J);if(ze(A,"SID",g.M),ze(A,"RID",E),ze(A,"TYPE","terminate"),zr(g,A),E=new Dn(g,g.j,E),E.M=2,E.A=pi(et(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!A&&u.Image&&(new Image().src=E.A,A=!0),A||(E.g=Nu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ut(E)}xu(g)}function Fs(g){g.g&&(sl(g),g.g.cancel(),g.g=null)}function Bo(g){Fs(g),g.v&&(u.clearTimeout(g.v),g.v=null),qo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Bi(g){if(!Qi(g.h)&&!g.m){g.m=!0;var E=g.Ea;ae||I(),ne||(ae(),ne=!0),D.add(E,g),g.D=0}}function Vo(g,E){return Tn(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=E.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Yn(f(g.Ea,g,E),Ru(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const j=new Dn(this,this.j,g);let Z=this.o;if(this.U&&(Z?(Z=B(Z),ce(Z,this.U)):Z=this.U),this.u!==null||this.R||(j.J=Z,Z=null),this.S)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var N=this.i[A];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(E+=N,E>4096){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Su(this,j,E),A=et(this.J),ze(A,"RID",g),ze(A,"CVER",22),this.G&&ze(A,"X-HTTP-Session-Id",this.G),zr(this,A),Z&&(this.R?E="headers="+hi(ei(Z))+"&"+E:this.u&&Hr(A,this.u,Z)),Lr(this.h,j),this.Ra&&ze(A,"TYPE","init"),this.S?(ze(A,"$req",E),ze(A,"SID","null"),j.U=!0,de(j,A,null)):de(j,A,E),this.I=2}}else this.I==3&&(g?il(this,g):this.i.length==0||Qi(this.h)||il(this))};function il(g,E){var A;E?A=E.l:A=g.V++;const N=et(g.J);ze(N,"SID",g.M),ze(N,"RID",A),ze(N,"AID",g.K),zr(g,N),g.u&&g.o&&Hr(N,g.u,g.o),A=new Dn(g,g.j,A,g.D+1),g.u===null&&(A.J=g.o),E&&(g.i=E.G.concat(g.i)),E=Su(g,A,1e3),A.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Lr(g.h,A),de(A,N,E)}function zr(g,E){g.H&&pe(g.H,function(A,N){ze(E,N,A)}),g.l&&pe({},function(A,N){ze(E,N,A)})}function Su(g,E,A){A=Math.min(g.i.length,A);const N=g.l?f(g.l.Ka,g.l,g):null;e:{var j=g.i;let Ve=-1;for(;;){const Lt=["count="+A];Ve==-1?A>0?(Ve=j[0].g,Lt.push("ofs="+Ve)):Ve=0:Lt.push("ofs="+Ve);let dt=!0;for(let Mt=0;Mt<A;Mt++){var Z=j[Mt].g;const cn=j[Mt].map;if(Z-=Ve,Z<0)Ve=Math.max(0,j[Mt].g-100),dt=!1;else try{Z="req"+Z+"_"||"";try{var he=cn instanceof Map?cn:Object.entries(cn);for(const[is,vi]of he){let _i=vi;d(vi)&&(_i=ki(vi)),Lt.push(Z+is+"="+encodeURIComponent(_i))}}catch(is){throw Lt.push(Z+"type="+encodeURIComponent("_badmap")),is}}catch{N&&N(cn)}}if(dt){he=Lt.join("&");break e}}he=void 0}return g=g.i.splice(0,A),E.G=g,he}function bu(g){if(!g.g&&!g.v){g.Y=1;var E=g.Da;ae||I(),ne||(ae(),ne=!0),D.add(E,g),g.A=0}}function $r(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Yn(f(g.Da,g),Ru(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Au(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Yn(f(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Fs(this),Au(this))};function sl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function Au(g){g.g=new Dn(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var E=et(g.na);ze(E,"RID","rpc"),ze(E,"SID",g.M),ze(E,"AID",g.K),ze(E,"CI",g.F?"0":"1"),!g.F&&g.ia&&ze(E,"TO",g.ia),ze(E,"TYPE","xmlhttp"),zr(g,E),g.u&&g.o&&Hr(E,g.u,g.o),g.O&&(g.g.H=g.O);var A=g.g;g=g.ba,A.M=1,A.A=pi(et(E)),A.u=null,A.R=!0,Re(A,g)}n.Va=function(){this.C!=null&&(this.C=null,Fs(this),$r(this),Rt(19))};function qo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function Cu(g,E){var A=null;if(g.g==E){qo(g),sl(g),g.g=null;var N=2}else if(Pn(g.h,E))A=E.G,Br(g.h,E),N=1;else return;if(g.I!=0){if(E.o)if(N==1){A=E.u?E.u.length:0,E=Date.now()-E.F;var j=g.D;N=Dr(),Oe(N,new Kn(N,A)),Bi(g)}else bu(g);else if(j=E.m,j==3||j==0&&E.X>0||!(N==1&&Vo(g,E)||N==2&&$r(g)))switch(A&&A.length>0&&(E=g.h,E.i=E.i.concat(A)),j){case 1:Vi(g,5);break;case 4:Vi(g,10);break;case 3:Vi(g,6);break;default:Vi(g,2)}}}function Ru(g,E){let A=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(A*=2),A*E}function Vi(g,E){if(g.j.info("Error code "+E),E==2){var A=f(g.bb,g),N=g.Ua;const j=!N;N=new Et(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ot(N,"https"),pi(N),j?gi(N.toString(),A):Za(N.toString(),A)}else Rt(2);g.I=0,g.l&&g.l.pa(E),xu(g),Bo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function xu(g){if(g.I=0,g.ja=[],g.l){const E=Ls(g.h);(E.length!=0||g.i.length!=0)&&(M(g.ja,E),M(g.ja,g.i),g.h.i.length=0,C(g.i),g.i.length=0),g.l.oa()}}function Iu(g,E,A){var N=A instanceof Et?et(A):new Et(A);if(N.g!="")E&&(N.g=E+"."+N.g),Sn(N,N.u);else{var j=u.location;N=j.protocol,E=E?E+"."+j.hostname:j.hostname,j=+j.port;const Z=new Et(null);N&&Ot(Z,N),E&&(Z.g=E),j&&Sn(Z,j),A&&(Z.h=A),N=Z}return A=g.G,E=g.wa,A&&E&&ze(N,A,E),ze(N,"VER",g.ka),zr(g,N),N}function Nu(g,E,A){if(E&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Aa&&!g.ma?new vt(new Ui({ab:A})):new vt(g.ma),E.Fa(g.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}n=Mu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function un(g,E){Pt.call(this),this.g=new Gs(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(g?g["X-WebChannel-Client-Profile"]=E.sa:g={"X-WebChannel-Client-Profile":E.sa}),this.g.U=g,(g=E&&E.Qb)&&!U(g)&&(this.g.u=g),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!U(E)&&(this.g.G=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new zs(this)}w(un,Pt),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){nl(this.g)},un.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.v&&(A={},A.__data__=ki(g),g=A);E.i.push(new wt(E.Ya++,g)),E.I==3&&Bi(E)},un.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,un.Z.N.call(this)};function ku(g){qt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const A in E){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}w(ku,qt);function Du(){Qt.call(this),this.status=1}w(Du,Qt);function zs(g){this.g=g}w(zs,Mu),zs.prototype.ra=function(){Oe(this.g,"a")},zs.prototype.qa=function(g){Oe(this.g,new ku(g))},zs.prototype.pa=function(g){Oe(this.g,new Du)},zs.prototype.oa=function(){Oe(this.g,"b")},un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,Pr.COMPLETE="complete",Ka.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const Dv="@firebase/firestore",Pv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new Fp("@firebase/firestore");function xi(n,...e){if(Ba.logLevel<=ut.DEBUG){const t=e.map(ig);Ba.debug(`Firestore (${vu}): ${n}`,...t)}}function FE(n,...e){if(Ba.logLevel<=ut.ERROR){const t=e.map(ig);Ba.error(`Firestore (${vu}): ${n}`,...t)}}function Rx(n,...e){if(Ba.logLevel<=ut.WARN){const t=e.map(ig);Ba.warn(`Firestore (${vu}): ${n}`,...t)}}function ig(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,zE(n,s,t)}function zE(n,e,t){let s=`FIRESTORE (${vu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw FE(s),new Error(s)}function Xl(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||zE(e,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Ze extends xs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yn.UNAUTHENTICATED)))}shutdown(){}}class Ix{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Nx{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xl(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Ql;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ql,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{xi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(xi("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ql)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(xi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xl(typeof s.accessToken=="string",31837,{l:s}),new $E(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xl(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class Mx{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kx{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Mx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xl(this.o===void 0,3512);const s=l=>{l.error!=null&&xi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,xi("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{xi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xl(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Uv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Px(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function br(n,e){return n<e?-1:n>e?1:0}function Ox(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Fh(o)===Fh(l)?br(o,l):Fh(o)?1:-1}return br(n.length,e.length)}const Lx=55296,Bx=57343;function Fh(n){const e=n.charCodeAt(0);return e>=Lx&&e<=Bx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class zi{constructor(e,t,s){t===void 0?t=0:t>e.length&&ou(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ou(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=zi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return br(e.length,t.length)}static compareSegments(e,t){const s=zi.isNumericId(e),o=zi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?zi.extractNumericId(e).compare(zi.extractNumericId(t)):Ox(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ng.fromString(e.substring(4,e.length-2))}}class Ci extends zi{construct(e,t,s){return new Ci(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ze(Qe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ci(t)}static emptyPath(){return new Ci([])}}const Vx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ho extends zi{construct(e,t,s){return new ho(e,t,s)}static isValidIdentifier(e){return Vx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ho.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new ho([Ov])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new Ze(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Ze(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ze(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(s+=d,o++):(l(),o++)}if(l(),u)throw new Ze(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ho(t)}static emptyPath(){return new ho([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.path=e}static fromPath(e){return new _o(Ci.fromString(e))}static fromName(e){return new _o(Ci.fromString(e).popFirst(5))}static empty(){return new _o(Ci.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ci.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ci.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _o(new Ci(e.slice()))}}function qx(n,e,t,s){if(e===!0&&s===!0)throw new Ze(Qe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Hx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ou(12329,{type:typeof n})}function Fx(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ze(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gx(n);throw new Ze(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function _u(n,e){if(!Hx(n))throw new Ze(Qe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new Ze(Qe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=-62135596800,Bv=1e6;class $i{static now(){return $i.fromMillis(Date.now())}static fromDate(e){return $i.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Bv);return new $i(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Lv)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bv}_compareTo(e){return this.seconds===e.seconds?br(this.nanoseconds,e.nanoseconds):br(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$i._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_u(e,$i._jsonSchema))return new $i(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$i._jsonSchemaVersion="firestore/timestamp/1.0",$i._jsonSchema={type:jt("string",$i._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};function zx(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new $x("Invalid base64 string: "+l):l}})(e);return new Ro(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new Ro(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return br(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ro.EMPTY_BYTE_STRING=new Ro("");const pp="(default)";class yd{constructor(e,t){this.projectId=e,this.database=t||pp}static empty(){return new yd("","")}get isDefaultDatabase(){return this.database===pp}isEqual(e){return e instanceof yd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t=null,s=[],o=[],l=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Jx(n){return new jx(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vv,Xe;(Xe=Vv||(Vv={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ng([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1048576;function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&xi("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Ql,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const u=Date.now()+s,d=new sg(e,t,u,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var qv,Hv;(Hv=qv||(qv={})).Ma="default",Hv.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firestore.googleapis.com",Fv=!0;class zv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jE,this.ssl=Fv}else this.host=e.host,this.ssl=e.ssl??Fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Yx)throw new Ze(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xx(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ze(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ze(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ze(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class JE{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new xx;switch(s.type){case"firstParty":return new kx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ze(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Gv.get(t);s&&(xi("ComponentProvider","Removing Datastore"),Gv.delete(t),s.terminate())})(this),Promise.resolve()}}function Qx(n,e,t,s={}){var f;n=Fx(n,JE);const o=du(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(nE(`https://${d}`),iE("Firestore",!0)),l.host!==jE&&l.host!==d&&Rx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:o,emulatorOptions:s};if(!So(p,u)&&(n._setSettings(p),s.mockUserToken)){let _,w;if(typeof s.mockUserToken=="string")_=s.mockUserToken,w=yn.MOCK_USER;else{_=UA(s.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ze(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new yn(T)}n._authCredentials=new Ix(new $E(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rg(this.firestore,e,this._query)}}class ji{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new og(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ji(this.firestore,e,this._key)}toJSON(){return{type:ji._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(_u(t,ji._jsonSchema))return new ji(e,s||null,new _o(Ci.fromString(t.referencePath)))}}ji._jsonSchemaVersion="firestore/documentReference/1.0",ji._jsonSchema={type:jt("string",ji._jsonSchemaVersion),referencePath:jt("string")};class og extends rg{constructor(e,t,s){super(e,t,Jx(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ji(this.firestore,null,new _o(e))}withConverter(e){return new og(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="AsyncQueue";class jv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wx(this,"async_queue_retry"),this._c=()=>{const s=zh();s&&xi($v,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ql;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zx(e))throw e;xi($v,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,FE("INTERNAL UNHANDLED ERROR: ",Jv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=sg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ou(47125,{Pc:Jv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Zx extends JE{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new jv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jv(e),this._firestoreClient=void 0,await e}}}function eI(n,e){const t=typeof n=="object"?n:aE(),s=typeof n=="string"?n:pp,o=$p(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=DA("firestore");l&&Qx(o,...l)}return o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ts(Ro.fromBase64String(e))}catch(t){throw new Ze(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ts(Ro.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_u(e,Ts._jsonSchema))return Ts.fromBase64String(e.bytes)}}Ts._jsonSchemaVersion="firestore/bytes/1.0",Ts._jsonSchema={type:jt("string",Ts._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ze(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ho(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return br(this._lat,e._lat)||br(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Eo._jsonSchemaVersion}}static fromJSON(e){if(_u(e,Eo._jsonSchema))return new Eo(e.latitude,e.longitude)}}Eo._jsonSchemaVersion="firestore/geoPoint/1.0",Eo._jsonSchema={type:jt("string",Eo._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:To._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_u(e,To._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new To(e.vectorValues);throw new Ze(Qe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}To._jsonSchemaVersion="firestore/vectorValue/1.0",To._jsonSchema={type:jt("string",To._jsonSchemaVersion),vectorValues:jt("object")};const tI=new RegExp("[~\\*/\\[\\]]");function nI(n,e,t){if(e.search(tI)>=0)throw Kv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new KE(...e.split("."))._internalPath}catch{throw Kv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function Kv(n,e,t,s,o){let l=`Function ${e}() called with invalid data`;l+=". ";let u="";return new Ze(Qe.INVALID_ARGUMENT,l+n+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ji(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class iI extends YE{data(){return super.data()}}function WE(n,e){return typeof e=="string"?nI(n,e):e instanceof KE?e._internalPath:e._delegate._internalPath}class Vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends YE{constructor(e,t,s,o,l,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(WE("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Qe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:jt("string",ka._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class rd extends ka{data(e={}){return super.data(e)}}class Zl{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rd(this._firestore,this._userDataWriter,s.key,s,new Vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new rd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vc(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new rd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vc(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let f=-1,_=-1;return d.type!==0&&(f=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:sI(d.type),doc:p,oldIndex:f,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Qe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ux.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ou(61501,{type:n})}}Zl._jsonSchemaVersion="firestore/querySnapshot/1.0",Zl._jsonSchema={type:jt("string",Zl._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};(function(e,t=!0){(function(o){vu=o})(Ha),La(new bo("firestore",((s,{instanceIdentifier:o,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new Zx(new Nx(s.getProvider("auth-internal")),new Dx(u,s.getProvider("app-check-internal")),(function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ze(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yd(f.options.projectId,_)})(u,o),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Sr(Dv,Pv,e),Sr(Dv,Pv,"esm2020")})();const rI={apiKey:"AIzaSyBacKZyg7oSBbXdLgRuHR6EvmBzhbzJgeg",authDomain:"restore-black-white.firebaseapp.com",projectId:"restore-black-white",storageBucket:"restore-black-white.firebasestorage.app",messagingSenderId:"219904633131",appId:"1:219904633131:web:23ed4defa74d0ce0cf7d6e"};let $h=null,_n=null,gp=null,oI=null;try{$h=oE(rI),_n=Sx($h),gp=new Es,oI=eI($h),console.log(" Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}const aI=async()=>{if(!_n||!gp)throw new Error("Firebase is not configured. Please set up Firebase environment variables.");try{return(await k1(_n,gp)).user}catch(n){throw console.error("Error signing in with Google:",n),n}},lI=async(n,e)=>{if(!_n)throw new Error("Firebase is not configured. Please set up Firebase environment variables.");try{console.log(" Attempting email sign-in for:",n);const t=await l1(_n,n,e);return console.log(" Email sign-in successful"),t.user}catch(t){throw console.error(" Error signing in with email:",t.code,t.message),t}},uI=async(n,e)=>{if(!_n)throw new Error("Firebase is not configured. Please set up Firebase environment variables.");try{console.log(" Attempting email sign-up for:",n);const t=await a1(_n,n,e);return console.log(" Email sign-up successful"),t.user}catch(t){throw console.error(" Error signing up with email:",t.code,t.message),t}},cI=async n=>{if(!_n)throw new Error("Firebase is not configured. Please set up Firebase environment variables.");try{await o1(_n,n)}catch(e){throw console.error("Error sending password reset email:",e),e}},dI=async()=>{if(_n)try{await f1(_n)}catch(n){throw console.error("Error signing out:",n),n}},fI=n=>_n?d1(_n,n):(n(null),()=>{}),Io=()=>_n?_n.currentUser:null,Yv=n=>{switch(n){case"auth/email-already-in-use":return"This email is already registered. Please sign in instead.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/operation-not-allowed":return"Email/Password sign-in is not enabled. Please enable it in Firebase Console under Authentication > Sign-in method.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/popup-closed-by-user":return"Sign-in popup was closed. Please try again.";default:return"An error occurred. Please try again."}},hI=({isOpen:n,onClose:e,initialMode:t="login"})=>{const[s,o]=ue.useState(t),[l,u]=ue.useState(""),[d,p]=ue.useState(""),[f,_]=ue.useState(""),[w,T]=ue.useState(null),[C,M]=ue.useState(null),[k,L]=ue.useState(!1);if(!n)return null;const G=async()=>{L(!0),T(null);try{await aI(),e()}catch(Q){T(Yv(Q.code))}finally{L(!1)}},$=async Q=>{Q.preventDefault(),L(!0),T(null),M(null);try{if(s==="signup"){if(d!==f){T("Passwords do not match."),L(!1);return}if(d.length<6){T("Password must be at least 6 characters."),L(!1);return}await uI(l,d),e()}else s==="login"?(await lI(l,d),e()):s==="reset"&&(await cI(l),M("Password reset email sent! Check your inbox."))}catch(ae){T(Yv(ae.code))}finally{L(!1)}},H=Q=>{o(Q),T(null),M(null)};return S.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md relative overflow-hidden",children:[S.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-6",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:S.jsx(Ar,{className:"w-6 h-6"})}),S.jsxs("h2",{className:"text-2xl font-bold text-white",children:[s==="login"&&"Welcome Back",s==="signup"&&"Create Account",s==="reset"&&"Reset Password"]}),S.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[s==="login"&&"Sign in to access your credits",s==="signup"&&"Get 15 free credits to start",s==="reset"&&"Enter your email to reset password"]})]}),S.jsxs("div",{className:"p-6 space-y-4",children:[s!=="reset"&&S.jsxs(S.Fragment,{children:[S.jsxs("button",{onClick:G,disabled:k,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-800 font-medium py-3 px-4 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[S.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-600"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-gray-800 text-gray-400",children:"or"})})]})]}),S.jsxs("form",{onSubmit:$,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),S.jsx("input",{type:"email",value:l,onChange:Q=>u(Q.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none",placeholder:"you@example.com"})]}),s!=="reset"&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),S.jsx("input",{type:"password",value:d,onChange:Q=>p(Q.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none",placeholder:""})]}),s==="signup"&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm Password"}),S.jsx("input",{type:"password",value:f,onChange:Q=>_(Q.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none",placeholder:""})]}),w&&S.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-300 px-4 py-2 rounded-lg text-sm",children:w}),C&&S.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-300 px-4 py-2 rounded-lg text-sm",children:C}),S.jsx("button",{type:"submit",disabled:k,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-medium py-3 px-4 rounded-lg hover:from-cyan-500 hover:to-blue-500 transition-all disabled:opacity-50",children:k?"Loading...":s==="login"?"Sign In":s==="signup"?"Create Account":"Send Reset Link"})]}),S.jsxs("div",{className:"text-center text-sm text-gray-400 space-y-2",children:[s==="login"&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>H("reset"),className:"text-cyan-400 hover:text-cyan-300 transition-colors",children:"Forgot password?"}),S.jsxs("p",{children:["Don't have an account?"," ",S.jsx("button",{onClick:()=>H("signup"),className:"text-cyan-400 hover:text-cyan-300 transition-colors font-medium",children:"Sign up"})]})]}),s==="signup"&&S.jsxs("p",{children:["Already have an account?"," ",S.jsx("button",{onClick:()=>H("login"),className:"text-cyan-400 hover:text-cyan-300 transition-colors font-medium",children:"Sign in"})]}),s==="reset"&&S.jsx("button",{onClick:()=>H("login"),className:"text-cyan-400 hover:text-cyan-300 transition-colors",children:" Back to sign in"})]})]})]})})},pI=["mail@jaa.cool"],wu=n=>n?pI.includes(n.toLowerCase()):!1,gI=999999,mI=({user:n,credits:e,onBuyCredits:t,onShowInvoices:s,onShowReferrals:o})=>{var T;const[l,u]=ue.useState(!1),d=ue.useRef(null);ue.useEffect(()=>{const C=M=>{d.current&&!d.current.contains(M.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const p=async()=>{try{await dI(),u(!1)}catch(C){console.error("Error signing out:",C)}},f=n.displayName||((T=n.email)==null?void 0:T.split("@")[0])||"User",_=n.photoURL,w=wu(n.email);return S.jsxs("div",{className:"relative",ref:d,children:[S.jsxs("button",{onClick:()=>u(!l),className:"flex items-center gap-2 bg-gray-800/50 hover:bg-gray-700/50 border border-gray-600 rounded-full pl-3 pr-1 py-1 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("span",{className:"text-yellow-400 text-sm",children:""}),S.jsx("span",{className:"text-white font-medium text-sm",children:w?"":e})]}),_?S.jsx("img",{src:_,alt:f,className:"w-8 h-8 rounded-full border-2 border-cyan-400"}):S.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-sm border-2 border-cyan-400",children:f.charAt(0).toUpperCase()})]}),l&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-gray-800 border border-gray-700 rounded-xl shadow-xl overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-700",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[_?S.jsx("img",{src:_,alt:f,className:"w-12 h-12 rounded-full"}):S.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg",children:f.charAt(0).toUpperCase()}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("p",{className:"text-white font-medium truncate",children:f}),S.jsx("p",{className:"text-gray-400 text-sm truncate",children:n.email})]})]}),S.jsx("div",{className:"mt-3 bg-gray-700/50 rounded-lg p-3",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-gray-300 text-sm",children:"Credits"}),S.jsx("span",{className:"text-yellow-400 font-bold",children:w?" (Admin)":e})]})})]}),S.jsxs("div",{className:"p-2 space-y-1",children:[t&&!w&&S.jsxs("button",{onClick:()=>{u(!1),t()},className:"w-full text-left px-4 py-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition-colors flex items-center gap-2",children:[S.jsx("span",{children:""})," Buy Credits"]}),o&&S.jsxs("button",{onClick:()=>{u(!1),o()},className:"w-full text-left px-4 py-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition-colors flex items-center gap-2",children:[S.jsx("span",{children:""})," Get & Gift Free Credits"]}),s&&S.jsxs("button",{onClick:()=>{u(!1),s()},className:"w-full text-left px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Meine Rechnungen"]}),S.jsx("button",{onClick:p,className:"w-full text-left px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors",children:"Sign Out"})]})]})]})},yI=2,vI=6,_I=9,wI=12,EI=10,TI=.19,qc=n=>Math.round(n*(1+TI)*100)/100,po=[{id:"starter",name:"Tester",credits:30,priceNet:2.99,priceGross:qc(2.99),pricePerCredit:.1,logosIncluded:15},{id:"standard",name:"Standard",credits:100,priceNet:7.99,priceGross:qc(7.99),pricePerCredit:.08,savings:20,logosIncluded:50},{id:"pro",name:"Pro",credits:300,priceNet:19.99,priceGross:qc(19.99),pricePerCredit:.067,savings:33,badge:"popular",logosIncluded:150},{id:"premium",name:"Premium",credits:1e3,priceNet:49.99,priceGross:qc(49.99),pricePerCredit:.05,savings:50,badge:"best-value",logosIncluded:500}],Wv=(n,e,t)=>{let s=0;return e==="none"?s+=n*yI:e==="standard"?s+=n*vI:e==="premium"?s+=n*_I:e==="ultra"&&(s+=n*wI),s+=t*EI,s};var SI="clover",XE="https://js.stripe.com",bI="".concat(XE,"/").concat(SI,"/stripe.js"),AI=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,CI=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var RI=function(e){return AI.test(e)||CI.test(e)},xI=function(){for(var e=document.querySelectorAll('script[src^="'.concat(XE,'"]')),t=0;t<e.length;t++){var s=e[t];if(RI(s.src))return s}return null},Xv=function(e){var t="",s=document.createElement("script");s.src="".concat(bI).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},Fl=null,Hc=null,Gc=null,II=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},NI=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},MI=function(e){return Fl!==null?Fl:(Fl=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=xI();if(!(o&&e)){if(!o)o=Xv(e);else if(o&&Gc!==null&&Hc!==null){var l;o.removeEventListener("load",Gc),o.removeEventListener("error",Hc),(l=o.parentNode)===null||l===void 0||l.removeChild(o),o=Xv(e)}}Gc=NI(t,s),Hc=II(s),o.addEventListener("load",Gc),o.addEventListener("error",Hc)}catch(u){s(u);return}}),Fl.catch(function(t){return Fl=null,Promise.reject(t)}))},zl,kI=function(){return zl||(zl=MI(null).catch(function(e){return zl=null,Promise.reject(e)}),zl)};Promise.resolve().then(function(){return kI()}).catch(function(n){console.warn(n)});var mp=function(n,e){return mp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},mp(n,e)};function QE(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mp(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var vd=function(){return vd=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},vd.apply(this,arguments)};function Fa(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function ZE(n,e,t,s){var o=arguments.length,l=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,e,t,s);else for(var d=n.length-1;d>=0;d--)(u=n[d])&&(l=(o<3?u(l):o>3?u(e,t,l):u(e,t))||l);return o>3&&l&&Object.defineProperty(e,t,l),l}function eT(n,e){return function(t,s){e(t,s,n)}}function tT(n,e,t,s,o,l){function u(G){if(G!==void 0&&typeof G!="function")throw new TypeError("Function expected");return G}for(var d=s.kind,p=d==="getter"?"get":d==="setter"?"set":"value",f=!e&&n?s.static?n:n.prototype:null,_=e||(f?Object.getOwnPropertyDescriptor(f,s.name):{}),w,T=!1,C=t.length-1;C>=0;C--){var M={};for(var k in s)M[k]=k==="access"?{}:s[k];for(var k in s.access)M.access[k]=s.access[k];M.addInitializer=function(G){if(T)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(G||null))};var L=(0,t[C])(d==="accessor"?{get:_.get,set:_.set}:_[p],M);if(d==="accessor"){if(L===void 0)continue;if(L===null||typeof L!="object")throw new TypeError("Object expected");(w=u(L.get))&&(_.get=w),(w=u(L.set))&&(_.set=w),(w=u(L.init))&&o.unshift(w)}else(w=u(L))&&(d==="field"?o.unshift(w):_[p]=w)}f&&Object.defineProperty(f,s.name,_),T=!0}function nT(n,e,t){for(var s=arguments.length>2,o=0;o<e.length;o++)t=s?e[o].call(n,t):e[o].call(n);return s?t:void 0}function iT(n){return typeof n=="symbol"?n:"".concat(n)}function sT(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function rT(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Se(n,e,t,s){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function d(_){try{f(s.next(_))}catch(w){u(w)}}function p(_){try{f(s.throw(_))}catch(w){u(w)}}function f(_){_.done?l(_.value):o(_.value).then(d,p)}f((s=s.apply(n,e||[])).next())})}function oT(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(f){return function(_){return p([f,_])}}function p(f){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,f[0]&&(t=0)),t;)try{if(s=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,o=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){t.label=f[1];break}if(f[0]===6&&t.label<l[1]){t.label=l[1],l=f;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(f);break}l[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(_){f=[6,_],o=0}finally{s=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Id=Object.create?(function(n,e,t,s){s===void 0&&(s=t);var o=Object.getOwnPropertyDescriptor(e,t);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,s,o)}):(function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]});function aT(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Id(e,n,t)}function _d(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ag(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,l=[],u;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(u)throw u.error}}return l}function lT(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(ag(arguments[e]));return n}function uT(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var l=arguments[e],u=0,d=l.length;u<d;u++,o++)s[o]=l[u];return s}function cT(n,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return n.concat(l||Array.prototype.slice.call(e))}function Va(n){return this instanceof Va?(this.v=n,this):new Va(n)}function dT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(C){return function(M){return Promise.resolve(M).then(C,w)}}function d(C,M){s[C]&&(o[C]=function(k){return new Promise(function(L,G){l.push([C,k,L,G])>1||p(C,k)})},M&&(o[C]=M(o[C])))}function p(C,M){try{f(s[C](M))}catch(k){T(l[0][3],k)}}function f(C){C.value instanceof Va?Promise.resolve(C.value.v).then(_,w):T(l[0][2],C)}function _(C){p("next",C)}function w(C){p("throw",C)}function T(C,M){C(M),l.shift(),l.length&&p(l[0][0],l[0][1])}}function fT(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,l){e[o]=n[o]?function(u){return(t=!t)?{value:Va(n[o](u)),done:!1}:l?l(u):u}:l}}function hT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _d=="function"?_d(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,p){u=n[l](u),o(d,p,u.done,u.value)})}}function o(l,u,d,p){Promise.resolve(p).then(function(f){l({value:f,done:d})},u)}}function pT(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var DI=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},yp=function(n){return yp=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},yp(n)};function gT(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=yp(n),s=0;s<t.length;s++)t[s]!=="default"&&Id(e,n,t[s]);return DI(e,n),e}function mT(n){return n&&n.__esModule?n:{default:n}}function yT(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}function vT(n,e,t,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(n,t):o?o.value=t:e.set(n,t),t}function _T(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function wT(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:e,dispose:s,async:t})}else t&&n.stack.push({async:!0});return e}var PI=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=n,s.suppressed=e,s};function ET(n){function e(l){n.error=n.hasError?new PI(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var t,s=0;function o(){for(;t=n.stack.pop();)try{if(!t.async&&s===1)return s=0,n.stack.push(t),Promise.resolve().then(o);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(l).then(o,function(u){return e(u),o()})}else s|=1}catch(u){e(u)}if(s===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return o()}function TT(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,o,l,u){return s?e?".jsx":".js":o&&(!l||!u)?t:o+l+"."+u.toLowerCase()+"js"}):n}const UI={__extends:QE,__assign:vd,__rest:Fa,__decorate:ZE,__param:eT,__esDecorate:tT,__runInitializers:nT,__propKey:iT,__setFunctionName:sT,__metadata:rT,__awaiter:Se,__generator:oT,__createBinding:Id,__exportStar:aT,__values:_d,__read:ag,__spread:lT,__spreadArrays:uT,__spreadArray:cT,__await:Va,__asyncGenerator:dT,__asyncDelegator:fT,__asyncValues:hT,__makeTemplateObject:pT,__importStar:gT,__importDefault:mT,__classPrivateFieldGet:yT,__classPrivateFieldSet:vT,__classPrivateFieldIn:_T,__addDisposableResource:wT,__disposeResources:ET,__rewriteRelativeImportExtension:TT},OI=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:wT,get __assign(){return vd},__asyncDelegator:fT,__asyncGenerator:dT,__asyncValues:hT,__await:Va,__awaiter:Se,__classPrivateFieldGet:yT,__classPrivateFieldIn:_T,__classPrivateFieldSet:vT,__createBinding:Id,__decorate:ZE,__disposeResources:ET,__esDecorate:tT,__exportStar:aT,__extends:QE,__generator:oT,__importDefault:mT,__importStar:gT,__makeTemplateObject:pT,__metadata:rT,__param:eT,__propKey:iT,__read:ag,__rest:Fa,__rewriteRelativeImportExtension:TT,__runInitializers:nT,__setFunctionName:sT,__spread:lT,__spreadArray:cT,__spreadArrays:uT,__values:_d,default:UI},Symbol.toStringTag,{value:"Module"})),LI=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class lg extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class BI extends lg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qv extends lg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zv extends lg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vp;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(vp||(vp={}));class VI{constructor(e,{headers:t={},customFetch:s,region:o=vp.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=LI(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Se(this,arguments,void 0,function*(t,s={}){var o;let l,u;try{const{headers:d,method:p,body:f,signal:_,timeout:w}=s;let T={},{region:C}=s;C||(C=this.region);const M=new URL(`${this.url}/${t}`);C&&C!=="any"&&(T["x-region"]=C,M.searchParams.set("forceFunctionRegion",C));let k;f&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",k=f):typeof f=="string"?(T["Content-Type"]="text/plain",k=f):typeof FormData<"u"&&f instanceof FormData?k=f:(T["Content-Type"]="application/json",k=JSON.stringify(f)):k=f;let L=_;w&&(u=new AbortController,l=setTimeout(()=>u.abort(),w),_?(L=u.signal,_.addEventListener("abort",()=>u.abort())):L=u.signal);const G=yield this.fetch(M.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),d),body:k,signal:L}).catch(ae=>{throw new BI(ae)}),$=G.headers.get("x-relay-error");if($&&$==="true")throw new Qv(G);if(!G.ok)throw new Zv(G);let H=((o=G.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),Q;return H==="application/json"?Q=yield G.json():H==="application/octet-stream"||H==="application/pdf"?Q=yield G.blob():H==="text/event-stream"?Q=G:H==="multipart/form-data"?Q=yield G.formData():Q=yield G.text(),{data:Q,error:null,response:G}}catch(d){return{data:null,error:d,response:d instanceof Zv||d instanceof Qv?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var fn={};const za=Wb(OI);var Fc={},zc={},$c={},jc={},Jc={},Kc={},e_;function ST(){if(e_)return Kc;e_=1,Object.defineProperty(Kc,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Kc.default=n,Kc}var t_;function bT(){if(t_)return Jc;t_=1,Object.defineProperty(Jc,"__esModule",{value:!0});const e=za.__importDefault(ST());class t{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var f,_,w,T;let C=null,M=null,k=null,L=p.status,G=p.statusText;if(p.ok){if(this.method!=="HEAD"){const ae=await p.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?M=ae:M=JSON.parse(ae))}const H=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),Q=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");H&&Q&&Q.length>1&&(k=parseInt(Q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(M)&&(M.length>1?(C={code:"PGRST116",details:`Results contain ${M.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},M=null,k=null,L=406,G="Not Acceptable"):M.length===1?M=M[0]:M=null)}else{const H=await p.text();try{C=JSON.parse(H),Array.isArray(C)&&p.status===404&&(M=[],C=null,L=200,G="OK")}catch{p.status===404&&H===""?(L=204,G="No Content"):C={message:H}}if(C&&this.isMaybeSingle&&(!((T=C==null?void 0:C.details)===null||T===void 0)&&T.includes("0 rows"))&&(C=null,L=200,G="OK"),C&&this.shouldThrowOnError)throw new e.default(C)}return{error:C,data:M,count:k,status:L,statusText:G}});return this.shouldThrowOnError||(d=d.catch(p=>{var f,_,w,T,C,M;let k="";const L=p==null?void 0:p.cause;if(L){const G=(f=L==null?void 0:L.message)!==null&&f!==void 0?f:"",$=(_=L==null?void 0:L.code)!==null&&_!==void 0?_:"";k=`${(w=p==null?void 0:p.name)!==null&&w!==void 0?w:"FetchError"}: ${p==null?void 0:p.message}`,k+=`

Caused by: ${(T=L==null?void 0:L.name)!==null&&T!==void 0?T:"Error"}: ${G}`,$&&(k+=` (${$})`),L!=null&&L.stack&&(k+=`
${L.stack}`)}else k=(C=p==null?void 0:p.stack)!==null&&C!==void 0?C:"";return{error:{message:`${(M=p==null?void 0:p.name)!==null&&M!==void 0?M:"FetchError"}: ${p==null?void 0:p.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}}return Jc.default=t,Jc}var n_;function AT(){if(n_)return jc;n_=1,Object.defineProperty(jc,"__esModule",{value:!0});const e=za.__importDefault(bT());class t extends e.default{select(o){let l=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:p=d}={}){const f=p?`${p}.order`:"order",_=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${_?`${_},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(f,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:p=!1,format:f="text"}={}){var _;const w=[o?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,p?"wal":null].filter(Boolean).join("|"),T=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${T}"; options=${w};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return jc.default=t,jc}var i_;function ug(){if(i_)return $c;i_=1,Object.defineProperty($c,"__esModule",{value:!0});const e=za.__importDefault(AT()),t=new RegExp("[,()]");class s extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(p=>typeof p=="string"&&t.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:p}={}){let f="";p==="plain"?f="pl":p==="phrase"?f="ph":p==="websearch"&&(f="w");const _=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${f}fts${_}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const p=d?`${d}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}}return $c.default=s,$c}var s_;function CT(){if(s_)return zc;s_=1,Object.defineProperty(zc,"__esModule",{value:!0});const e=za.__importDefault(ug());class t{constructor(o,{headers:l={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(o,l){const{head:u=!1,count:d}=l??{},p=u?"HEAD":"GET";let f=!1;const _=(o??"*").split("").map(w=>/\s/.test(w)&&!f?"":(w==='"'&&(f=!f),w)).join("");return this.url.searchParams.set("select",_),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var d;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const f=o.reduce((_,w)=>_.concat(Object.keys(w)),[]);if(f.length>0){const _=[...new Set(f)].map(w=>`"${w}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:p=!0}={}){var f;const _="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const w=o.reduce((T,C)=>T.concat(Object.keys(C)),[]);if(w.length>0){const T=[...new Set(w)].map(C=>`"${C}"`);this.url.searchParams.set("columns",T.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(o,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return zc.default=t,zc}var r_;function qI(){if(r_)return Fc;r_=1,Object.defineProperty(Fc,"__esModule",{value:!0});const n=za,e=n.__importDefault(CT()),t=n.__importDefault(ug());class s{constructor(l,{headers:u={},schema:d,fetch:p}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=p}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:p=!1,count:f}={}){var _;let w;const T=new URL(`${this.url}/rpc/${l}`);let C;d||p?(w=d?"HEAD":"GET",Object.entries(u).filter(([k,L])=>L!==void 0).map(([k,L])=>[k,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([k,L])=>{T.searchParams.append(k,L)})):(w="POST",C=u);const M=new Headers(this.headers);return f&&M.set("Prefer",`count=${f}`),new t.default({method:w,url:T,headers:M,schema:this.schemaName,body:C,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return Fc.default=s,Fc}var o_;function HI(){if(o_)return fn;o_=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.PostgrestError=fn.PostgrestBuilder=fn.PostgrestTransformBuilder=fn.PostgrestFilterBuilder=fn.PostgrestQueryBuilder=fn.PostgrestClient=void 0;const n=za,e=n.__importDefault(qI());fn.PostgrestClient=e.default;const t=n.__importDefault(CT());fn.PostgrestQueryBuilder=t.default;const s=n.__importDefault(ug());fn.PostgrestFilterBuilder=s.default;const o=n.__importDefault(AT());fn.PostgrestTransformBuilder=o.default;const l=n.__importDefault(bT());fn.PostgrestBuilder=l.default;const u=n.__importDefault(ST());return fn.PostgrestError=u.default,fn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},fn}var RT=HI();const xT=qp(RT),GI=Yb({__proto__:null,default:xT},[RT]),{PostgrestClient:FI,PostgrestQueryBuilder:U4,PostgrestFilterBuilder:O4,PostgrestTransformBuilder:L4,PostgrestBuilder:B4,PostgrestError:V4}=xT||GI;class zI{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const $I="2.86.0",jI=`realtime-js/${$I}`,IT="1.0.0",JI="2.0.0",a_=IT,_p=1e4,KI=1e3,YI=100;var go;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(go||(go={}));var Kt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Kt||(Kt={}));var Ai;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ai||(Ai={}));var wp;(function(n){n.websocket="websocket"})(wp||(wp={}));var mo;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(mo||(mo={}));class WI{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,t,s){var o,l;const u=e.topic,d=(o=e.ref)!==null&&o!==void 0?o:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",f=e.payload.event,_=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(_).length===0?"":JSON.stringify(_);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+d.length+u.length+f.length+w.length,C=new ArrayBuffer(this.HEADER_LENGTH+T);let M=new DataView(C),k=0;M.setUint8(k++,this.KINDS.userBroadcastPush),M.setUint8(k++,p.length),M.setUint8(k++,d.length),M.setUint8(k++,u.length),M.setUint8(k++,f.length),M.setUint8(k++,w.length),M.setUint8(k++,t),Array.from(p,G=>M.setUint8(k++,G.charCodeAt(0))),Array.from(d,G=>M.setUint8(k++,G.charCodeAt(0))),Array.from(u,G=>M.setUint8(k++,G.charCodeAt(0))),Array.from(f,G=>M.setUint8(k++,G.charCodeAt(0))),Array.from(w,G=>M.setUint8(k++,G.charCodeAt(0)));var L=new Uint8Array(C.byteLength+s.byteLength);return L.set(new Uint8Array(C),0),L.set(new Uint8Array(s),C.byteLength),L.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,l,u,d,p]=s;return t({join_ref:o,ref:l,topic:u,event:d,payload:p})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,o)}}_decodeUserBroadcast(e,t,s){const o=t.getUint8(1),l=t.getUint8(2),u=t.getUint8(3),d=t.getUint8(4);let p=this.HEADER_LENGTH+4;const f=s.decode(e.slice(p,p+o));p=p+o;const _=s.decode(e.slice(p,p+l));p=p+l;const w=s.decode(e.slice(p,p+u));p=p+u;const T=e.slice(p,e.byteLength),C=d===this.JSON_ENCODING?JSON.parse(s.decode(T)):T,M={type:this.BROADCAST_EVENT,event:_,payload:C};return u>0&&(M.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:M}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class NT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Tt||(Tt={}));const l_=(n,e,t={})=>{var s;const o=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=XI(u,n,e,o),l),{}):{}},XI=(n,e,t,s)=>{const o=e.find(d=>d.name===n),l=o==null?void 0:o.type,u=t[n];return l&&!s.includes(l)?MT(l,u):Ep(u)},MT=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return t2(e,t)}switch(n){case Tt.bool:return QI(e);case Tt.float4:case Tt.float8:case Tt.int2:case Tt.int4:case Tt.int8:case Tt.numeric:case Tt.oid:return ZI(e);case Tt.json:case Tt.jsonb:return e2(e);case Tt.timestamp:return n2(e);case Tt.abstime:case Tt.date:case Tt.daterange:case Tt.int4range:case Tt.int8range:case Tt.money:case Tt.reltime:case Tt.text:case Tt.time:case Tt.timestamptz:case Tt.timetz:case Tt.tsrange:case Tt.tstzrange:return Ep(e);default:return Ep(e)}},Ep=n=>n,QI=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ZI=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},e2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},t2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let l;const u=n.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>MT(e,d))}return n},n2=n=>typeof n=="string"?n.replace(" ","T"):n,kT=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class jh{constructor(e,t,s={},o=_p){this.channel=e,this.event=t,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var u_;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(u_||(u_={}));class eu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=eu.syncState(this.state,o,l,u),this.pendingDiffs.forEach(p=>{this.state=eu.syncDiff(this.state,p,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=eu.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,o){const l=this.cloneDeep(e),u=this.transformState(t),d={},p={};return this.map(l,(f,_)=>{u[f]||(p[f]=_)}),this.map(u,(f,_)=>{const w=l[f];if(w){const T=_.map(L=>L.presence_ref),C=w.map(L=>L.presence_ref),M=_.filter(L=>C.indexOf(L.presence_ref)<0),k=w.filter(L=>T.indexOf(L.presence_ref)<0);M.length>0&&(d[f]=M),k.length>0&&(p[f]=k)}else d[f]=_}),this.syncDiff(l,{joins:d,leaves:p},s,o)}static syncDiff(e,t,s,o){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(d,p)=>{var f;const _=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(p),_.length>0){const w=e[d].map(C=>C.presence_ref),T=_.filter(C=>w.indexOf(C.presence_ref)<0);e[d].unshift(...T)}s(d,_,p)}),this.map(u,(d,p)=>{let f=e[d];if(!f)return;const _=p.map(w=>w.presence_ref);f=f.filter(w=>_.indexOf(w.presence_ref)<0),e[d]=f,o(d,f,p),f.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const o=e[s];return"metas"in o?t[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c_;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(c_||(c_={}));var tu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(tu||(tu={}));var ws;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ws||(ws={}));class cg{constructor(e,t={config:{}},s){var o,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new jh(this,Ai.join,this.params,this.timeout),this.rejoinTimer=new NT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ai.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new eu(this),this.broadcastEndpointURL=kT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Kt.closed){const{config:{broadcast:u,presence:d,private:p}}=this.params,f=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(C=>C.filter))!==null&&o!==void 0?o:[],_=!!this.bindings[tu.PRESENCE]&&this.bindings[tu.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},T={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:_}),postgres_changes:f,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(C=>e==null?void 0:e(ws.CHANNEL_ERROR,C)),this._onClose(()=>e==null?void 0:e(ws.CLOSED)),this.updateJoinPayload(Object.assign({config:T},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:C})=>{var M;if(this.socket.setAuth(),C===void 0){e==null||e(ws.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,L=(M=k==null?void 0:k.length)!==null&&M!==void 0?M:0,G=[];for(let $=0;$<L;$++){const H=k[$],{filter:{event:Q,schema:ae,table:ne,filter:D}}=H,I=C&&C[$];if(I&&I.event===Q&&I.schema===ae&&I.table===ne&&I.filter===D)G.push(Object.assign(Object.assign({},H),{id:I.id}));else{this.unsubscribe(),this.state=Kt.errored,e==null||e(ws.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,e&&e(ws.SUBSCRIBED);return}}).receive("error",C=>{this.state=Kt.errored,e==null||e(ws.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ws.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Kt.joined&&e===tu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let p=d.statusText;try{const f=await d.json();p=f.error||f.message||p}catch{}return Promise.reject(new Error(p))}async send(e,t={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=f.body)===null||o===void 0?void 0:o.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,p;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),f.receive("ok",()=>l("ok")),f.receive("error",()=>l("error")),f.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Kt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ai.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new jh(this,Ai.leave,{},e),s.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(l),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new jh(this,e,t,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>YI){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var o,l;const u=e.toLocaleLowerCase(),{close:d,error:p,leave:f,join:_}=Ai;if(s&&[d,p,f,_].indexOf(u)>=0&&s!==this._joinRef())return;let T=this._onMessage(u,t,s);if(t&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(C=>{var M,k,L;return((M=C.filter)===null||M===void 0?void 0:M.event)==="*"||((L=(k=C.filter)===null||k===void 0?void 0:k.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===u}).map(C=>C.callback(T,s)):(l=this.bindings[u])===null||l===void 0||l.filter(C=>{var M,k,L,G,$,H;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in C){const Q=C.id,ae=(M=C.filter)===null||M===void 0?void 0:M.event;return Q&&((k=t.ids)===null||k===void 0?void 0:k.includes(Q))&&(ae==="*"||(ae==null?void 0:ae.toLocaleLowerCase())===((L=t.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const Q=($=(G=C==null?void 0:C.filter)===null||G===void 0?void 0:G.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return Q==="*"||Q===((H=t==null?void 0:t.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===u}).map(C=>{if(typeof T=="object"&&"ids"in T){const M=T.data,{schema:k,table:L,commit_timestamp:G,type:$,errors:H}=M;T=Object.assign(Object.assign({},{schema:k,table:L,commit_timestamp:G,eventType:$,new:{},old:{},errors:H}),this._getPayloadRecords(M))}C.callback(T,s)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const o=e.toLocaleLowerCase(),l={type:o,filter:t,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&cg.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ai.close,{},e)}_onError(e){this._on(Ai.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=l_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=l_(e.columns,e.old_record)),t}}const Jh=()=>{},Yc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i2=[1e3,2e3,5e3,1e4],s2=1e4,r2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class o2{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_p,this.transport=null,this.heartbeatIntervalMs=Yc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jh,this.ref=0,this.reconnectTimer=null,this.vsn=a_,this.logger=Jh,this.conn=null,this.sendBuffer=[],this.serializer=new WI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${wp.websocket}`,this.httpEndpoint=kT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zI.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case go.connecting:return mo.Connecting;case go.open:return mo.Open;case go.closing:return mo.Closing;default:return mo.Closed}}isConnected(){return this.connectionState()===mo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new cg(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:o,ref:l}=e,u=()=>{this.encode(e,d=>{var p;(p=this.conn)===null||p===void 0||p.send(d)})};this.log("push",`${t} ${s} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(KI,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Yc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:u}=t,d=u?`(${u})`:"",p=l.status||"";this.log("receive",`${p} ${s} ${o} ${d}`.trim(),l),this.channels.filter(f=>f._isMember(s)).forEach(f=>f._trigger(o,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===go.open||this.conn.readyState===go.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ai.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${s}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([r2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const o={access_token:t,version:jI};t&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Ai.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new NT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,o,l,u,d,p,f,_,w,T,C;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:_p,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:Yc.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Jh,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:a_,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:(M=>i2[M-1]||s2),this.vsn){case IT:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:((M,k)=>k(JSON.stringify(M))),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:((M,k)=>k(JSON.parse(M)));break;case JI:this.encode=(T=e==null?void 0:e.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(C=e==null?void 0:e.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Nd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class a2 extends Nd{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tp extends Nd{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const dg=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),l2=()=>Response,Sp=n=>{if(Array.isArray(n))return n.map(t=>Sp(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const o=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Sp(s)}),e},u2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},c2=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),Kh=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},d2=(n,e,t)=>Se(void 0,void 0,void 0,function*(){const s=yield l2();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(o=>{const l=n.status||500,u=(o==null?void 0:o.statusCode)||l+"";e(new a2(Kh(o),l,u))}).catch(o=>{e(new Tp(Kh(o),o))}):e(new Tp(Kh(n),n))}),f2=(n,e,t,s)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?o:(u2(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),t))};function Eu(n,e,t,s,o,l){return Se(this,void 0,void 0,function*(){return new Promise((u,d)=>{n(t,f2(e,s,o,l)).then(p=>{if(!p.ok)throw p;return s!=null&&s.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>d2(p,d,s))})})}function au(n,e,t,s){return Se(this,void 0,void 0,function*(){return Eu(n,"GET",e,t,s)})}function bi(n,e,t,s,o){return Se(this,void 0,void 0,function*(){return Eu(n,"POST",e,s,o,t)})}function bp(n,e,t,s,o){return Se(this,void 0,void 0,function*(){return Eu(n,"PUT",e,s,o,t)})}function h2(n,e,t,s){return Se(this,void 0,void 0,function*(){return Eu(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function fg(n,e,t,s,o){return Se(this,void 0,void 0,function*(){return Eu(n,"DELETE",e,s,o,t)})}class p2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nt(e))return{data:null,error:e};throw e}})}}var DT;class g2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[DT]="BlobDownloadBuilder",this.promise=null}asStream(){return new p2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nt(e))return{data:null,error:e};throw e}})}}DT=Symbol.toStringTag;const m2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},d_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class y2{constructor(e,t={},s,o){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=dg(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,o){return Se(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},d_),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),p&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(p))):(l=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,p&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o!=null&&o.headers&&(d=Object.assign(Object.assign({},d),o.headers));const f=this._removeEmptyFolders(t),_=this._getFinalPath(f),w=yield(e=="PUT"?bp:bi)(this.fetch,`${this.url}/object/${_}`,l,Object.assign({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:f,id:w.Id,fullPath:w.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Nt(l))return{data:null,error:l};throw l}})}upload(e,t,s){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,o){return Se(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let p;const f=Object.assign({upsert:d_.upsert},o),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",f.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",f.cacheControl)):(p=s,_["cache-control"]=`max-age=${f.cacheControl}`,_["content-type"]=f.contentType);const w=yield bp(this.fetch,d.toString(),p,{headers:_});return{data:{path:l,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Nt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,t){return Se(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const l=yield bi(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new Nd("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Se(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Nt(o))return{data:null,error:o};throw o}})}copy(e,t,s){return Se(this,void 0,void 0,function*(){try{return{data:{path:(yield bi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Nt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,s){return Se(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield bi(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Nt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,s){return Se(this,void 0,void 0,function*(){try{const o=yield bi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Nt(o))return{data:null,error:o};throw o}})}download(e,t){const o=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=l?`?${l}`:"",d=this._getFinalPath(e),p=()=>au(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new g2(p,this.shouldThrowOnError)}info(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield au(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Sp(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nt(s))return{data:null,error:s};throw s}})}exists(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield h2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nt(s)&&s instanceof Tp){const o=s.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),o=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&o.push(l);const d=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});p!==""&&o.push(p);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${f}`)}}}remove(e){return Se(this,void 0,void 0,function*(){try{return{data:yield fg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Se(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},m2),t),{prefix:e||""});return{data:yield bi(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Nt(o))return{data:null,error:o};throw o}})}listV2(e,t){return Se(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield bi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const PT="2.86.0",UT={"X-Client-Info":`storage-js/${PT}`};class v2{constructor(e,t={},s,o){this.shouldThrowOnError=!1;const l=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},UT),t),this.fetch=dg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Se(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield au(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}createBucket(e){return Se(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield bi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Nt(o))return{data:null,error:o};throw o}})}updateBucket(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield fg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var lu=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function _2(n,e,t){const s=new URL(e,n);if(t)for(const[o,l]of Object.entries(t))l!==void 0&&s.searchParams.set(o,l);return s.toString()}async function w2(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function E2(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:o,body:l,headers:u}){const d=_2(n.baseUrl,s,o),p=await w2(n.auth),f=await e(d,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...p,...u},body:l?JSON.stringify(l):void 0}),_=await f.text(),w=(f.headers.get("content-type")||"").includes("application/json"),T=w&&_?JSON.parse(_):_;if(!f.ok){const C=w?T:void 0,M=C==null?void 0:C.error;throw new lu((M==null?void 0:M.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:M==null?void 0:M.type,icebergCode:M==null?void 0:M.code,details:C})}return{status:f.status,headers:f.headers,data:T}}}}function Wc(n){return n.join("")}var T2=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Wc(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wc(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wc(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wc(n.namespace)}`}),!0}catch(e){if(e instanceof lu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof lu&&t.status===409)return;throw t}}};function ya(n){return n.join("")}var S2=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ya(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ya(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ya(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ya(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ya(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ya(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof lu&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof lu&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},b2=class{constructor(n){var s;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=E2({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(s=n.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new T2(this.client,e),this.tableOps=new S2(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class A2{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},UT),t),this.fetch=dg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}listBuckets(e){return Se(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield au(this.fetch,o,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield fg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}from(e){if(!c2(e))throw new Nd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new b2({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Se(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const hg={"X-Client-Info":`storage-js/${PT}`,"Content-Type":"application/json"};class OT extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function zn(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Yh extends OT{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class C2 extends OT{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var f_;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(f_||(f_={}));const pg=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),R2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},h_=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),x2=(n,e,t)=>Se(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const o=n.status||500,l=n;if(typeof l.json=="function")l.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";e(new Yh(h_(u),o,d))}).catch(()=>{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new Yh(d,o,u))});else{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new Yh(d,o,u))}}else e(new C2(h_(n),n))}),I2=(n,e,t,s)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return s?(R2(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),t)):o};function N2(n,e,t,s,o,l){return Se(this,void 0,void 0,function*(){return new Promise((u,d)=>{n(t,I2(e,s,o,l)).then(p=>{if(!p.ok)throw p;if(s!=null&&s.noResolveJson)return p;const f=p.headers.get("content-type");return!f||!f.includes("application/json")?{}:p.json()}).then(p=>u(p)).catch(p=>x2(p,d,s))})})}function $n(n,e,t,s,o){return Se(this,void 0,void 0,function*(){return N2(n,"POST",e,s,o,t)})}class M2{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hg),t),this.fetch=pg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield $n(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zn(s))return{data:null,error:s};throw s}})}listIndexes(e){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Se(this,void 0,void 0,function*(){try{return{data:(yield $n(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zn(s))return{data:null,error:s};throw s}})}}class k2{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hg),t),this.fetch=pg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield $n(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}getVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}listVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield $n(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}queryVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield $n(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}}class D2{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hg),t),this.fetch=pg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield $n(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}listBuckets(){return Se(this,arguments,void 0,function*(e={}){try{return{data:yield $n(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield $n(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}}class P2 extends D2{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new U2(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Se(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Se(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Se(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Se(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class U2 extends M2{constructor(e,t,s,o){super(e,t,o),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Se(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Se(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Se(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Se(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new O2(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class O2 extends k2{constructor(e,t,s,o,l){super(e,t,l),this.vectorBucketName=s,this.indexName=o}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Se(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Se(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Se(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Se(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Se(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class L2 extends v2{constructor(e,t={},s,o){super(e,t,s,o)}from(e){return new y2(this.url,this.headers,e,this.fetch)}get vectors(){return new P2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new A2(this.url+"/iceberg",this.headers,this.fetch)}}const B2="2.86.0";let Kl="";typeof Deno<"u"?Kl="deno":typeof document<"u"?Kl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kl="react-native":Kl="node";const V2={"X-Client-Info":`supabase-js-${Kl}/${B2}`},q2={headers:V2},H2={schema:"public"},G2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},F2={},z2=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),$2=()=>Headers,j2=(n,e,t)=>{const s=z2(t),o=$2();return async(l,u)=>{var d;const p=(d=await e())!==null&&d!==void 0?d:n;let f=new o(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${p}`),s(l,Object.assign(Object.assign({},u),{headers:f}))}};function J2(n){return n.endsWith("/")?n:n+"/"}function K2(n,e){var t,s;const{db:o,auth:l,realtime:u,global:d}=n,{db:p,auth:f,realtime:_,global:w}=e,T={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},f),l),realtime:Object.assign(Object.assign({},_),u),storage:{},global:Object.assign(Object.assign(Object.assign({},w),d),{headers:Object.assign(Object.assign({},(t=w==null?void 0:w.headers)!==null&&t!==void 0?t:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return n.accessToken?T.accessToken=n.accessToken:delete T.accessToken,T}function Y2(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(J2(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const LT="2.86.0",Aa=30*1e3,Ap=3,Wh=Ap*Aa,W2="http://localhost:9999",X2="supabase.auth.token",Q2={"X-Client-Info":`gotrue-js/${LT}`},Cp="X-Supabase-Api-Version",BT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Z2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eN=600*1e3;class uu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function xe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class tN extends uu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function nN(n){return xe(n)&&n.name==="AuthApiError"}class yo extends uu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Cr extends uu{constructor(e,t,s,o){super(e,s,o),this.name=t,this.status=s}}class Gn extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iN(n){return xe(n)&&n.name==="AuthSessionMissingError"}class va extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xc extends Cr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qc extends Cr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sN(n){return xe(n)&&n.name==="AuthImplicitGrantRedirectError"}class p_ extends Cr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rp extends Cr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Xh(n){return xe(n)&&n.name==="AuthRetryableFetchError"}class g_ extends Cr{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class xp extends Cr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),m_=` 	
\r=`.split(""),rN=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<m_.length;e+=1)n[m_[e].charCodeAt(0)]=-2;for(let e=0;e<wd.length;e+=1)n[wd[e].charCodeAt(0)]=e;return n})();function y_(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(wd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(wd[s]),e.queuedBits-=6}}function VT(n,e,t){const s=rN[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function v_(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{lN(u,s,t)};for(let u=0;u<n.length;u+=1)VT(n.charCodeAt(u),o,l);return e.join("")}function oN(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function aN(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}oN(s,e)}}function lN(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Da(n){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)VT(n.charCodeAt(o),t,s);return new Uint8Array(e)}function uN(n){const e=[];return aN(n,t=>e.push(t)),new Uint8Array(e)}function wo(n){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};return n.forEach(o=>y_(o,t,s)),y_(null,t,s),e.join("")}function cN(n){return Math.round(Date.now()/1e3)+n}function dN(){return Symbol("auth-callback")}const on=()=>typeof window<"u"&&typeof document<"u",lo={tested:!1,writable:!1},qT=()=>{if(!on())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lo.tested)return lo.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),lo.tested=!0,lo.writable=!0}catch{lo.tested=!0,lo.writable=!1}return lo.writable};function fN(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return t.searchParams.forEach((s,o)=>{e[o]=s}),e}const HT=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),hN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ca=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},uo=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pr=async(n,e)=>{await n.removeItem(e)};class Md{constructor(){this.promise=new Md.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Md.promiseConstructor=Promise;function Qh(n){const e=n.split(".");if(e.length!==3)throw new xp("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Z2.test(e[s]))throw new xp("JWT not in base64url format");return{header:JSON.parse(v_(e[0])),payload:JSON.parse(v_(e[1])),signature:Da(e[2]),raw:{header:e[0],payload:e[1]}}}async function pN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function gN(n,e){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await n(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function mN(n){return("0"+n.toString(16)).substr(-2)}function yN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let o="";for(let l=0;l<56;l++)o+=t.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,mN).join("")}async function vN(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function _N(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await vN(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _a(n,e,t=!1){const s=yN();let o=s;t&&(o+="/PASSWORD_RECOVERY"),await Ca(n,`${e}-code-verifier`,o);const l=await _N(s);return[l,s===l?"plain":"s256"]}const wN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EN(n){const e=n.headers.get(Cp);if(!e||!e.match(wN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function TN(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function SN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wa(n){if(!bN.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AN(n,e){return new Proxy(n,{get:(t,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,o)}})}function __(n){return JSON.parse(JSON.stringify(n))}const fo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),CN=[502,503,504];async function w_(n){var e;if(!hN(n))throw new Rp(fo(n),0);if(CN.includes(n.status))throw new Rp(fo(n),n.status);let t;try{t=await n.json()}catch(l){throw new yo(fo(l),l)}let s;const o=EN(n);if(o&&o.getTime()>=BT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new g_(fo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Gn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new g_(fo(t),n.status,t.weak_password.reasons);throw new tN(fo(t),n.status||500,s)}const RN=(n,e,t,s)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),t))};async function De(n,e,t,s){var o;const l=Object.assign({},s==null?void 0:s.headers);l[Cp]||(l[Cp]=BT["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(o=s==null?void 0:s.query)!==null&&o!==void 0?o:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await xN(n,e,t+d,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(p):{data:Object.assign({},p),error:null}}async function xN(n,e,t,s,o,l){const u=RN(e,s,o,l);let d;try{d=await n(t,Object.assign({},u))}catch(p){throw console.error(p),new Rp(fo(p),0)}if(d.ok||await w_(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(p){await w_(p)}}function Si(n){var e;let t=null;MN(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=cN(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function E_(n){const e=Si(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function _r(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function IN(n){return{data:n,error:null}}function NN(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:l}=n,u=Fa(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:l},p=Object.assign({},u);return{data:{properties:d,user:p},error:null}}function T_(n){return n}function MN(n){return n.access_token&&n.refresh_token&&n.expires_in}const ep=["global","local","others"];class kN{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=HT(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=ep[0]){if(ep.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ep.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:_r})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Fa(e,["options"]),o=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(o.new_email=s==null?void 0:s.newEmail,delete o.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:NN,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(xe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_r})}catch(t){if(xe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,o,l,u,d,p;try{const f={nextPage:null,lastPage:0,total:0},_=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:T_});if(_.error)throw _.error;const w=await _.json(),T=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,C=(p=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(M=>{const k=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(M.split(";")[1].split("=")[1]);f[`${L}Page`]=k}),f.total=parseInt(T)),{data:Object.assign(Object.assign({},w),f),error:null}}catch(f){if(xe(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){wa(e);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_r})}catch(t){if(xe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wa(e);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:_r})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){wa(e);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:_r})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){wa(e.userId);try{const{data:t,error:s}=await De(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:s}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wa(e.userId),wa(e.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,o,l,u,d,p;try{const f={nextPage:null,lastPage:0,total:0},_=await De(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:T_});if(_.error)throw _.error;const w=await _.json(),T=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,C=(p=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(M=>{const k=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(M.split(";")[1].split("=")[1]);f[`${L}Page`]=k}),f.total=parseInt(T)),{data:Object.assign(Object.assign({},w),f),error:null}}catch(f){if(xe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await De(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await De(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await De(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}}function S_(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Ea={debug:!!(globalThis&&qT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class DN extends GT{}async function PN(n,e,t){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new DN(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ea.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function UN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function FT(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function ON(n){return parseInt(n,16)}function LN(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function BN(n){var e;const{chainId:t,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:p,resources:f,scheme:_,uri:w,version:T}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const C=FT(n.address),M=_?`${_}://${s}`:s,k=n.statement?`${n.statement}
`:"",L=`${M} wants you to sign in with your Ethereum account:
${C}

${k}`;let G=`URI: ${w}
Version: ${T}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(G+=`
Expiration Time: ${o.toISOString()}`),d&&(G+=`
Not Before: ${d.toISOString()}`),p&&(G+=`
Request ID: ${p}`),f){let $=`
Resources:`;for(const H of f){if(!H||typeof H!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${H}`);$+=`
- ${H}`}G+=$}return`${L}
${G}`}class $t extends Error{constructor({message:e,code:t,cause:s,name:o}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class Ed extends $t{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function VN({error:n,options:e}){var t,s,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new $t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(zT(u)){if(l.rp.id!==u)return new $t({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function qN({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new $t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(zT(s)){if(t.rpId!==s)return new $t({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class HN{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const GN=new HN;function FN(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,o=Fa(n,["challenge","user","excludeCredentials"]),l=Da(e).buffer,u=Object.assign(Object.assign({},t),{id:Da(t.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:l,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let p=0;p<s.length;p++){const f=s[p];d.excludeCredentials[p]=Object.assign(Object.assign({},f),{id:Da(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function zN(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=Fa(n,["challenge","allowCredentials"]),o=Da(e).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Da(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function $N(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:wo(new Uint8Array(n.response.attestationObject)),clientDataJSON:wo(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:wo(new Uint8Array(o.authenticatorData)),clientDataJSON:wo(new Uint8Array(o.clientDataJSON)),signature:wo(new Uint8Array(o.signature)),userHandle:o.userHandle?wo(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zT(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function b_(){var n,e;return!!(on()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function JN(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:VN({error:e,options:n})}}}async function KN(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:qN({error:e,options:n})}}}const YN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},WN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Td(...n){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of n)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(t(u))s[l]=u;else if(e(u)){const d=s[l];e(d)?s[l]=Td(d,u):s[l]=Td(u)}else s[l]=u}return s}function XN(n,e){return Td(YN,n,e||{})}function QN(n,e){return Td(WN,n,e||{})}class ZN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:o},l){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const p=o??GN.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:f}=u.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${s}`),f.displayName||(f.displayName=f.name)}switch(u.webauthn.type){case"create":{const f=XN(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:_,error:w}=await JN({publicKey:f,signal:p});return _?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:w}}case"request":{const f=QN(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:_,error:w}=await KN(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:f,signal:p}));return _?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:w}}}}catch(u){return xe(u)?{data:null,error:u}:{data:null,error:new yo("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new uu("rpId is required for WebAuthn authentication")};try{if(!b_())return{data:null,error:new yo("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:o},{request:l});if(!u)return{data:null,error:d};const{webauthn:p}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:p.type,rpId:t,rpOrigins:s,credential_response:p.credential_response}})}catch(u){return xe(u)?{data:null,error:u}:{data:null,error:new yo("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new uu("rpId is required for WebAuthn registration")};try{if(!b_())return{data:null,error:new yo("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(_=>{var w;return(w=_.data)===null||w===void 0?void 0:w.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_==null?void 0:_.id}):void 0),{data:null,error:d};const{data:p,error:f}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:o},{create:l});return p?this._verify({factorId:u.id,challengeId:p.challengeId,webauthn:{rpId:t,rpOrigins:s,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:f}}catch(u){return xe(u)?{data:null,error:u}:{data:null,error:new yo("Unexpected error in register",u)}}}}UN();const eM={url:W2,storageKey:X2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Q2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function A_(n,e,t){return await t()}const Ta={};class cu{get jwks(){var e,t;return(t=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},eM),e);if(this.storageKey=l.storageKey,this.instanceID=(t=cu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,cu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&on()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new kN({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=HT(l.fetch),this.lock=l.lock||A_,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:on()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=PN:this.lock=A_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ZN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:qT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=S_(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=S_(this.memoryStorage)),on()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${LT}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(on()&&(t=fN(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),on()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),sN(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xe(t)?this._returnResult({error:t}):this._returnResult({error:new yo("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,o;try{const l=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Si}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const p=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:f,session:p},error:null})}catch(l){if(xe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,s,o;try{let l;if("email"in e){const{email:_,password:w,options:T}=e;let C=null,M=null;this.flowType==="pkce"&&([C,M]=await _a(this.storage,this.storageKey)),l=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:_,password:w,data:(t=T==null?void 0:T.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:C,code_challenge_method:M},xform:Si})}else if("phone"in e){const{phone:_,password:w,options:T}=e;l=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:w,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},channel:(o=T==null?void 0:T.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:Si})}else throw new Xc("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const p=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:f,session:p},error:null})}catch(l){if(xe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:d}=e;t=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:E_})}else if("phone"in e){const{phone:l,password:u,options:d}=e;t=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:E_})}else throw new Xc("You must provide either an email or phone number and a password");const{data:s,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new va;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(t){if(xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,o,l,u,d,p,f,_,w,T;let C,M;if("message"in e)C=e.message,M=e.signature;else{const{chain:k,wallet:L,statement:G,options:$}=e;let H;if(on())if(typeof L=="object")H=L;else{const x=window;if("ethereum"in x&&typeof x.ethereum=="object"&&"request"in x.ethereum&&typeof x.ethereum.request=="function")H=x.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=L}const Q=new URL((t=$==null?void 0:$.url)!==null&&t!==void 0?t:window.location.href),ae=await H.request({method:"eth_requestAccounts"}).then(x=>x).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ae||ae.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ne=FT(ae[0]);let D=(s=$==null?void 0:$.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!D){const x=await H.request({method:"eth_chainId"});D=ON(x)}const I={domain:Q.host,address:ne,statement:G,uri:Q.href,version:"1",chainId:D,nonce:(o=$==null?void 0:$.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=$==null?void 0:$.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=$==null?void 0:$.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(p=$==null?void 0:$.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(f=$==null?void 0:$.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(_=$==null?void 0:$.signInWithEthereum)===null||_===void 0?void 0:_.resources};C=BN(I),M=await H.request({method:"personal_sign",params:[LN(C),ne]})}try{const{data:k,error:L}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:M},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Si});if(L)throw L;if(!k||!k.session||!k.user){const G=new va;return this._returnResult({data:{user:null,session:null},error:G})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:L})}catch(k){if(xe(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var t,s,o,l,u,d,p,f,_,w,T,C;let M,k;if("message"in e)M=e.message,k=e.signature;else{const{chain:L,wallet:G,statement:$,options:H}=e;let Q;if(on())if(typeof G=="object")Q=G;else{const ne=window;if("solana"in ne&&typeof ne.solana=="object"&&("signIn"in ne.solana&&typeof ne.solana.signIn=="function"||"signMessage"in ne.solana&&typeof ne.solana.signMessage=="function"))Q=ne.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=G}const ae=new URL((t=H==null?void 0:H.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in Q&&Q.signIn){const ne=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H==null?void 0:H.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),$?{statement:$}:null));let D;if(Array.isArray(ne)&&ne[0]&&typeof ne[0]=="object")D=ne[0];else if(ne&&typeof ne=="object"&&"signedMessage"in ne&&"signature"in ne)D=ne;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)M=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),k=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${ae.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${(o=(s=H==null?void 0:H.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=H==null?void 0:H.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((u=H==null?void 0:H.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((d=H==null?void 0:H.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((p=H==null?void 0:H.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((f=H==null?void 0:H.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((w=(_=H==null?void 0:H.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||w===void 0)&&w.length?["Resources",...H.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const ne=await Q.signMessage(new TextEncoder().encode(M),"utf8");if(!ne||!(ne instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=ne}}try{const{data:L,error:G}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:wo(k)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Si});if(G)throw G;if(!L||!L.session||!L.user){const $=new va;return this._returnResult({data:{user:null,session:null},error:$})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:G})}catch(L){if(xe(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async _exchangeCodeForSession(e){const t=await uo(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(t??"").split("/");try{const{data:l,error:u}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Si});if(await pr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new va;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(xe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:o,access_token:l,nonce:u}=e,d=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Si}),{data:p,error:f}=d;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!p||!p.session||!p.user){const _=new va;return this._returnResult({data:{user:null,session:null},error:_})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:f})}catch(t){if(xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,o,l,u;try{if("email"in e){const{email:d,options:p}=e;let f=null,_=null;this.flowType==="pkce"&&([f,_]=await _a(this.storage,this.storageKey));const{error:w}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},create_user:(s=p==null?void 0:p.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:_},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:d,options:p}=e,{data:f,error:_}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(u=p==null?void 0:p.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:_})}throw new Xc("You must provide either an email or phone number.")}catch(d){if(xe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,s;try{let o,l;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Si});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,f=u.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:f,session:p},error:null})}catch(o){if(xe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,s,o,l,u;try{let d=null,p=null;this.flowType==="pkce"&&([d,p]=await _a(this.storage,this.storageKey));const f=await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:p}),headers:this.headers,xform:IN});return!((l=f.data)===null||l===void 0)&&l.url&&on()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(d){if(xe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Gn;const{error:o}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(xe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:l}=e,{error:u}=await De(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:o,options:l}=e,{data:u,error:d}=await De(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Xc("You must provide either an email or phone number and a type")}catch(t){if(xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Wh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await uo(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Zh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=AN(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_r}):await this._useSession(async t=>{var s,o,l;const{data:u,error:d}=t;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gn}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:_r})})}catch(t){if(xe(t))return iN(t)&&(await this._removeSession(),await pr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new Gn;const u=o.session;let d=null,p=null;this.flowType==="pkce"&&e.email!=null&&([d,p]=await _a(this.storage,this.storageKey));const{data:f,error:_}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:p}),jwt:u.access_token,xform:_r});if(_)throw _;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(xe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gn;const t=Date.now()/1e3;let s=t,o=!0,l=null;const{payload:u}=Qh(e.access_token);if(u.exp&&(s=u.exp,o=s<=t),o){const{data:d,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(xe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Gn;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!on())throw new Qc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new p_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qc("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new p_("No code detected.");const{data:$,error:H}=await this._exchangeCodeForSession(e.code);if(H)throw H;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:p,token_type:f}=e;if(!l||!d||!u||!f)throw new Qc("No session defined in URL");const _=Math.round(Date.now()/1e3),w=parseInt(d);let T=_+w;p&&(T=parseInt(p));const C=T-_;C*1e3<=Aa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${w}s`);const M=T-w;_-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,T,_):_-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,T,_);const{data:k,error:L}=await this._getUser(l);if(L)throw L;const G={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:w,expires_at:T,refresh_token:u,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:G,redirectType:e.type},error:null})}catch(s){if(xe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await uo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({error:l});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(nN(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await pr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=dN(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,o;try{const{data:{session:l},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await _a(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:o}=await this._useSession(async l=>{var u,d,p,f,_;const{data:w,error:T}=l;if(T)throw T;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",C,{headers:this.headers,jwt:(_=(f=w.session)===null||f===void 0?void 0:f.access_token)!==null&&_!==void 0?_:void 0})});if(o)throw o;return on()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(xe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:o,data:{session:l}}=t;if(o)throw o;const{options:u,provider:d,token:p,access_token:f,nonce:_}=e,w=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:p,access_token:f,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Si}),{data:T,error:C}=w;return C?this._returnResult({data:{user:null,session:null},error:C}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new va}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:C}))}catch(o){if(xe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,o;const{data:l,error:u}=t;if(u)throw u;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await gN(async o=>(o>0&&await pN(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Si})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Xh(l)&&Date.now()+u-s<Aa})}catch(s){if(this._debug(t,"error",s),xe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),on()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await uo(this.storage,this.storageKey);if(o&&this.userStorage){let u=await uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Ca(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Zh()}else if(o&&!o.user&&!o.user){const u=await uo(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await pr(this.storage,this.storageKey+"-user"),await Ca(this.storage,this.storageKey,o)):o.user=Zh()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wh;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Wh}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Xh(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Md;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Gn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),xe(l)){const u={data:null,error:l};return Xh(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(p){l.push(p)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Ca(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const l=__(o);await Ca(this.storage,this.storageKey,l)}else{const o=__(t);await Ca(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await pr(this.storage,this.storageKey),await pr(this.storage,this.storageKey+"-code-verifier"),await pr(this.storage,this.storageKey+"-user"),this.userStorage&&await pr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&on()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Aa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/Aa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Aa}ms, refresh threshold is ${Ap} ticks`),o<=Ap&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof GT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!on()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const o=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await _a(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;return l?this._returnResult({data:null,error:l}):await De(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,o;const{data:l,error:u}=t;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:f}=await De(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&p.type==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$N(e.webauthn.credential_response):jN(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:p}=await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:p}))})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:FN(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:zN(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Qh(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(_=>_.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?await De(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Gn})})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Gn});const u=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&on()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(xe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Gn});const u=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&on()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(xe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await De(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Gn})})}catch(e){if(xe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?(await De(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Gn})})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+eN>o)return s;const{data:l,error:u}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:C,error:M}=await this.getSession();if(M||!C.session)return this._returnResult({data:null,error:M});s=C.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:p}}=Qh(s);t!=null&&t.allowExpired||TN(l.exp);const f=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:C}=await this.getUser(s);if(C)throw C;return{data:{claims:l,header:o,signature:u},error:null}}const _=SN(o.alg),w=await crypto.subtle.importKey("jwk",f,_,!0,["verify"]);if(!await crypto.subtle.verify(_,w,u,uN(`${d}.${p}`)))throw new xp("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(s){if(xe(s))return this._returnResult({data:null,error:s});throw s}}}cu.nextInstanceID={};const tM=cu;class nM extends tM{constructor(e){super(e)}}class iM{constructor(e,t,s){var o,l,u;this.supabaseUrl=e,this.supabaseKey=t;const d=Y2(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const p=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:H2,realtime:F2,auth:Object.assign(Object.assign({},G2),{storageKey:p}),global:q2},_=K2(s??{},f);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(w,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=_.auth)!==null&&u!==void 0?u:{},this.headers,_.global.fetch),this.fetch=j2(t,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new FI(new URL("rest/v1",d).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new L2(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new VI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:o,userStorage:l,storageKey:u,flowType:d,lock:p,debug:f,throwOnError:_},w,T){const C={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nM({url:this.authUrl.href,headers:Object.assign(Object.assign({},C),w),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:o,userStorage:l,flowType:d,lock:p,debug:f,throwOnError:_,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(M=>M.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new o2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sM=(n,e,t)=>new iM(n,e,t);function rM(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}rM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oM="https://ohxhkpcwvvodrmkaixwb.supabase.co",aM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9oeGhrcGN3dnZvZHJta2FpeHdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDk2ODksImV4cCI6MjA4MDA4NTY4OX0.g4_ZLBgI2pZGGk0jq4w7gXPq9N8dnHZQ7F3CedgzquY",Nn=sM(oM,aM),lM=async(n,e,t)=>{const s=po.find(o=>o.id===n);if(!s)return{error:"Invalid package selected"};try{const{data:o,error:l}=await Nn.functions.invoke("create-checkout",{body:{packageId:n,userId:e,priceInCents:Math.round(s.priceGross*100),credits:s.credits,packageName:s.name,referralCodeId:t||null}});return l?(console.error("Checkout error:",l),{error:l.message||"Failed to create checkout session"}):{sessionUrl:o.url}}catch(o){return console.error("Stripe checkout error:",o),{error:"Failed to initialize payment"}}},uM=async(n,e,t)=>{const s=po.find(o=>o.id===n);if(!s)return{error:"Invalid package selected"};try{const{data:o,error:l}=await Nn.functions.invoke("create-paypal-order",{body:{packageId:n,userId:e,amount:s.priceGross.toFixed(2),credits:s.credits,packageName:s.name,referralCodeId:t||null}});return l?(console.error("PayPal order error:",l),{error:l.message||"Failed to create PayPal order"}):{orderId:o.orderId,approvalUrl:o.approvalUrl}}catch(o){return console.error("PayPal order error:",o),{error:"Failed to initialize PayPal payment"}}},cM=async n=>{try{const{data:e,error:t}=await Nn.functions.invoke("capture-paypal-order",{body:{orderId:n}});return t?{success:!1,error:t.message}:{success:!0,credits:e.credits}}catch(e){return console.error("PayPal capture error:",e),{success:!1,error:"Failed to complete PayPal payment"}}},dM=50,gg=20,fM=async()=>{const n=Io();if(!n||!n.email)return null;try{const{data:e,error:t}=await Nn.rpc("generate_referral_code",{p_user_id:n.uid,p_user_email:n.email});return t?(console.error("Error generating referral code:",t),null):e}catch(e){return console.error("Error generating referral code:",e),null}},$T=async()=>{const n=Io();if(!n)return null;try{const{data:e,error:t}=await Nn.rpc("get_referral_stats",{p_user_id:n.uid});if(t)return console.error("Error getting referral stats:",t),null;if(e&&e.length>0){const s=e[0];return{hasCode:s.has_code,code:s.code,totalReferrals:s.total_referrals,totalCreditsEarned:s.total_credits_earned,canUseReferral:s.can_use_referral}}return{hasCode:!1,code:null,totalReferrals:0,totalCreditsEarned:0,canUseReferral:!0}}catch(e){return console.error("Error getting referral stats:",e),null}},hM=async n=>{const e=Io();if(!e)return{isValid:!1,referralCodeId:null,referrerUserId:null,errorMessage:"User not logged in"};try{const{data:t,error:s}=await Nn.rpc("validate_referral_code",{p_code:n.toUpperCase().trim(),p_user_id:e.uid});if(s)return console.error("Error validating referral code:",s),{isValid:!1,referralCodeId:null,referrerUserId:null,errorMessage:"Failed to validate code"};if(t&&t.length>0){const o=t[0];return{isValid:o.is_valid,referralCodeId:o.referral_code_id,referrerUserId:o.referrer_user_id,errorMessage:o.error_message}}return{isValid:!1,referralCodeId:null,referrerUserId:null,errorMessage:"Invalid code"}}catch(t){return console.error("Error validating referral code:",t),{isValid:!1,referralCodeId:null,referrerUserId:null,errorMessage:"Validation failed"}}},pM=async()=>{const n=await $T();return(n==null?void 0:n.canUseReferral)??!0},gM=n=>Math.floor(n*(gg/100)),mM=async()=>{const n=Io();if(!n)return[];try{const{data:e}=await Nn.from("referral_codes").select("id").eq("user_id",n.uid).maybeSingle();if(!e)return[];const{data:t,error:s}=await Nn.from("referral_redemptions").select("created_at, package_id, referrer_credits").eq("referral_code_id",e.id).order("created_at",{ascending:!1});return s?(console.error("Error getting referral history:",s),[]):(t||[]).map(o=>({date:o.created_at,packageId:o.package_id,creditsEarned:o.referrer_credits}))}catch(e){return console.error("Error getting referral history:",e),[]}},yM=({isOpen:n,onClose:e,onPurchase:t,userId:s})=>{const[o,l]=ue.useState(null),[u,d]=ue.useState(null),[p,f]=ue.useState(null),[_,w]=ue.useState(""),[T,C]=ue.useState(null),[M,k]=ue.useState(!1),[L,G]=ue.useState(null),[$,H]=ue.useState(null),[Q,ae]=ue.useState(!0);ue.useEffect(()=>{n&&(async()=>{if(s){const O=await pM();ae(O)}})()},[n,s]),ue.useEffect(()=>{if(n&&Q){const O=new URLSearchParams(window.location.search).get("ref");O&&(w(O),ne(O))}},[n,Q]);const ne=async P=>{const O=P||_;if(!O.trim()){G(null),C(null),H(null);return}k(!0),H(null);const V=await hM(O);k(!1),G(V.isValid),C(V.referralCodeId),H(V.errorMessage)};if(!n)return null;const D=async P=>{if(!o||!s){f("Please select a package first");return}d(P),f(null);try{const O=L?T:null;if(P==="stripe"){const V=await lM(o,s,O);"error"in V?f(V.error):window.location.href=V.sessionUrl}else if(P==="paypal"){const V=await uM(o,s,O);"error"in V?f(V.error):V.approvalUrl?window.location.href=V.approvalUrl:f("Failed to get PayPal approval URL")}}catch(O){f("Payment failed. Please try again."),console.error("Payment error:",O)}finally{d(null)}},I=po.find(P=>P.id===o),x=I&&L?gM(I.credits):0;return S.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl relative overflow-hidden",children:[S.jsxs("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 p-6",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:S.jsx(Ar,{className:"w-6 h-6"})}),S.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[S.jsx("span",{children:""})," Get More Credits"]}),S.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Choose a package that fits your needs"})]}),S.jsxs("div",{className:"p-6",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-stretch",children:[S.jsx(C_,{package:po[0],isSelected:o===po[0].id,onSelect:()=>l(po[0].id)}),S.jsx("div",{className:"hidden sm:flex items-center justify-center px-2",children:S.jsx("div",{className:"h-full w-px bg-gradient-to-b from-transparent via-gray-500 to-transparent"})}),po.slice(1).map(P=>S.jsx(C_,{package:P,isSelected:o===P.id,onSelect:()=>l(P.id)},P.id))]}),Q&&S.jsxs("div",{className:"mt-6 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 rounded-xl p-4",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-lg",children:""}),S.jsx("span",{className:"text-sm font-medium text-white",children:"Have a referral code?"})]}),S.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[S.jsxs("span",{className:"text-purple-300",children:["Up to ",S.jsx("span",{className:"text-pink-400 font-bold",children:"+200 free credits"})]}),S.jsx("span",{className:"text-gray-500",children:""}),S.jsx("span",{className:"text-green-400",children:"(save up to 10)"})]})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:_,onChange:P=>{w(P.target.value.toUpperCase()),G(null),H(null)},placeholder:"Enter code (e.g., REF-JOHN-ABC123)",className:`flex-1 px-4 py-2 bg-gray-700 border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 transition-all
                    ${L===!0?"border-green-500 focus:ring-green-500":L===!1?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-purple-500"}`}),S.jsx("button",{onClick:()=>ne(),disabled:M||!_.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:M?"...":"Apply"})]}),L===!0&&S.jsxs("div",{className:"mt-2 flex items-center gap-2 text-green-400 text-sm",children:[S.jsx("span",{children:""}),S.jsxs("span",{children:["Code applied! You'll get +",gg,"% bonus credits"]}),I&&S.jsxs("span",{className:"text-green-300 font-bold",children:["(+",x," credits)"]})]}),$&&S.jsxs("div",{className:"mt-2 text-red-400 text-sm",children:[" ",$]}),I&&L&&S.jsx("div",{className:"mt-3 bg-green-500/20 border border-green-500/30 rounded-lg p-3 text-center",children:S.jsxs("span",{className:"text-green-400 font-medium",children:["Total: ",I.credits," + ",x," = ",S.jsx("span",{className:"text-lg font-bold",children:I.credits+x})," credits"]})})]}),!Q&&S.jsx("div",{className:"mt-6 bg-gray-700/30 border border-gray-600 rounded-xl p-4 text-center",children:S.jsx("span",{className:"text-gray-400 text-sm",children:"You've already used a referral code on a previous purchase."})}),p&&S.jsx("div",{className:"mt-4 p-3 bg-red-500/20 border border-red-500 rounded-lg text-red-400 text-sm text-center",children:p}),o&&S.jsxs("div",{className:"mt-6 space-y-3",children:[S.jsx("p",{className:"text-gray-400 text-sm text-center mb-4",children:"Choose payment method:"}),S.jsxs("div",{className:"flex gap-3 justify-center",children:[S.jsxs("button",{onClick:()=>D("stripe"),disabled:u!==null,className:"flex items-center gap-2 px-6 py-3 bg-[#635BFF] hover:bg-[#5851ea] text-white font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:S.jsx("path",{d:"M3 10h18v7a3 3 0 01-3 3H6a3 3 0 01-3-3v-7zm0-3a3 3 0 013-3h12a3 3 0 013 3v1H3V7z"})}),u==="stripe"?"Processing...":"Pay with Card"]}),S.jsxs("button",{onClick:()=>D("paypal"),disabled:u!==null,className:"flex items-center gap-2 px-6 py-3 bg-[#0070BA] hover:bg-[#005ea6] text-white font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:S.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 01-.633-.74L4.944 3.72a.77.77 0 01.76-.654h6.39c2.117 0 3.832.476 5.1 1.415 1.267.94 1.9 2.28 1.9 4.02 0 .94-.158 1.79-.474 2.55-.316.76-.77 1.42-1.362 1.98-.592.56-1.3.99-2.124 1.29-.824.3-1.743.45-2.757.45H9.72l-.95 6.567a.77.77 0 01-.76.654H7.076z"})}),u==="paypal"?"Processing...":"PayPal"]})]})]}),S.jsxs("div",{className:"mt-6 text-center text-gray-400 text-sm",children:[S.jsx("p",{children:"Credits never expire  Shared across all JaaCool apps"}),S.jsx("p",{className:"mt-1 text-xs",children:" Secure payment via Stripe"})]})]})]})})},C_=({package:n,isSelected:e,onSelect:t})=>{const s=o=>o==="popular"?"bg-blue-500":o==="best-value"?"bg-green-500":"";return S.jsxs("div",{className:`relative bg-gray-700/50 border-2 rounded-xl p-4 hover:border-yellow-500 transition-all cursor-pointer w-full sm:w-44 flex-shrink-0
        ${e?"border-yellow-500 ring-2 ring-yellow-500/30":n.badge?"border-yellow-500/50":"border-gray-600"}`,onClick:t,children:[e&&S.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center",children:S.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),n.badge&&!e&&S.jsx("div",{className:`absolute -top-2 left-1/2 -translate-x-1/2 px-3 py-0.5 rounded-full text-xs font-bold text-white ${s(n.badge)}`,children:n.badge==="popular"?" Popular":" Best Value"}),S.jsxs("div",{className:"text-center pt-2",children:[S.jsx("h3",{className:"text-lg font-bold text-white",children:n.name}),S.jsxs("div",{className:"my-4",children:[S.jsx("span",{className:"text-3xl font-bold text-yellow-400",children:n.credits}),S.jsx("span",{className:"text-gray-400 ml-1",children:"credits"})]}),S.jsxs("div",{className:"text-sm text-cyan-400 mb-2",children:["Up to ",n.logosIncluded," logos"]}),S.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["",n.priceNet.toFixed(2)," ",S.jsx("span",{className:"text-sm font-normal text-gray-400",children:"netto"})]}),S.jsxs("div",{className:"text-sm text-gray-400 mb-1",children:["",n.priceGross.toFixed(2)," ",S.jsx("span",{className:"text-xs",children:"inkl. 19% MwSt."})]}),S.jsxs("div",{className:"text-xs text-gray-500",children:["",n.pricePerCredit.toFixed(3)," pro Credit"]}),n.savings&&S.jsxs("div",{className:"mt-2 text-green-400 text-sm font-medium",children:["Save ",n.savings,"%"]}),S.jsx("div",{className:`mt-4 w-full py-2 font-medium rounded-lg transition-all text-center
            ${e?"bg-yellow-500 text-white":"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:from-yellow-400 hover:to-orange-400"}`,children:e?" Selected":"Select"})]})]})},vM=({isOpen:n,onClose:e,onBuyCredits:t,creditsNeeded:s,creditsAvailable:o})=>{if(!n)return null;const l=s-o;return S.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md relative overflow-hidden",children:[S.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 p-6",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:S.jsx(Ar,{className:"w-6 h-6"})}),S.jsx("h2",{className:"text-2xl font-bold text-white",children:" Not Enough Credits"})]}),S.jsxs("div",{className:"p-6 space-y-4",children:[S.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 space-y-2",children:[S.jsxs("div",{className:"flex justify-between text-gray-300",children:[S.jsx("span",{children:"Credits needed:"}),S.jsx("span",{className:"font-bold text-white",children:s})]}),S.jsxs("div",{className:"flex justify-between text-gray-300",children:[S.jsx("span",{children:"Your credits:"}),S.jsx("span",{className:"font-bold text-yellow-400",children:o})]}),S.jsxs("div",{className:"border-t border-gray-600 pt-2 flex justify-between text-gray-300",children:[S.jsx("span",{children:"Shortfall:"}),S.jsxs("span",{className:"font-bold text-red-400",children:["-",l]})]})]}),S.jsxs("p",{className:"text-gray-400 text-sm text-center",children:["You need ",l," more credits to process these images."]}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:e,className:"flex-1 py-3 bg-gray-700 text-gray-300 font-medium rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),S.jsx("button",{onClick:t,className:"flex-1 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-medium rounded-lg hover:from-yellow-400 hover:to-orange-400 transition-all",children:" Buy Credits"})]})]})]})})};async function _M(n){const{data:e,error:t}=await Nn.from("invoices").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching invoices:",t),t;return e||[]}async function wM(n,e){var t;try{const{data:s,error:o}=await Nn.functions.invoke("generate-invoice-pdf",{body:{invoiceId:n,userId:e}});if(o)throw o;if(!(s!=null&&s.html))throw new Error("No HTML returned from server");const l=window.open("","_blank");if(l)l.document.write(s.html),l.document.close(),l.onload=()=>{setTimeout(()=>{l.print()},250)};else{const u=new Blob([s.html],{type:"text/html"}),d=URL.createObjectURL(u),p=document.createElement("a");p.href=d,p.download=`Rechnung_${((t=s.invoice)==null?void 0:t.invoice_number)||n}.html`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(d)}}catch(s){throw console.error("Error downloading invoice:",s),s}}function EM(n,e="EUR"){return new Intl.NumberFormat("de-DE",{style:"currency",currency:e}).format(n/100)}function TM(n){return new Intl.DateTimeFormat("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(n))}async function SM(n,e,t){let s=Nn.from("invoices").select("*").eq("user_id",n).order("created_at",{ascending:!0});const{data:o,error:l}=await s;if(l)throw l;if(!o||o.length===0)throw new Error("Keine Rechnungen im ausgewhlten Zeitraum");const u=["Umsatz (ohne Soll/Haben-Kz)","Soll/Haben-Kennzeichen","WKZ Umsatz","Kurs","Basis-Umsatz","WKZ Basis-Umsatz","Konto","Gegenkonto (ohne BU-Schlssel)","BU-Schlssel","Belegdatum","Belegfeld 1","Belegfeld 2","Skonto","Buchungstext"],d=o.map(f=>{var T;const _=new Date(f.created_at),w=`${_.getDate().toString().padStart(2,"0")}${(_.getMonth()+1).toString().padStart(2,"0")}`;return[(f.total_cents/100).toFixed(2).replace(".",","),"S","EUR","","","","8400","10000","",w,f.invoice_number,f.payment_provider,"",`Credits ${((T=f.line_items[0])==null?void 0:T.description)||""}`]});return[u.join(";"),...d.map(f=>f.join(";"))].join(`
`)}async function bM(n,e,t){const s=await SM(n),o=new Blob(["\uFEFF"+s],{type:"text/csv;charset=utf-8"}),l=URL.createObjectURL(o),u=document.createElement("a");u.href=l;const d=new Date,p=`DATEV_Export_${d.getFullYear()}${(d.getMonth()+1).toString().padStart(2,"0")}${d.getDate().toString().padStart(2,"0")}.csv`;u.download=p,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(l)}const AM=({userId:n,isAdmin:e=!1})=>{const[t,s]=ue.useState([]),[o,l]=ue.useState(!0),[u,d]=ue.useState(null),[p,f]=ue.useState(null),[_,w]=ue.useState(!1);ue.useEffect(()=>{T()},[n]);const T=async()=>{try{l(!0),d(null);const k=await _M(n);s(k)}catch(k){d(k.message||"Fehler beim Laden der Rechnungen")}finally{l(!1)}},C=async k=>{try{f(k.id),await wM(k.id,n)}catch(L){d(L.message||"Fehler beim Herunterladen")}finally{f(null)}},M=async()=>{try{w(!0),d(null),await bM(n)}catch(k){d(k.message||"Fehler beim DATEV-Export")}finally{w(!1)}};return o?S.jsxs("div",{className:"flex items-center justify-center py-12",children:[S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"}),S.jsx("span",{className:"ml-3 text-gray-400",children:"Lade Rechnungen..."})]}):S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[S.jsx("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Meine Rechnungen"]}),e&&t.length>0&&S.jsx("button",{onClick:M,disabled:_,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition-colors disabled:opacity-50",children:_?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-300"}),"Exportiere..."]}):S.jsxs(S.Fragment,{children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"DATEV Export"]})})]}),u&&S.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-300 px-4 py-2 rounded-lg text-sm",children:u}),t.length===0?S.jsxs("div",{className:"text-center py-12 bg-gray-800/50 rounded-xl border border-gray-700",children:[S.jsx("svg",{className:"w-12 h-12 text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),S.jsx("p",{className:"text-gray-400",children:"Noch keine Rechnungen vorhanden"}),S.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Nach deinem ersten Kauf erscheinen hier deine Rechnungen"})]}):S.jsx("div",{className:"space-y-2",children:t.map(k=>S.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-4 hover:border-gray-600 transition-colors",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center",children:S.jsx("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"font-medium text-white",children:k.invoice_number}),S.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${k.status==="paid"?"bg-green-500/20 text-green-400":k.status==="refunded"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"}`,children:k.status==="paid"?"Bezahlt":k.status==="refunded"?"Erstattet":k.status})]}),S.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400 mt-0.5",children:[S.jsx("span",{children:TM(k.created_at)}),S.jsx("span",{children:""}),S.jsxs("span",{className:"flex items-center gap-1",children:[k.payment_provider==="stripe"?S.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:S.jsx("path",{d:"M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.591-7.305z"})}):S.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:S.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z"})}),k.payment_provider==="stripe"?"Stripe":"PayPal"]})]})]})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("div",{className:"text-right",children:[S.jsx("div",{className:"font-semibold text-white",children:EM(k.total_cents,k.currency)}),S.jsxs("div",{className:"text-xs text-gray-500",children:["inkl. ",k.tax_rate,"% MwSt."]})]}),S.jsxs("button",{onClick:()=>C(k),disabled:p===k.id,className:"flex items-center gap-2 px-3 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Rechnung herunterladen",children:[p===k.id?S.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),S.jsx("span",{className:"hidden sm:inline",children:"PDF"})]})]})]}),S.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700/50",children:S.jsx("div",{className:"text-sm text-gray-400",children:(typeof k.line_items=="string"?JSON.parse(k.line_items):k.line_items||[]).map((L,G)=>S.jsx("span",{children:L.description},G))})})]},k.id))})]})},CM=({isOpen:n,onClose:e,userId:t,userEmail:s})=>{if(!n)return null;const o=wu(s);return S.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] relative overflow-hidden flex flex-col",children:[S.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-6 flex-shrink-0",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:S.jsx(Ar,{className:"w-6 h-6"})}),S.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[S.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Meine Rechnungen"]}),S.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Alle deine Rechnungen zum Herunterladen"})]}),S.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:S.jsx(AM,{userId:t,isAdmin:o})}),S.jsx("div",{className:"p-4 border-t border-gray-700 flex-shrink-0",children:S.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Rechnungen werden automatisch bei jedem Kauf erstellt und hier gespeichert."})})]})})},RM=({userId:n})=>{const[e,t]=ue.useState(null),[s,o]=ue.useState(!1),[l,u]=ue.useState(!1),[d,p]=ue.useState([]),[f,_]=ue.useState(!1);ue.useEffect(()=>{n&&w()},[n]);const w=async()=>{const k=await $T();if(t(k),k!=null&&k.hasCode){const L=await mM();p(L)}},T=async()=>{o(!0),await fM()&&await w(),o(!1)},C=()=>{e!=null&&e.code&&(navigator.clipboard.writeText(e.code),u(!0),setTimeout(()=>u(!1),2e3))},M=()=>{if(e!=null&&e.code){const k=`${window.location.origin}?ref=${e.code}`;navigator.clipboard.writeText(k),u(!0),setTimeout(()=>u(!1),2e3)}};return n?S.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-purple-500/30 rounded-xl p-5",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[S.jsx("span",{className:"text-2xl",children:""}),S.jsx("h3",{className:"text-lg font-bold text-white",children:"Referral Program"})]}),S.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:[S.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Share your code and earn credits when friends make their first purchase!"}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-center",children:[S.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["+",dM]}),S.jsx("div",{className:"text-xs text-gray-400",children:"Credits for you"}),S.jsx("div",{className:"text-xs text-purple-300 mt-1",children:"per referral"})]}),S.jsxs("div",{className:"bg-pink-500/20 rounded-lg p-3 text-center",children:[S.jsxs("div",{className:"text-2xl font-bold text-pink-400",children:["+",gg,"%"]}),S.jsx("div",{className:"text-xs text-gray-400",children:"Bonus for friend"}),S.jsx("div",{className:"text-xs text-pink-300 mt-1",children:"on first purchase"})]})]}),S.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:" Bigger packages = more bonus credits for your friend!"})]}),e!=null&&e.hasCode?S.jsx(S.Fragment,{children:S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"flex-1 bg-gray-800 rounded-lg px-4 py-3 font-mono text-lg text-center text-yellow-400 tracking-wider",children:e.code}),S.jsx("button",{onClick:C,className:"px-4 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors",title:"Copy code",children:l?"":""})]}),S.jsx("button",{onClick:M,className:"w-full py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded-lg transition-all text-sm font-medium",children:" Copy Referral Link"}),S.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-700",children:[S.jsxs("div",{className:"text-gray-400",children:[S.jsx("span",{className:"text-white font-bold",children:e.totalReferrals})," referrals"]}),S.jsxs("div",{className:"text-gray-400",children:[S.jsxs("span",{className:"text-yellow-400 font-bold",children:["+",e.totalCreditsEarned]})," credits earned"]})]}),d.length>0&&S.jsx("button",{onClick:()=>_(!f),className:"text-xs text-purple-400 hover:text-purple-300 transition-colors",children:f?" Hide history":" Show history"}),f&&d.length>0&&S.jsx("div",{className:"bg-black/30 rounded-lg p-3 max-h-40 overflow-y-auto",children:d.map((k,L)=>S.jsxs("div",{className:"flex justify-between text-xs py-1 border-b border-gray-700 last:border-0",children:[S.jsx("span",{className:"text-gray-400",children:new Date(k.date).toLocaleDateString()}),S.jsxs("span",{className:"text-green-400",children:["+",k.creditsEarned," credits"]})]},L))})]})}):S.jsx("button",{onClick:T,disabled:s,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded-lg transition-all font-medium disabled:opacity-50",children:s?S.jsxs("span",{className:"flex items-center justify-center gap-2",children:[S.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):" Generate My Referral Code"})]}):null},xM=({isOpen:n,onClose:e,userId:t})=>n?S.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:S.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg relative overflow-hidden my-auto max-h-[90vh] overflow-y-auto",children:[S.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:S.jsx(Ar,{className:"w-6 h-6"})}),S.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[S.jsx("span",{children:""})," Referral Program"]}),S.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Earn credits by inviting friends"})]}),S.jsxs("div",{className:"p-4",children:[S.jsx(RM,{userId:t}),S.jsxs("div",{className:"mt-4 bg-gray-700/30 rounded-xl p-3",children:[S.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"How it works"}),S.jsxs("ol",{className:"space-y-1 text-xs text-gray-300",children:[S.jsxs("li",{className:"flex gap-2",children:[S.jsx("span",{className:"text-purple-400 font-bold",children:"1."}),S.jsx("span",{children:"Generate & share your code"})]}),S.jsxs("li",{className:"flex gap-2",children:[S.jsx("span",{className:"text-purple-400 font-bold",children:"2."}),S.jsx("span",{children:"Friend uses code on first purchase"})]}),S.jsxs("li",{className:"flex gap-2",children:[S.jsx("span",{className:"text-purple-400 font-bold",children:"3."}),S.jsxs("span",{children:["You get ",S.jsx("span",{className:"text-yellow-400 font-bold",children:"+50 credits"}),", they get ",S.jsx("span",{className:"text-pink-400 font-bold",children:"+20% bonus"})]})]})]})]}),S.jsx("div",{className:"mt-3 text-xs text-gray-500",children:S.jsx("p",{children:" No limit on referrals  Codes work on first purchase only"})})]})]})}):null,IM=n=>new Promise((e,t)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>e(s.result),s.onerror=o=>t(o)}),NM=n=>new Promise((e,t)=>{const s=new Image,o=URL.createObjectURL(n);s.onload=()=>{e(s)},s.onerror=l=>{URL.revokeObjectURL(o),t(l)},s.src=o}),_s=n=>new Promise((e,t)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=o=>{t(o)},s.src=n}),Ip=(n,e,t)=>new Promise((s,o)=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas");let d=l.width,p=l.height;if(d>e||p>t){const _=Math.min(e/d,t/p);d=Math.round(d*_),p=Math.round(p*_)}u.width=d,u.height=p;const f=u.getContext("2d");if(!f){o(new Error("Could not get canvas context"));return}f.drawImage(l,0,0,d,p),s(u.toDataURL("image/png"))},l.onerror=o,l.src=n}),MM=2e3,qa=(n,e=MM)=>{const t=document.createElement("canvas"),s=Math.min(1,e/Math.max(n.naturalWidth,n.naturalHeight));t.width=Math.round(n.naturalWidth*s),t.height=Math.round(n.naturalHeight*s);const o=t.getContext("2d");if(!o)throw new Error("Could not get canvas context");o.drawImage(n,0,0,t.width,t.height);const l=o.getImageData(0,0,t.width,t.height);return cv.matFromImageData(l)},R_=(n,e,t,s)=>{const o=[];let l,u;const d=new cv.KeyPointVector,p=new cv.KeyPointVector;try{const f=t?4:10,_=t?.85:.75,w=new cv.Mat;o.push(w);const T=new cv.Mat;o.push(T),cv.cvtColor(n,w,cv.COLOR_RGBA2GRAY),cv.cvtColor(e,T,cv.COLOR_RGBA2GRAY),u=new cv.CLAHE(2,new cv.Size(8,8)),u.apply(w,w),u.apply(T,T),l=new cv.AKAZE;const C=new cv.Mat;o.push(C);const M=new cv.Mat;if(o.push(M),l.detectAndCompute(w,new cv.Mat,d,C),l.detectAndCompute(T,new cv.Mat,p,M),C.empty()||M.empty())throw new Error("Could not extract features from one or both images.");const k=new cv.BFMatcher(cv.NORM_HAMMING,!1),L=new cv.DMatchVectorVector;o.push(L),k.knnMatch(M,C,L,2);const G=[];for(let se=0;se<L.size();++se){const pe=L.get(se);pe.size()>1&&pe.get(0).distance<_*pe.get(1).distance&&G.push(pe.get(0))}if(G.length<f)throw new Error(`Not enough good matches found (${G.length}/${f}).`);const $=[],H=[];for(const se of G)H.push(p.get(se.queryIdx).pt.x),H.push(p.get(se.queryIdx).pt.y),$.push(d.get(se.trainIdx).pt.x),$.push(d.get(se.trainIdx).pt.y);const Q=cv.matFromArray(H.length/2,1,cv.CV_32FC2,H);o.push(Q);const ae=cv.matFromArray($.length/2,1,cv.CV_32FC2,$);o.push(ae);let ne=cv.estimateAffine2D(Q,ae,new cv.Mat,cv.RANSAC);if(ne.empty())throw new Error("Could not compute the simple affine transformation matrix.");const D=ne.doubleAt(0,0),I=ne.doubleAt(0,1),x=ne.doubleAt(1,0),P=ne.doubleAt(1,1),O=Math.sqrt(D*D+I*I),V=Math.sqrt(x*x+P*P),U=(O+V)/2,Ue=Math.atan2(I,D),Ie=Math.cos(Ue),J=Math.sin(Ue),le=cv.matFromArray(2,3,cv.CV_64FC1,[U*Ie,-U*J,ne.doubleAt(0,2),U*J,U*Ie,ne.doubleAt(1,2)]);return o.push(ne),ne=le,{transformMatrix:ne,keypointsBase:d,keypointsTarget:p,goodMatches:G}}catch(f){throw d&&!d.isDeleted()&&d.delete(),p&&!p.isDeleted()&&p.delete(),f}finally{o.forEach(f=>{f&&f.delete&&!f.isDeleted()&&f.delete()}),l&&l.delete&&l.delete(),u&&u.delete&&u.delete()}},tp=(n,e,t,s)=>{if(!t||t.length===0||!s||s.empty())return Number.POSITIVE_INFINITY;const o=s.rows===3&&s.cols===3;let l=0;const u=t.length;for(let d=0;d<u;d++){const p=t[d],f=e.get(p.queryIdx).pt,_=n.get(p.trainIdx).pt;let w,T;if(o){const k=f.x,L=f.y,G=s.doubleAt(0,0)*k+s.doubleAt(0,1)*L+s.doubleAt(0,2),$=s.doubleAt(1,0)*k+s.doubleAt(1,1)*L+s.doubleAt(1,2),H=s.doubleAt(2,0)*k+s.doubleAt(2,1)*L+s.doubleAt(2,2),Q=H!==0?1/H:1;w=G*Q,T=$*Q}else{const k=f.x,L=f.y;w=s.doubleAt(0,0)*k+s.doubleAt(0,1)*L+s.doubleAt(0,2),T=s.doubleAt(1,0)*k+s.doubleAt(1,1)*L+s.doubleAt(1,2)}const C=w-_.x,M=T-_.y;l+=C*C+M*M}return Math.sqrt(l/Math.max(1,u))},Np=(n,e,t,s,o)=>{const l=[];let u,d;const p=new cv.KeyPointVector,f=new cv.KeyPointVector;try{const _=t?4:8,w=t?.85:.8,T=5,C=new cv.Mat;l.push(C);const M=new cv.Mat;l.push(M),cv.cvtColor(n,C,cv.COLOR_RGBA2GRAY),cv.cvtColor(e,M,cv.COLOR_RGBA2GRAY),d=new cv.CLAHE(2,new cv.Size(8,8)),d.apply(C,C),d.apply(M,M),u=new cv.AKAZE;const k=new cv.BFMatcher(cv.NORM_HAMMING,!1),L=new cv.Mat;l.push(L),u.detectAndCompute(C,new cv.Mat,p,L);const G=new cv.Mat;if(l.push(G),u.detectAndCompute(M,new cv.Mat,f,G),L.rows===0||G.rows===0)throw new Error("Could not find features in one or both images for alignment.");console.log(`Features detected - Base: ${p.size()}, Target: ${f.size()}`);const $=new cv.DMatchVectorVector;l.push($),k.knnMatch(G,L,$,2);let H=[];for(let x=0;x<$.size();++x){const P=$.get(x);if(P.size()>1){const O=P.get(0),V=P.get(1);O.distance<w*V.distance&&H.push(O)}}if(console.log(`Good matches found: ${H.length}/${_} required`),H.length<_)throw new Error(`Not enough good matches found for alignment - ${H.length}/${_}.`);if(H.length>=_*1.5){const x=e.cols/2,P=e.rows/2,O=H.map(se=>{const pe=f.get(se.queryIdx).pt,_e=Math.sqrt(Math.pow(pe.x-x,2)+Math.pow(pe.y-P,2));return{match:se,distanceToCenter:_e,pt:pe}});O.sort((se,pe)=>se.distanceToCenter-pe.distanceToCenter);const V=Math.max(_,Math.floor(O.length*.4)),U=O.slice(0,V).map(se=>se.match),Ue=O.slice(0,V).reduce((se,pe)=>se+pe.pt.x,0)/V,Ie=O.slice(0,V).reduce((se,pe)=>se+pe.pt.y,0)/V,J=Math.sqrt(Math.pow(Ue-x,2)+Math.pow(Ie-P,2));U.sort((se,pe)=>se.distance-pe.distance);const le=Math.min(U.length,Math.max(_*2,30));H=U.slice(0,le),console.log(`Center-weighted matching: Selected ${H.length} matches from central region (cluster center: ${J.toFixed(0)}px from image center)`)}else{H.sort((P,O)=>P.distance-O.distance);const x=Math.min(H.length,Math.max(_*2,30));H=H.slice(0,x)}let Q=[],ae=[];for(let x=0;x<H.length;x++)Q.push(p.get(H[x].trainIdx).pt.x),Q.push(p.get(H[x].trainIdx).pt.y),ae.push(f.get(H[x].queryIdx).pt.x),ae.push(f.get(H[x].queryIdx).pt.y);const ne=cv.matFromArray(Q.length/2,1,cv.CV_32FC2,Q);l.push(ne);const D=cv.matFromArray(ae.length/2,1,cv.CV_32FC2,ae);l.push(D);let I;if(o){const x=new cv.Mat;if(l.push(x),I=cv.findHomography(D,ne,cv.RANSAC,T,x),I.empty())console.warn("Homography failed, falling back to affine transform."),I=cv.estimateAffine2D(D,ne,new cv.Mat,cv.RANSAC,T);else{let P=0;for(let V=0;V<x.rows;V++)x.ucharAt(V,0)>0&&P++;const O=P/H.length;console.log(`Homography inliers: ${P}/${H.length} (${(O*100).toFixed(1)}%)`),O<.3&&(console.warn("Low inlier ratio, falling back to affine transform."),I.delete(),I=cv.estimateAffine2D(D,ne,new cv.Mat,cv.RANSAC,T))}}else{const x=new cv.Mat;if(l.push(x),I=cv.estimateAffine2D(D,ne,x,cv.RANSAC,T),!I.empty()){let P=0;for(let O=0;O<x.rows;O++)x.ucharAt(O,0)>0&&P++;console.log(`Affine inliers: ${P}/${H.length}`)}}if(I.empty())throw new Error("Could not compute the transformation.");if(s&&!I.empty()){const x=I.rows===3,P=new cv.Mat;l.push(P);const O=new cv.Size(n.cols,n.rows);x?cv.warpPerspective(e,P,I,O):cv.warpAffine(e,P,I,O);const V=new cv.Mat;l.push(V),cv.cvtColor(P,V,cv.COLOR_RGBA2GRAY),d.apply(V,V);const U=new cv.KeyPointVector,Ue=new cv.Mat;if(l.push(Ue),u.detectAndCompute(V,new cv.Mat,U,Ue),Ue.rows>0){const Ie=new cv.DMatchVectorVector;l.push(Ie),k.knnMatch(Ue,L,Ie,2);const J=[];for(let le=0;le<Ie.size();++le){const se=Ie.get(le);if(se.size()>1){const pe=se.get(0),_e=se.get(1);pe.distance<w*_e.distance&&J.push(pe)}}if(J.length>=_){const le=[],se=[];for(let Y=0;Y<J.length;Y++)le.push(p.get(J[Y].trainIdx).pt.x),le.push(p.get(J[Y].trainIdx).pt.y),se.push(U.get(J[Y].queryIdx).pt.x),se.push(U.get(J[Y].queryIdx).pt.y);const pe=cv.matFromArray(le.length/2,1,cv.CV_32FC2,le);l.push(pe);const _e=cv.matFromArray(se.length/2,1,cv.CV_32FC2,se);l.push(_e);const B=x?cv.findHomography(_e,pe,cv.RANSAC,T):cv.estimateAffine2D(_e,pe,new cv.Mat,cv.RANSAC,T);if(!B.empty()){if(x){const Y=new cv.Mat;cv.gemm(B,I,1,new cv.Mat,0,Y,0),I.delete(),I=Y}else{const Y=new cv.Mat(3,3,cv.CV_64FC1);l.push(Y);const ce=new cv.Mat(3,3,cv.CV_64FC1);l.push(ce);for(let ge=0;ge<2;ge++)for(let Ce=0;Ce<3;Ce++)Y.doublePtr(ge,Ce)[0]=B.doubleAt(ge,Ce);Y.doublePtr(2,0)[0]=0,Y.doublePtr(2,1)[0]=0,Y.doublePtr(2,2)[0]=1;for(let ge=0;ge<2;ge++)for(let Ce=0;Ce<3;Ce++)ce.doublePtr(ge,Ce)[0]=I.doubleAt(ge,Ce);ce.doublePtr(2,0)[0]=0,ce.doublePtr(2,1)[0]=0,ce.doublePtr(2,2)[0]=1;const oe=new cv.Mat;l.push(oe),cv.gemm(Y,ce,1,new cv.Mat,0,oe,0);const Ee=new cv.Mat(2,3,cv.CV_64FC1);for(let ge=0;ge<2;ge++)for(let Ce=0;Ce<3;Ce++)Ee.doublePtr(ge,Ce)[0]=oe.doubleAt(ge,Ce);I.delete(),I=Ee}B.delete()}}}U&&U.delete()}return{transformMatrix:I,keypointsBase:p,keypointsTarget:f,goodMatches:H}}catch(_){throw p&&!p.isDeleted()&&p.delete(),f&&!f.isDeleted()&&f.delete(),_}finally{l.forEach(_=>{_&&_.delete&&!_.isDeleted()&&_.delete()}),u&&u.delete&&u.delete(),d&&d.delete&&d.delete()}},Sa=(n,e,t,s,o,l,u,d,p=!1,f=!1)=>new Promise((_,w)=>{const T=[];let C;try{if(!window.cv||!window.cv.getBuildInformation)throw new Error("OpenCV.js is not loaded yet.");const M=qa(n);T.push(M);const k=qa(e);T.push(k);let L=k;if(f&&!u){console.log("Creating inverted copy for matching analysis only (transformation will be applied to original)");const oe=new cv.Mat;T.push(oe),cv.bitwise_not(k,oe),L=oe}if(M.empty()||L.empty())throw new Error("Could not load images into OpenCV format.");let G,$;if(u){G=o?cv.matFromArray(3,3,cv.CV_64FC1,[1,0,0,0,1,0,0,0,1]):cv.matFromArray(2,3,cv.CV_64FC1,[1,0,0,0,1,0]),T.push(G);const oe=document.createElement("canvas");oe.width=1,oe.height=1,$=oe.toDataURL()}else if(l){const oe=R_(M,L,t,s);G=oe.transformMatrix,T.push(G);const Ee=document.createElement("canvas"),ge=new cv.Mat;T.push(ge),C=new cv.DMatchVector,oe.goodMatches.forEach(Ce=>C.push_back(Ce)),cv.drawMatches(L,oe.keypointsTarget,M,oe.keypointsBase,C,ge),cv.imshow(Ee,ge),$=Ee.toDataURL("image/png"),oe.keypointsBase.delete(),oe.keypointsTarget.delete()}else{const oe=[];try{const fe=R_(M,L,t,s),tt=tp(fe.keypointsBase,fe.keypointsTarget,fe.goodMatches,fe.transformMatrix);oe.push({mode:"simple",transformMatrix:fe.transformMatrix,keypointsBase:fe.keypointsBase,keypointsTarget:fe.keypointsTarget,goodMatches:fe.goodMatches,reprojectionError:tt})}catch(fe){console.warn("Simple match candidate failed:",fe)}try{const fe=Np(M,L,t,s,!1),tt=tp(fe.keypointsBase,fe.keypointsTarget,fe.goodMatches,fe.transformMatrix);oe.push({mode:"affine",transformMatrix:fe.transformMatrix,keypointsBase:fe.keypointsBase,keypointsTarget:fe.keypointsTarget,goodMatches:fe.goodMatches,reprojectionError:tt})}catch(fe){console.warn("Affine candidate failed:",fe)}if(o)try{const fe=Np(M,L,t,s,!0),tt=tp(fe.keypointsBase,fe.keypointsTarget,fe.goodMatches,fe.transformMatrix);oe.push({mode:"perspective",transformMatrix:fe.transformMatrix,keypointsBase:fe.keypointsBase,keypointsTarget:fe.keypointsTarget,goodMatches:fe.goodMatches,reprojectionError:tt})}catch(fe){console.warn("Perspective candidate failed:",fe)}if(oe.length===0)throw new Error("No valid alignment candidate found.");let Ee=oe[0];for(let fe=1;fe<oe.length;fe++)oe[fe].reprojectionError<Ee.reprojectionError&&(Ee=oe[fe]);console.log(`Auto alignment chose mode="${Ee.mode}" with RMS error=${Ee.reprojectionError.toFixed(2)}px`),G=Ee.transformMatrix,T.push(G);const ge=document.createElement("canvas"),Ce=new cv.Mat;T.push(Ce),C=new cv.DMatchVector,Ee.goodMatches.forEach(fe=>C.push_back(fe)),cv.drawMatches(L,Ee.keypointsTarget,M,Ee.keypointsBase,C,Ce),cv.imshow(ge,Ce),$=ge.toDataURL("image/png"),oe.forEach(fe=>{fe!==Ee&&(fe.transformMatrix&&!fe.transformMatrix.isDeleted()&&fe.transformMatrix.delete(),fe.keypointsBase&&!fe.keypointsBase.isDeleted()&&fe.keypointsBase.delete(),fe.keypointsTarget&&!fe.keypointsTarget.isDeleted()&&fe.keypointsTarget.delete())}),Ee.keypointsBase.delete(),Ee.keypointsTarget.delete()}const H=new cv.Mat;T.push(H);const Q=new cv.Size(M.cols,M.rows),ae=p?cv.BORDER_CONSTANT:cv.BORDER_REFLECT_101,ne=p?new cv.Scalar(0,0,0,255):new cv.Scalar(0,0,0,0),D=new cv.Mat(k.rows,k.cols,cv.CV_8UC1,new cv.Scalar(255));T.push(D);const I=new cv.Mat;T.push(I),G.rows===3?(cv.warpPerspective(k,H,G,Q,cv.INTER_LINEAR,ae,ne),cv.warpPerspective(D,I,G,Q,cv.INTER_NEAREST,cv.BORDER_CONSTANT,new cv.Scalar(0))):(cv.warpAffine(k,H,G,Q,cv.INTER_LINEAR,ae,ne),cv.warpAffine(D,I,G,Q,cv.INTER_NEAREST,cv.BORDER_CONSTANT,new cv.Scalar(0)));const P=H.cols,O=H.rows;let V;const[U,Ue]=d.split(":").map(Number);Ue>U,V=U/Ue;let Ie,J;P/O>V?(Ie=P,J=Math.round(P/V)):(J=O,Ie=Math.round(O*V));const le=Ie-P,se=J-O,pe=Math.floor(le/2),_e=Math.floor(se/2),B=new cv.Mat;if(T.push(B),p){const oe=new cv.Scalar(0,0,0,255);cv.copyMakeBorder(H,B,_e,se-_e,pe,le-pe,cv.BORDER_CONSTANT,oe)}else{cv.copyMakeBorder(H,B,_e,se-_e,pe,le-pe,cv.BORDER_REFLECT_101);const oe=new cv.Mat;T.push(oe),cv.copyMakeBorder(I,oe,_e,se-_e,pe,le-pe,cv.BORDER_CONSTANT,new cv.Scalar(0));const Ee=new cv.Mat;T.push(Ee);const ge=new cv.Size(35,35);cv.GaussianBlur(B,Ee,ge,0,0,cv.BORDER_DEFAULT);const Ce=new cv.Mat;T.push(Ce),cv.bitwise_not(oe,Ce),Ee.copyTo(B,Ce)}const Y=document.createElement("canvas");Y.width=Ie,Y.height=J,cv.imshow(Y,B);const ce=Y.toDataURL("image/png");_({processedUrl:ce,debugUrl:$})}catch(M){w(M)}finally{C&&C.delete(),T.forEach(M=>{M&&M.delete&&!M.isDeleted()&&M.delete()})}}),kM=async n=>new Promise((e,t)=>{const s=new Image;s.onload=()=>{const o=[];try{const l=qa(s);o.push(l);const u=new cv.MatVector;o.push(u),cv.split(l,u);const d=new cv.Mat;o.push(d);const p=new cv.Mat;o.push(p);const f=new cv.Mat;o.push(f),cv.bitwise_not(u.get(0),d),cv.bitwise_not(u.get(1),p),cv.bitwise_not(u.get(2),f);const _=new cv.MatVector;o.push(_),_.push_back(d),_.push_back(p),_.push_back(f),_.push_back(u.get(3));const w=new cv.Mat;o.push(w),cv.merge(_,w);const T=document.createElement("canvas");T.width=s.naturalWidth,T.height=s.naturalHeight,cv.imshow(T,w);const C=T.toDataURL("image/png");e(C)}catch(l){t(l)}finally{o.forEach(l=>{l&&l.delete&&!l.isDeleted()&&l.delete()})}},s.onerror=t,s.src=n}),DM=async n=>new Promise((e,t)=>{const s=[];try{const o=qa(n);s.push(o);const l=new cv.MatVector;s.push(l),cv.split(o,l);const u=new cv.Mat;s.push(u);const d=new cv.Mat;s.push(d);const p=new cv.Mat;s.push(p),cv.bitwise_not(l.get(0),u),cv.bitwise_not(l.get(1),d),cv.bitwise_not(l.get(2),p);const f=new cv.MatVector;s.push(f),f.push_back(u),f.push_back(d),f.push_back(p),f.push_back(l.get(3));const _=new cv.Mat;s.push(_),cv.merge(f,_);const w=document.createElement("canvas");w.width=n.naturalWidth,w.height=n.naturalHeight,cv.imshow(w,_);const T=w.toDataURL("image/jpeg",.95),C=new Image;C.onload=()=>{console.log(` Inverted master created: ${C.naturalWidth}x${C.naturalHeight}`),e(C)},C.onerror=t,C.src=T}catch(o){t(o)}finally{s.forEach(o=>{o&&o.delete&&!o.isDeleted()&&o.delete()})}}),np=async(n,e,t=!1)=>{const s=[];try{const o=await _s(n),l=qa(e);s.push(l);const u=qa(o);if(s.push(u),l.empty()||u.empty())throw new Error("Could not load images for refinement.");const d=Np(l,u,!1,!0,!1),p=d.transformMatrix;s.push(p);const f=new cv.Mat;s.push(f);const _=new cv.Size(l.cols,l.rows);if(t)cv.warpAffine(u,f,p,_,cv.INTER_LINEAR,cv.BORDER_CONSTANT,new cv.Scalar(0,0,0,255));else{cv.warpAffine(u,f,p,_,cv.INTER_LINEAR,cv.BORDER_REFLECT_101);const T=new cv.Mat(u.rows,u.cols,cv.CV_8UC1,new cv.Scalar(255));s.push(T);const C=new cv.Mat;s.push(C),cv.warpAffine(T,C,p,_,cv.INTER_NEAREST,cv.BORDER_CONSTANT,new cv.Scalar(0));const M=new cv.Mat;s.push(M);const k=new cv.Size(35,35);cv.GaussianBlur(f,M,k,0,0,cv.BORDER_DEFAULT);const L=new cv.Mat;s.push(L),cv.bitwise_not(C,L),M.copyTo(f,L)}const w=document.createElement("canvas");return w.width=l.cols,w.height=l.rows,cv.imshow(w,f),d.keypointsBase.delete(),d.keypointsTarget.delete(),w.toDataURL("image/png")}catch(o){return console.error("Refinement with golden template failed, returning original.",o),n}finally{s.forEach(o=>{o&&o.delete&&!o.isDeleted()&&o.delete()})}},PM=async n=>new Promise((e,t)=>{const s=new Image;s.onload=()=>{const o=document.createElement("canvas");o.width=s.width,o.height=s.height;const l=o.getContext("2d");if(!l){t(new Error("Could not get canvas context"));return}l.drawImage(s,0,0);const u="LOGOLAPSER",d=Math.max(16,Math.min(s.width,s.height)/12);l.font=`bold ${d}px Arial, sans-serif`,l.fillStyle="rgba(255, 255, 255, 0.35)",l.strokeStyle="rgba(0, 0, 0, 0.25)",l.lineWidth=1,l.textAlign="center",l.textBaseline="middle";const f=l.measureText(u).width*1.5,_=d*3;l.save(),l.rotate(-30*Math.PI/180);const w=Math.sqrt(s.width*s.width+s.height*s.height),T=-w/2,C=-w/2,M=w*1.5,k=w*1.5;for(let L=C;L<k;L+=_)for(let G=T;G<M;G+=f){const $=Math.floor(L/_)%2*(f/2);l.strokeText(u,G+$,L),l.fillText(u,G+$,L)}l.restore(),e(o.toDataURL("image/png"))},s.onerror=()=>t(new Error("Failed to load image for watermarking")),s.src=n}),UM=async n=>new Promise((e,t)=>{const s=new Image;s.onload=()=>{let u=s.width,d=s.height;if(s.width>240||s.height>240){const _=240/s.width,w=240/s.height,T=Math.min(_,w);u=Math.round(s.width*T),d=Math.round(s.height*T)}const p=document.createElement("canvas");p.width=u,p.height=d;const f=p.getContext("2d");if(!f){t(new Error("Could not get canvas context"));return}f.imageSmoothingEnabled=!0,f.imageSmoothingQuality="high",f.drawImage(s,0,0,u,d),e(p.toDataURL("image/png"))},s.onerror=()=>t(new Error("Failed to load image for downscaling")),s.src=n}),OM=async n=>{const e=await UM(n);return await PM(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let LM,BM;function VM(){return{geminiUrl:LM,vertexUrl:BM}}function qM(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const u=VM();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class No{}function be(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let f=0;f<p.length;f++){const _=p[f];m(_,e.slice(l+1),t[f])}else for(const f of p)m(f,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];m(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function h(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>h(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function HM(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&l.length>d)for(let p=d;p<l.length;p++){const f=l[p];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}Mp(n,o,l,0,u)}}function Mp(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])Mp(p,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(f=>!f.startsWith("_")&&!o.has(f)),p={};for(const f of d)p[f]=u[f];for(const[f,_]of Object.entries(p)){const w=[];for(const T of t.slice(s))T==="*"?w.push(f):w.push(T);m(u,w,_)}for(const f of d)delete u[f]}}else{const u=n;l in u&&Mp(u[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GM(n){const e={},t=h(n,["operationName"]);t!=null&&m(e,["operationName"],t);const s=h(n,["resourceName"]);return s!=null&&m(e,["_url","resourceName"],s),e}function FM(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(n,["done"]);o!=null&&m(e,["done"],o);const l=h(n,["error"]);l!=null&&m(e,["error"],l);const u=h(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],$M(u)),e}function zM(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(n,["done"]);o!=null&&m(e,["done"],o);const l=h(n,["error"]);l!=null&&m(e,["error"],l);const u=h(n,["response"]);return u!=null&&m(e,["response"],jM(u)),e}function $M(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>JM(u))),m(e,["generatedVideos"],l)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function jM(n){const e={},t=h(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>KM(u))),m(e,["generatedVideos"],l)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function JM(n){const e={},t=h(n,["video"]);return t!=null&&m(e,["video"],XM(t)),e}function KM(n){const e={},t=h(n,["_self"]);return t!=null&&m(e,["video"],QM(t)),e}function YM(n){const e={},t=h(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function WM(n){const e={},t=h(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function XM(n){const e={},t=h(n,["uri"]);t!=null&&m(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],mg(s));const o=h(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function QM(n){const e={},t=h(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],mg(s));const o=h(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var x_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(x_||(x_={}));var I_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(I_||(I_={}));var N_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(N_||(N_={}));var wr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(wr||(wr={}));var M_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(M_||(M_={}));var k_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(k_||(k_={}));var D_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(D_||(D_={}));var P_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(P_||(P_={}));var U_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(U_||(U_={}));var O_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(O_||(O_={}));var L_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(L_||(L_={}));var B_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(B_||(B_={}));var V_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(V_||(V_={}));var q_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(q_||(q_={}));var H_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(H_||(H_={}));var G_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(G_||(G_={}));var Sd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Sd||(Sd={}));var F_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(F_||(F_={}));var z_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(z_||(z_={}));var $_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($_||($_={}));var kp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kp||(kp={}));var j_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(j_||(j_={}));var J_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(J_||(J_={}));var K_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(K_||(K_={}));var Y_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Y_||(Y_={}));var W_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(W_||(W_={}));var X_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(X_||(X_={}));var Q_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Q_||(Q_={}));var Z_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Z_||(Z_={}));var ew;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(ew||(ew={}));var tw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tw||(tw={}));var nw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nw||(nw={}));var iw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(iw||(iw={}));var sw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sw||(sw={}));var rw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(rw||(rw={}));var ow;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ow||(ow={}));var aw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(aw||(aw={}));var lw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(lw||(lw={}));var uw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(uw||(uw={}));var cw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(cw||(cw={}));var dw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(dw||(dw={}));var fw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fw||(fw={}));var hw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(hw||(hw={}));var pw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(pw||(pw={}));var gw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gw||(gw={}));var mw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(mw||(mw={}));var yw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yw||(yw={}));var vw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(vw||(vw={}));var _w;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(_w||(_w={}));var xa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(xa||(xa={}));class Dp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class $l{get text(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",_=!1;const w=[];for(const T of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[C,M]of Object.entries(T))C!=="text"&&C!=="thought"&&(M!==null||M!==void 0)&&w.push(C);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,f+=T.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?f:void 0}get data(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const _=[];for(const w of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[T,C]of Object.entries(w))T!=="inlineData"&&(C!==null||C!==void 0)&&_.push(T);w.inlineData&&typeof w.inlineData.data=="string"&&(f+=atob(w.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,s,o,l,u,d,p,f;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((_==null?void 0:_.length)!==0)return(f=_==null?void 0:_[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,s,o,l,u,d,p,f;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((_==null?void 0:_.length)!==0)return(f=_==null?void 0:_[0])===null||f===void 0?void 0:f.output}}class ww{}class Ew{}class ZM{}class ek{}class tk{}class nk{}class Tw{}class Sw{}class bw{}class ik{}class bd{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new bd;let o;const l=e;return t?o=zM(l):o=FM(l),Object.assign(s,o),s}}class Aw{}class Cw{}class Rw{}class sk{}class rk{}class ok{}class xw{}class ak{get text(){var e,t,s;let o="",l=!1;const u=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,f]of Object.entries(d))p!=="text"&&p!=="thought"&&f!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class lk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ot(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jT(n,e){const t=ot(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function JT(n){return Array.isArray(n)?n.map(e=>Ad(e)):[Ad(n)]}function Ad(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function KT(n){const e=Ad(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YT(n){const e=Ad(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Iw(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function WT(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Iw(e)):[Iw(n)]}function Pp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Nw(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Mw(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function hn(n){if(n==null)throw new Error("ContentUnion is required");return Pp(n)?n:{role:"user",parts:WT(n)}}function yg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=hn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=hn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>hn(t)):[hn(e)]}function ui(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Nw(n)||Mw(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hn(n)]}const e=[],t=[],s=Pp(n[0]);for(const o of n){const l=Pp(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(Nw(o)||Mw(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:WT(t)}),e}function uk(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(wr).includes(t[0].toUpperCase())?t[0].toUpperCase():wr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(wr).includes(s.toUpperCase())?s.toUpperCase():wr.TYPE_UNSPECIFIED})}}function Pa(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&uk(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(wr).includes(d.toUpperCase())?d.toUpperCase():wr.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Pa(d);else if(s.includes(u)){const p=[];for(const f of d){if(f.type=="null"){e.nullable=!0;continue}p.push(Pa(f))}e[u]=p}else if(o.includes(u)){const p={};for(const[f,_]of Object.entries(d))p[f]=Pa(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function vg(n){return Pa(n)}function _g(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function wg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function $a(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Pa(e.response));return n}function ja(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function ck(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ds(n,e){if(typeof e!="string")throw new Error("name must be a string");return ck(n,e,"cachedContents")}function XT(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Rr(n){return mg(n)}function dk(n){return n!=null&&typeof n=="object"&&"name"in n}function fk(n){return n!=null&&typeof n=="object"&&"video"in n}function hk(n){return n!=null&&typeof n=="object"&&"uri"in n}function QT(n){var e;let t;if(dk(n)&&(t=n.name),!(hk(n)&&(t=n.uri,t===void 0))&&!(fk(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ZT(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function eS(n){for(const e of["models","tunedModels","publisherModels"])if(pk(n,e))return n[e];return[]}function pk(n,e){return n!==null&&typeof n=="object"&&e in n}function gk(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function mk(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=gk(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function tS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function yk(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ja(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function iS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vk(n){const e={},t=h(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const s=h(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Yk(u))),m(e,["inlinedResponses"],l)}const o=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["inlinedEmbedContentResponses"],l)}return e}function _k(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const s=h(n,["gcsDestination","outputUriPrefix"]);s!=null&&m(e,["gcsUri"],s);const o=h(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function wk(n){const e={},t=h(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const s=h(n,["gcsUri"]);s!=null&&m(e,["gcsDestination","outputUriPrefix"],s);const o=h(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function od(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["metadata","displayName"]);s!=null&&m(e,["displayName"],s);const o=h(n,["metadata","state"]);o!=null&&m(e,["state"],iS(o));const l=h(n,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const u=h(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=h(n,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=h(n,["metadata","model"]);p!=null&&m(e,["model"],p);const f=h(n,["metadata","output"]);return f!=null&&m(e,["dest"],vk(nS(f))),e}function Up(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=h(n,["state"]);o!=null&&m(e,["state"],iS(o));const l=h(n,["error"]);l!=null&&m(e,["error"],l);const u=h(n,["createTime"]);u!=null&&m(e,["createTime"],u);const d=h(n,["startTime"]);d!=null&&m(e,["startTime"],d);const p=h(n,["endTime"]);p!=null&&m(e,["endTime"],p);const f=h(n,["updateTime"]);f!=null&&m(e,["updateTime"],f);const _=h(n,["model"]);_!=null&&m(e,["model"],_);const w=h(n,["inputConfig"]);w!=null&&m(e,["src"],Ek(w));const T=h(n,["outputConfig"]);return T!=null&&m(e,["dest"],_k(nS(T))),e}function Ek(n){const e={},t=h(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const s=h(n,["gcsSource","uris"]);s!=null&&m(e,["gcsUri"],s);const o=h(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function Tk(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&m(t,["fileName"],s);const o=h(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Kk(n,u))),m(t,["requests","requests"],l)}return t}function Sk(n){const e={},t=h(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const s=h(n,["gcsUri"]);s!=null&&m(e,["gcsSource","uris"],s);const o=h(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function bk(n){const e={},t=h(n,["data"]);if(t!=null&&m(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Ak(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ja(n,s)),t}function Ck(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ja(n,s)),t}function Rk(n){const e={},t=h(n,["content"]);t!=null&&m(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],xk(s));const o=h(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=h(n,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=h(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=h(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=h(n,["index"]);p!=null&&m(e,["index"],p);const f=h(n,["logprobsResult"]);f!=null&&m(e,["logprobsResult"],f);const _=h(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const w=h(n,["urlContextMetadata"]);return w!=null&&m(e,["urlContextMetadata"],w),e}function xk(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function sS(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>nD(l))),m(e,["parts"],o)}const s=h(n,["role"]);return s!=null&&m(e,["role"],s),e}function Ik(n,e){const t={},s=h(n,["displayName"]);if(e!==void 0&&s!=null&&m(e,["batch","displayName"],s),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Nk(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=h(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],wk(yk(o))),t}function kw(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["src"]);o!=null&&m(t,["batch","inputConfig"],Tk(n,tS(n,o)));const l=h(e,["config"]);return l!=null&&Ik(l,t),t}function Mk(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["model"],ot(n,s));const o=h(e,["src"]);o!=null&&m(t,["inputConfig"],Sk(tS(n,o)));const l=h(e,["config"]);return l!=null&&Nk(l,t),t}function kk(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&m(e,["batch","displayName"],s),t}function Dk(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["src"]);o!=null&&m(t,["batch","inputConfig"],qk(n,o));const l=h(e,["config"]);return l!=null&&kk(l,t),t}function Pk(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ja(n,s)),t}function Uk(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ja(n,s)),t}function Ok(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&m(e,["name"],s);const o=h(n,["done"]);o!=null&&m(e,["done"],o);const l=h(n,["error"]);return l!=null&&m(e,["error"],l),e}function Lk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&m(e,["name"],s);const o=h(n,["done"]);o!=null&&m(e,["done"],o);const l=h(n,["error"]);return l!=null&&m(e,["error"],l),e}function Bk(n,e){const t={},s=h(e,["contents"]);if(s!=null){let l=yg(n,s);Array.isArray(l)&&(l=l.map(u=>u)),m(t,["requests[]","request","content"],l)}const o=h(e,["config"]);return o!=null&&(m(t,["_self"],Vk(o,t)),HM(t,{"requests[].*":"requests[].request.*"})),t}function Vk(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=h(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=h(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function qk(n,e){const t={},s=h(e,["fileName"]);s!=null&&m(t,["file_name"],s);const o=h(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],Bk(n,o)),t}function Hk(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Gk(n,e,t){const s={},o=h(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],sS(hn(o)));const l=h(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=h(e,["topP"]);u!=null&&m(s,["topP"],u);const d=h(e,["topK"]);d!=null&&m(s,["topK"],d);const p=h(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const f=h(e,["maxOutputTokens"]);f!=null&&m(s,["maxOutputTokens"],f);const _=h(e,["stopSequences"]);_!=null&&m(s,["stopSequences"],_);const w=h(e,["responseLogprobs"]);w!=null&&m(s,["responseLogprobs"],w);const T=h(e,["logprobs"]);T!=null&&m(s,["logprobs"],T);const C=h(e,["presencePenalty"]);C!=null&&m(s,["presencePenalty"],C);const M=h(e,["frequencyPenalty"]);M!=null&&m(s,["frequencyPenalty"],M);const k=h(e,["seed"]);k!=null&&m(s,["seed"],k);const L=h(e,["responseMimeType"]);L!=null&&m(s,["responseMimeType"],L);const G=h(e,["responseSchema"]);G!=null&&m(s,["responseSchema"],vg(G));const $=h(e,["responseJsonSchema"]);if($!=null&&m(s,["responseJsonSchema"],$),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=h(e,["safetySettings"]);if(t!==void 0&&H!=null){let V=H;Array.isArray(V)&&(V=V.map(U=>iD(U))),m(t,["safetySettings"],V)}const Q=h(e,["tools"]);if(t!==void 0&&Q!=null){let V=ja(Q);Array.isArray(V)&&(V=V.map(U=>sD($a(U)))),m(t,["tools"],V)}const ae=h(e,["toolConfig"]);if(t!==void 0&&ae!=null&&m(t,["toolConfig"],ae),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ne=h(e,["cachedContent"]);t!==void 0&&ne!=null&&m(t,["cachedContent"],Ds(n,ne));const D=h(e,["responseModalities"]);D!=null&&m(s,["responseModalities"],D);const I=h(e,["mediaResolution"]);I!=null&&m(s,["mediaResolution"],I);const x=h(e,["speechConfig"]);if(x!=null&&m(s,["speechConfig"],_g(x)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=h(e,["thinkingConfig"]);P!=null&&m(s,["thinkingConfig"],P);const O=h(e,["imageConfig"]);return O!=null&&m(s,["imageConfig"],O),s}function Fk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>Rk(f))),m(e,["candidates"],p)}const o=h(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=h(n,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=h(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=h(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function zk(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ja(n,s)),t}function $k(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ja(n,s)),t}function jk(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Jk(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function Kk(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["request","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let d=ui(o);Array.isArray(d)&&(d=d.map(p=>sS(p))),m(t,["request","contents"],d)}const l=h(e,["metadata"]);l!=null&&m(t,["metadata"],l);const u=h(e,["config"]);return u!=null&&m(t,["request","generationConfig"],Gk(n,u,h(t,["request"],{}))),t}function Yk(n){const e={},t=h(n,["response"]);t!=null&&m(e,["response"],Fk(t));const s=h(n,["error"]);return s!=null&&m(e,["error"],s),e}function Wk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Xk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=h(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),t}function Qk(n){const e={},t=h(n,["config"]);return t!=null&&Wk(t,e),e}function Zk(n){const e={},t=h(n,["config"]);return t!=null&&Xk(t,e),e}function eD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>od(u))),m(e,["batchJobs"],l)}return e}function tD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Up(u))),m(e,["batchJobs"],l)}return e}function nD(n){const e={},t=h(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=h(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&m(e,["fileData"],Hk(l));const u=h(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&m(e,["inlineData"],bk(d));const p=h(n,["text"]);p!=null&&m(e,["text"],p);const f=h(n,["thought"]);f!=null&&m(e,["thought"],f);const _=h(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const w=h(n,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function iD(n){const e={},t=h(n,["category"]);if(t!=null&&m(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function sD(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(_=>_)),m(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(n,["googleMaps"]);o!=null&&m(e,["googleMaps"],jk(o));const l=h(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],Jk(d));const p=h(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_RAG_STORES="ragStores",n.PAGED_ITEM_DOCUMENTS="documents"})(xo||(xo={}));class Tu{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rD extends No{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Tu(xo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=kw(this.apiClient,e),s=t._url,o=be("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,f=[];for(const _ of p){const w=Object.assign({},_);if(w.systemInstruction){const T=w.systemInstruction;delete w.systemInstruction;const C=w.request;C.systemInstruction=T,w.request=C}f.push(w)}return d.requests=f,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=Mk(this.apiClient,e);return d=be("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Up(_))}else{const f=kw(this.apiClient,e);return d=be("{model}:batchGenerateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>od(_))}}async createEmbeddingsInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Dk(this.apiClient,e);return l=be("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>od(p))}}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=$k(this.apiClient,e);return d=be("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Up(_))}else{const f=zk(this.apiClient,e);return d=be("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>od(_))}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const p=Ck(this.apiClient,e);u=be("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=Ak(this.apiClient,e);u=be("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=Zk(e);return d=be("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=tD(_),T=new xw;return Object.assign(T,w),T})}else{const f=Qk(e);return d=be("batches",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=eD(_),T=new xw;return Object.assign(T,w),T})}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=Uk(this.apiClient,e);return d=be("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>Lk(_))}else{const f=Pk(this.apiClient,e);return d=be("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>Ok(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oD(n){const e={},t=h(n,["data"]);if(t!=null&&m(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Dw(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>RD(l))),m(e,["parts"],o)}const s=h(n,["role"]);return s!=null&&m(e,["role"],s),e}function aD(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=h(n,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let _=ui(u);Array.isArray(_)&&(_=_.map(w=>Dw(w))),m(e,["contents"],_)}const d=h(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],Dw(hn(d)));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(w=>xD(w))),m(e,["tools"],_)}const f=h(n,["toolConfig"]);if(e!==void 0&&f!=null&&m(e,["toolConfig"],f),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function lD(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=h(n,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let w=ui(u);Array.isArray(w)&&(w=w.map(T=>T)),m(e,["contents"],w)}const d=h(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],hn(d));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let w=p;Array.isArray(w)&&(w=w.map(T=>ID(T))),m(e,["tools"],w)}const f=h(n,["toolConfig"]);e!==void 0&&f!=null&&m(e,["toolConfig"],f);const _=h(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function uD(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["model"],jT(n,s));const o=h(e,["config"]);return o!=null&&aD(o,t),t}function cD(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["model"],jT(n,s));const o=h(e,["config"]);return o!=null&&lD(o,t),t}function dD(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ds(n,s)),t}function fD(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ds(n,s)),t}function hD(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function pD(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function gD(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function mD(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&m(e,["description"],t);const s=h(n,["name"]);s!=null&&m(e,["name"],s);const o=h(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=h(n,["response"]);u!=null&&m(e,["response"],u);const d=h(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function yD(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ds(n,s)),t}function vD(n,e){const t={},s=h(e,["name"]);return s!=null&&m(t,["_url","name"],Ds(n,s)),t}function _D(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function wD(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function ED(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function TD(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function SD(n){const e={},t=h(n,["config"]);return t!=null&&ED(t,e),e}function bD(n){const e={},t=h(n,["config"]);return t!=null&&TD(t,e),e}function AD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function CD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function RD(n){const e={},t=h(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=h(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&m(e,["fileData"],gD(l));const u=h(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&m(e,["inlineData"],oD(d));const p=h(n,["text"]);p!=null&&m(e,["text"],p);const f=h(n,["thought"]);f!=null&&m(e,["thought"],f);const _=h(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const w=h(n,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function xD(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(_=>_)),m(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(n,["googleMaps"]);o!=null&&m(e,["googleMaps"],_D(o));const l=h(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],wD(d));const p=h(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function ID(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let w=t;Array.isArray(w)&&(w=w.map(T=>mD(T))),m(e,["functionDeclarations"],w)}const s=h(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=h(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=h(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],l);const u=h(n,["computerUse"]);u!=null&&m(e,["computerUse"],u);const d=h(n,["codeExecution"]);d!=null&&m(e,["codeExecution"],d);const p=h(n,["enterpriseWebSearch"]);p!=null&&m(e,["enterpriseWebSearch"],p);const f=h(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],f);const _=h(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function ND(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function MD(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=h(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function kD(n,e){const t={},s=h(e,["name"]);s!=null&&m(t,["_url","name"],Ds(n,s));const o=h(e,["config"]);return o!=null&&ND(o,t),t}function DD(n,e){const t={},s=h(e,["name"]);s!=null&&m(t,["_url","name"],Ds(n,s));const o=h(e,["config"]);return o!=null&&MD(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PD extends No{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Tu(xo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=cD(this.apiClient,e);return d=be("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const f=uD(this.apiClient,e);return d=be("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=vD(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const f=yD(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=fD(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=pD(_),T=new Cw;return Object.assign(T,w),T})}else{const f=dD(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=hD(_),T=new Cw;return Object.assign(T,w),T})}}async update(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=DD(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const f=kD(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=bD(e);return d=be("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=CD(_),T=new Rw;return Object.assign(T,w),T})}else{const f=SD(e);return d=be("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=AD(_),T=new Rw;return Object.assign(T,w),T})}}}function Pw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(n){return this instanceof At?(this.v=n,this):new At(n)}function Ua(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(C){return function(M){return Promise.resolve(M).then(C,w)}}function d(C,M){s[C]&&(o[C]=function(k){return new Promise(function(L,G){l.push([C,k,L,G])>1||p(C,k)})},M&&(o[C]=M(o[C])))}function p(C,M){try{f(s[C](M))}catch(k){T(l[0][3],k)}}function f(C){C.value instanceof At?Promise.resolve(C.value.v).then(_,w):T(l[0][2],C)}function _(C){p("next",C)}function w(C){p("throw",C)}function T(C,M){C(M),l.shift(),l.length&&p(l[0][0],l[0][1])}}function nu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Pw=="function"?Pw(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,p){u=n[l](u),o(d,p,u.done,u.value)})}}function o(l,u,d,p){Promise.resolve(p).then(function(f){l({value:f,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:rS(t)}function rS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function OD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Uw(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!rS(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class LD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new BD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class BD{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),OD(l)}async sendMessage(e){var t;await this.sendPromise;const s=hn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const p=await o,f=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,w=this.getHistory(!0).length;let T=[];_!=null&&(T=(d=_.slice(w))!==null&&d!==void 0?d:[]);const C=f?[f]:[];this.recordHistory(s,C,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=hn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?Uw(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return Ua(this,arguments,function*(){var u,d,p,f;const _=[];try{for(var w=!0,T=nu(e),C;C=yield At(T.next()),u=C.done,!u;w=!0){f=C.value,w=!1;const M=f;if(UD(M)){const k=(o=(s=M.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;k!==void 0&&_.push(k)}yield yield At(M)}}catch(M){d={error:M}}finally{try{!w&&!u&&(p=T.return)&&(yield At(p.call(T)))}finally{if(d)throw d.error}}this.recordHistory(t,_)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Uw(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VD(n){const e={},t=h(n,["file"]);return t!=null&&m(e,["file"],t),e}function qD(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function HD(n){const e={},t=h(n,["name"]);return t!=null&&m(e,["_url","file"],QT(t)),e}function GD(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function FD(n){const e={},t=h(n,["name"]);return t!=null&&m(e,["_url","file"],QT(t)),e}function zD(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function $D(n){const e={},t=h(n,["config"]);return t!=null&&zD(t,e),e}function jD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JD extends No{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Tu(xo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$D(e);return l=be("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const f=jD(p),_=new sk;return Object.assign(_,f),_})}}async createInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VD(e);return l=be("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const f=qD(p),_=new rk;return Object.assign(_,f),_})}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FD(e);return l=be("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HD(e);return l=be("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const f=GD(p),_=new ok;return Object.assign(_,f),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ad(n){const e={},t=h(n,["data"]);if(t!=null&&m(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function KD(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>uP(l))),m(e,["parts"],o)}const s=h(n,["role"]);return s!=null&&m(e,["role"],s),e}function YD(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function WD(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&m(e,["description"],t);const s=h(n,["name"]);s!=null&&m(e,["name"],s);const o=h(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=h(n,["response"]);u!=null&&m(e,["response"],u);const d=h(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function XD(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=h(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=h(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const l=h(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const u=h(n,["frequencyPenalty"]);u!=null&&m(e,["frequencyPenalty"],u);const d=h(n,["logprobs"]);d!=null&&m(e,["logprobs"],d);const p=h(n,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const f=h(n,["mediaResolution"]);f!=null&&m(e,["mediaResolution"],f);const _=h(n,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const w=h(n,["responseJsonSchema"]);w!=null&&m(e,["responseJsonSchema"],w);const T=h(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=h(n,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const M=h(n,["responseModalities"]);M!=null&&m(e,["responseModalities"],M);const k=h(n,["responseSchema"]);k!=null&&m(e,["responseSchema"],k);const L=h(n,["routingConfig"]);L!=null&&m(e,["routingConfig"],L);const G=h(n,["seed"]);G!=null&&m(e,["seed"],G);const $=h(n,["speechConfig"]);$!=null&&m(e,["speechConfig"],oS($));const H=h(n,["stopSequences"]);H!=null&&m(e,["stopSequences"],H);const Q=h(n,["temperature"]);Q!=null&&m(e,["temperature"],Q);const ae=h(n,["thinkingConfig"]);ae!=null&&m(e,["thinkingConfig"],ae);const ne=h(n,["topK"]);ne!=null&&m(e,["topK"],ne);const D=h(n,["topP"]);if(D!=null&&m(e,["topP"],D),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function QD(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function ZD(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function eP(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=h(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const f=h(n,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const _=h(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const w=h(n,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],wg(w));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=h(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=h(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],KD(hn(M)));const k=h(n,["tools"]);if(e!==void 0&&k!=null){let ne=ja(k);Array.isArray(ne)&&(ne=ne.map(D=>dP($a(D)))),m(e,["setup","tools"],ne)}const L=h(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],cP(L));const G=h(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&m(e,["setup","inputAudioTranscription"],G);const $=h(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","outputAudioTranscription"],$);const H=h(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const Q=h(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&m(e,["setup","contextWindowCompression"],Q);const ae=h(n,["proactivity"]);return e!==void 0&&ae!=null&&m(e,["setup","proactivity"],ae),t}function tP(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],XD(s));const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=h(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const f=h(n,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const _=h(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const w=h(n,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],oS(wg(w)));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=h(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=h(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],hn(M));const k=h(n,["tools"]);if(e!==void 0&&k!=null){let ne=ja(k);Array.isArray(ne)&&(ne=ne.map(D=>fP($a(D)))),m(e,["setup","tools"],ne)}const L=h(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],L);const G=h(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&m(e,["setup","inputAudioTranscription"],G);const $=h(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","outputAudioTranscription"],$);const H=h(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const Q=h(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&m(e,["setup","contextWindowCompression"],Q);const ae=h(n,["proactivity"]);return e!==void 0&&ae!=null&&m(e,["setup","proactivity"],ae),t}function nP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["setup","model"],ot(n,s));const o=h(e,["config"]);return o!=null&&m(t,["config"],eP(o,t)),t}function iP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["setup","model"],ot(n,s));const o=h(e,["config"]);return o!=null&&m(t,["config"],tP(o,t)),t}function sP(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function rP(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["weightedPrompts"],s)}return e}function oP(n){const e={},t=h(n,["media"]);if(t!=null){let f=JT(t);Array.isArray(f)&&(f=f.map(_=>ad(_))),m(e,["mediaChunks"],f)}const s=h(n,["audio"]);s!=null&&m(e,["audio"],ad(YT(s)));const o=h(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=h(n,["video"]);l!=null&&m(e,["video"],ad(KT(l)));const u=h(n,["text"]);u!=null&&m(e,["text"],u);const d=h(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=h(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function aP(n){const e={},t=h(n,["media"]);if(t!=null){let f=JT(t);Array.isArray(f)&&(f=f.map(_=>_)),m(e,["mediaChunks"],f)}const s=h(n,["audio"]);s!=null&&m(e,["audio"],YT(s));const o=h(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=h(n,["video"]);l!=null&&m(e,["video"],KT(l));const u=h(n,["text"]);u!=null&&m(e,["text"],u);const d=h(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=h(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function lP(n){const e={},t=h(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const s=h(n,["serverContent"]);s!=null&&m(e,["serverContent"],s);const o=h(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const l=h(n,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const u=h(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],hP(u));const d=h(n,["goAway"]);d!=null&&m(e,["goAway"],d);const p=h(n,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function uP(n){const e={},t=h(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=h(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&m(e,["fileData"],YD(l));const u=h(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&m(e,["inlineData"],ad(d));const p=h(n,["text"]);p!=null&&m(e,["text"],p);const f=h(n,["thought"]);f!=null&&m(e,["thought"],f);const _=h(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const w=h(n,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function cP(n){const e={},t=h(n,["handle"]);if(t!=null&&m(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oS(n){const e={},t=h(n,["languageCode"]);t!=null&&m(e,["languageCode"],t);const s=h(n,["voiceConfig"]);if(s!=null&&m(e,["voiceConfig"],s),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function dP(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(_=>_)),m(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(n,["googleMaps"]);o!=null&&m(e,["googleMaps"],QD(o));const l=h(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],ZD(d));const p=h(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function fP(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let w=t;Array.isArray(w)&&(w=w.map(T=>WD(T))),m(e,["functionDeclarations"],w)}const s=h(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=h(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=h(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],l);const u=h(n,["computerUse"]);u!=null&&m(e,["computerUse"],u);const d=h(n,["codeExecution"]);d!=null&&m(e,["codeExecution"],d);const p=h(n,["enterpriseWebSearch"]);p!=null&&m(e,["enterpriseWebSearch"],p);const f=h(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],f);const _=h(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function hP(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&m(e,["cachedContentTokenCount"],s);const o=h(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const l=h(n,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const u=h(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=h(n,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=h(n,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["promptTokensDetails"],C)}const f=h(n,["cacheTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["cacheTokensDetails"],C)}const _=h(n,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["responseTokensDetails"],C)}const w=h(n,["toolUsePromptTokensDetails"]);if(w!=null){let C=w;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["toolUsePromptTokensDetails"],C)}const T=h(n,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pP(n){const e={},t=h(n,["data"]);if(t!=null&&m(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function gP(n){const e={},t=h(n,["content"]);t!=null&&m(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],mP(s));const o=h(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=h(n,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=h(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=h(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=h(n,["index"]);p!=null&&m(e,["index"],p);const f=h(n,["logprobsResult"]);f!=null&&m(e,["logprobsResult"],f);const _=h(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const w=h(n,["urlContextMetadata"]);return w!=null&&m(e,["urlContextMetadata"],w),e}function mP(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function yP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let l=ui(o);Array.isArray(l)&&(l=l.map(u=>u)),m(t,["contents"],l)}return t}function vP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["tokensInfo"],o)}return e}function _P(n){const e={},t=h(n,["values"]);t!=null&&m(e,["values"],t);const s=h(n,["statistics"]);return s!=null&&m(e,["statistics"],wP(s)),e}function wP(n){const e={},t=h(n,["truncated"]);t!=null&&m(e,["truncated"],t);const s=h(n,["token_count"]);return s!=null&&m(e,["tokenCount"],s),e}function Dd(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>AU(l))),m(e,["parts"],o)}const s=h(n,["role"]);return s!=null&&m(e,["role"],s),e}function EP(n){const e={},t=h(n,["controlType"]);t!=null&&m(e,["controlType"],t);const s=h(n,["enableControlImageComputation"]);return s!=null&&m(e,["computeControl"],s),e}function TP(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function SP(n,e){const t={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],hn(s));const o=h(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>dS(d))),m(e,["tools"],u)}const l=h(n,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],fU(l)),t}function bP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let u=ui(o);Array.isArray(u)&&(u=u.map(d=>Dd(d))),m(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&TP(l),t}function AP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let u=ui(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&SP(l,t),t}function CP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);s!=null&&m(e,["totalTokens"],s);const o=h(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function RP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);return s!=null&&m(e,["totalTokens"],s),e}function xP(n,e){const t={},s=h(e,["model"]);return s!=null&&m(t,["_url","name"],ot(n,s)),t}function IP(n,e){const t={},s=h(e,["model"]);return s!=null&&m(t,["_url","name"],ot(n,s)),t}function NP(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function MP(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function kP(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=h(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=h(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=h(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=h(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const _=h(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const w=h(n,["includeSafetyAttributes"]);e!==void 0&&w!=null&&m(e,["parameters","includeSafetyAttributes"],w);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=h(n,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const M=h(n,["outputMimeType"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","mimeType"],M);const k=h(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","compressionQuality"],k);const L=h(n,["addWatermark"]);e!==void 0&&L!=null&&m(e,["parameters","addWatermark"],L);const G=h(n,["labels"]);e!==void 0&&G!=null&&m(e,["labels"],G);const $=h(n,["editMode"]);e!==void 0&&$!=null&&m(e,["parameters","editMode"],$);const H=h(n,["baseSteps"]);return e!==void 0&&H!=null&&m(e,["parameters","editConfig","baseSteps"],H),t}function DP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=h(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>MU(p))),m(t,["instances[0]","referenceImages"],d)}const u=h(e,["config"]);return u!=null&&kP(u,t),t}function PP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Pd(l))),m(e,["generatedImages"],o)}return e}function UP(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=h(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=h(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function OP(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const o=h(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const l=h(n,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const u=h(n,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=h(n,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),t}function LP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let d=yg(n,o);Array.isArray(d)&&(d=d.map(p=>p)),m(t,["requests[]","content"],d)}const l=h(e,["config"]);l!=null&&UP(l,t);const u=h(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],ot(n,u)),t}function BP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let u=yg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["instances[]","content"],u)}const l=h(e,["config"]);return l!=null&&OP(l,t),t}function VP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["embeddings"],l)}const o=h(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function qP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>_P(u))),m(e,["embeddings"],l)}const o=h(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function HP(n){const e={},t=h(n,["endpoint"]);t!=null&&m(e,["name"],t);const s=h(n,["deployedModelId"]);return s!=null&&m(e,["deployedModelId"],s),e}function GP(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function FP(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&m(e,["description"],t);const s=h(n,["name"]);s!=null&&m(e,["name"],s);const o=h(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=h(n,["response"]);u!=null&&m(e,["response"],u);const d=h(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function zP(n,e,t){const s={},o=h(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Dd(hn(o)));const l=h(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=h(e,["topP"]);u!=null&&m(s,["topP"],u);const d=h(e,["topK"]);d!=null&&m(s,["topK"],d);const p=h(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const f=h(e,["maxOutputTokens"]);f!=null&&m(s,["maxOutputTokens"],f);const _=h(e,["stopSequences"]);_!=null&&m(s,["stopSequences"],_);const w=h(e,["responseLogprobs"]);w!=null&&m(s,["responseLogprobs"],w);const T=h(e,["logprobs"]);T!=null&&m(s,["logprobs"],T);const C=h(e,["presencePenalty"]);C!=null&&m(s,["presencePenalty"],C);const M=h(e,["frequencyPenalty"]);M!=null&&m(s,["frequencyPenalty"],M);const k=h(e,["seed"]);k!=null&&m(s,["seed"],k);const L=h(e,["responseMimeType"]);L!=null&&m(s,["responseMimeType"],L);const G=h(e,["responseSchema"]);G!=null&&m(s,["responseSchema"],vg(G));const $=h(e,["responseJsonSchema"]);if($!=null&&m(s,["responseJsonSchema"],$),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=h(e,["safetySettings"]);if(t!==void 0&&H!=null){let V=H;Array.isArray(V)&&(V=V.map(U=>kU(U))),m(t,["safetySettings"],V)}const Q=h(e,["tools"]);if(t!==void 0&&Q!=null){let V=ja(Q);Array.isArray(V)&&(V=V.map(U=>BU($a(U)))),m(t,["tools"],V)}const ae=h(e,["toolConfig"]);if(t!==void 0&&ae!=null&&m(t,["toolConfig"],ae),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ne=h(e,["cachedContent"]);t!==void 0&&ne!=null&&m(t,["cachedContent"],Ds(n,ne));const D=h(e,["responseModalities"]);D!=null&&m(s,["responseModalities"],D);const I=h(e,["mediaResolution"]);I!=null&&m(s,["mediaResolution"],I);const x=h(e,["speechConfig"]);if(x!=null&&m(s,["speechConfig"],_g(x)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=h(e,["thinkingConfig"]);P!=null&&m(s,["thinkingConfig"],P);const O=h(e,["imageConfig"]);return O!=null&&m(s,["imageConfig"],O),s}function $P(n,e,t){const s={},o=h(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],hn(o));const l=h(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=h(e,["topP"]);u!=null&&m(s,["topP"],u);const d=h(e,["topK"]);d!=null&&m(s,["topK"],d);const p=h(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const f=h(e,["maxOutputTokens"]);f!=null&&m(s,["maxOutputTokens"],f);const _=h(e,["stopSequences"]);_!=null&&m(s,["stopSequences"],_);const w=h(e,["responseLogprobs"]);w!=null&&m(s,["responseLogprobs"],w);const T=h(e,["logprobs"]);T!=null&&m(s,["logprobs"],T);const C=h(e,["presencePenalty"]);C!=null&&m(s,["presencePenalty"],C);const M=h(e,["frequencyPenalty"]);M!=null&&m(s,["frequencyPenalty"],M);const k=h(e,["seed"]);k!=null&&m(s,["seed"],k);const L=h(e,["responseMimeType"]);L!=null&&m(s,["responseMimeType"],L);const G=h(e,["responseSchema"]);G!=null&&m(s,["responseSchema"],vg(G));const $=h(e,["responseJsonSchema"]);$!=null&&m(s,["responseJsonSchema"],$);const H=h(e,["routingConfig"]);H!=null&&m(s,["routingConfig"],H);const Q=h(e,["modelSelectionConfig"]);Q!=null&&m(s,["modelConfig"],Q);const ae=h(e,["safetySettings"]);if(t!==void 0&&ae!=null){let J=ae;Array.isArray(J)&&(J=J.map(le=>le)),m(t,["safetySettings"],J)}const ne=h(e,["tools"]);if(t!==void 0&&ne!=null){let J=ja(ne);Array.isArray(J)&&(J=J.map(le=>dS($a(le)))),m(t,["tools"],J)}const D=h(e,["toolConfig"]);t!==void 0&&D!=null&&m(t,["toolConfig"],D);const I=h(e,["labels"]);t!==void 0&&I!=null&&m(t,["labels"],I);const x=h(e,["cachedContent"]);t!==void 0&&x!=null&&m(t,["cachedContent"],Ds(n,x));const P=h(e,["responseModalities"]);P!=null&&m(s,["responseModalities"],P);const O=h(e,["mediaResolution"]);O!=null&&m(s,["mediaResolution"],O);const V=h(e,["speechConfig"]);V!=null&&m(s,["speechConfig"],cS(_g(V)));const U=h(e,["audioTimestamp"]);U!=null&&m(s,["audioTimestamp"],U);const Ue=h(e,["thinkingConfig"]);Ue!=null&&m(s,["thinkingConfig"],Ue);const Ie=h(e,["imageConfig"]);return Ie!=null&&m(s,["imageConfig"],Ie),s}function Ow(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let u=ui(o);Array.isArray(u)&&(u=u.map(d=>Dd(d))),m(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&m(t,["generationConfig"],zP(n,l,t)),t}function Lw(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["contents"]);if(o!=null){let u=ui(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const l=h(e,["config"]);return l!=null&&m(t,["generationConfig"],$P(n,l,t)),t}function Bw(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>gP(f))),m(e,["candidates"],p)}const o=h(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=h(n,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=h(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=h(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function Vw(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(_=>_)),m(e,["candidates"],f)}const o=h(n,["createTime"]);o!=null&&m(e,["createTime"],o);const l=h(n,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const u=h(n,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=h(n,["responseId"]);d!=null&&m(e,["responseId"],d);const p=h(n,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function jP(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const l=h(n,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=h(n,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=h(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const f=h(n,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const _=h(n,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const w=h(n,["outputMimeType"]);e!==void 0&&w!=null&&m(e,["parameters","outputOptions","mimeType"],w);const T=h(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=h(n,["imageSize"]);if(e!==void 0&&C!=null&&m(e,["parameters","sampleImageSize"],C),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function JP(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=h(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=h(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=h(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=h(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const _=h(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const w=h(n,["includeSafetyAttributes"]);e!==void 0&&w!=null&&m(e,["parameters","includeSafetyAttributes"],w);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=h(n,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const M=h(n,["outputMimeType"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","mimeType"],M);const k=h(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","compressionQuality"],k);const L=h(n,["addWatermark"]);e!==void 0&&L!=null&&m(e,["parameters","addWatermark"],L);const G=h(n,["labels"]);e!==void 0&&G!=null&&m(e,["labels"],G);const $=h(n,["imageSize"]);e!==void 0&&$!=null&&m(e,["parameters","sampleImageSize"],$);const H=h(n,["enhancePrompt"]);return e!==void 0&&H!=null&&m(e,["parameters","enhancePrompt"],H),t}function KP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&jP(l,t),t}function YP(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&JP(l,t),t}function WP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>lU(u))),m(e,["generatedImages"],l)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],lS(o)),e}function XP(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Pd(u))),m(e,["generatedImages"],l)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],uS(o)),e}function QP(n,e){const t={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=h(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=h(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=h(n,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=h(n,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=h(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const f=h(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&m(e,["parameters","enhancePrompt"],f),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=h(n,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],Ud(_));const w=h(n,["referenceImages"]);if(e!==void 0&&w!=null){let T=w;Array.isArray(T)&&(T=T.map(C=>XU(C))),m(e,["instances[0]","referenceImages"],T)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function ZP(n,e){const t={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=h(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const l=h(n,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const u=h(n,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=h(n,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=h(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const f=h(n,["resolution"]);e!==void 0&&f!=null&&m(e,["parameters","resolution"],f);const _=h(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const w=h(n,["pubsubTopic"]);e!==void 0&&w!=null&&m(e,["parameters","pubsubTopic"],w);const T=h(n,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const C=h(n,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const M=h(n,["generateAudio"]);e!==void 0&&M!=null&&m(e,["parameters","generateAudio"],M);const k=h(n,["lastFrame"]);e!==void 0&&k!=null&&m(e,["instances[0]","lastFrame"],Ni(k));const L=h(n,["referenceImages"]);if(e!==void 0&&L!=null){let H=L;Array.isArray(H)&&(H=H.map(Q=>QU(Q))),m(e,["instances[0]","referenceImages"],H)}const G=h(n,["mask"]);e!==void 0&&G!=null&&m(e,["instances[0]","mask"],WU(G));const $=h(n,["compressionQuality"]);return e!==void 0&&$!=null&&m(e,["parameters","compressionQuality"],$),t}function eU(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(n,["done"]);o!=null&&m(e,["done"],o);const l=h(n,["error"]);l!=null&&m(e,["error"],l);const u=h(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],sU(u)),e}function tU(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=h(n,["done"]);o!=null&&m(e,["done"],o);const l=h(n,["error"]);l!=null&&m(e,["error"],l);const u=h(n,["response"]);return u!=null&&m(e,["response"],rU(u)),e}function nU(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&m(t,["instances[0]","image"],Ud(l));const u=h(e,["video"]);u!=null&&m(t,["instances[0]","video"],fS(u));const d=h(e,["source"]);d!=null&&oU(d,t);const p=h(e,["config"]);return p!=null&&QP(p,t),t}function iU(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&m(t,["instances[0]","image"],Ni(l));const u=h(e,["video"]);u!=null&&m(t,["instances[0]","video"],hS(u));const d=h(e,["source"]);d!=null&&aU(d,t);const p=h(e,["config"]);return p!=null&&ZP(p,t),t}function sU(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>cU(u))),m(e,["generatedVideos"],l)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function rU(n){const e={},t=h(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>dU(u))),m(e,["generatedVideos"],l)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function oU(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ud(o));const l=h(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],fS(l)),t}function aU(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ni(o));const l=h(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],hS(l)),t}function lU(n){const e={},t=h(n,["_self"]);t!=null&&m(e,["image"],yU(t));const s=h(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=h(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],lS(o)),e}function Pd(n){const e={},t=h(n,["_self"]);t!=null&&m(e,["image"],aS(t));const s=h(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=h(n,["_self"]);o!=null&&m(e,["safetyAttributes"],uS(o));const l=h(n,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function uU(n){const e={},t=h(n,["_self"]);t!=null&&m(e,["mask"],aS(t));const s=h(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["labels"],o)}return e}function cU(n){const e={},t=h(n,["video"]);return t!=null&&m(e,["video"],KU(t)),e}function dU(n){const e={},t=h(n,["_self"]);return t!=null&&m(e,["video"],YU(t)),e}function fU(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=h(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=h(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const l=h(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const u=h(n,["frequencyPenalty"]);u!=null&&m(e,["frequencyPenalty"],u);const d=h(n,["logprobs"]);d!=null&&m(e,["logprobs"],d);const p=h(n,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const f=h(n,["mediaResolution"]);f!=null&&m(e,["mediaResolution"],f);const _=h(n,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const w=h(n,["responseJsonSchema"]);w!=null&&m(e,["responseJsonSchema"],w);const T=h(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=h(n,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const M=h(n,["responseModalities"]);M!=null&&m(e,["responseModalities"],M);const k=h(n,["responseSchema"]);k!=null&&m(e,["responseSchema"],k);const L=h(n,["routingConfig"]);L!=null&&m(e,["routingConfig"],L);const G=h(n,["seed"]);G!=null&&m(e,["seed"],G);const $=h(n,["speechConfig"]);$!=null&&m(e,["speechConfig"],cS($));const H=h(n,["stopSequences"]);H!=null&&m(e,["stopSequences"],H);const Q=h(n,["temperature"]);Q!=null&&m(e,["temperature"],Q);const ae=h(n,["thinkingConfig"]);ae!=null&&m(e,["thinkingConfig"],ae);const ne=h(n,["topK"]);ne!=null&&m(e,["topK"],ne);const D=h(n,["topP"]);if(D!=null&&m(e,["topP"],D),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function hU(n,e){const t={},s=h(e,["model"]);return s!=null&&m(t,["_url","name"],ot(n,s)),t}function pU(n,e){const t={},s=h(e,["model"]);return s!=null&&m(t,["_url","name"],ot(n,s)),t}function gU(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function mU(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function yU(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],Rr(t));const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function aS(n){const e={},t=h(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&m(e,["imageBytes"],Rr(s));const o=h(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Ud(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],Rr(t));const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Ni(n){const e={},t=h(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=h(n,["imageBytes"]);s!=null&&m(e,["bytesBase64Encoded"],Rr(s));const o=h(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function vU(n,e,t){const s={},o=h(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const l=h(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const u=h(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=h(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],ZT(n,d)),s}function _U(n,e,t){const s={},o=h(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const l=h(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const u=h(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=h(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],ZT(n,d)),s}function wU(n,e){const t={},s=h(e,["config"]);return s!=null&&vU(n,s,t),t}function EU(n,e){const t={},s=h(e,["config"]);return s!=null&&_U(n,s,t),t}function TU(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(n,["_self"]);if(o!=null){let l=eS(o);Array.isArray(l)&&(l=l.map(u=>Op(u))),m(e,["models"],l)}return e}function SU(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=h(n,["_self"]);if(o!=null){let l=eS(o);Array.isArray(l)&&(l=l.map(u=>Lp(u))),m(e,["models"],l)}return e}function bU(n){const e={},t=h(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const s=h(n,["segmentationClasses"]);s!=null&&m(e,["maskClasses"],s);const o=h(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function Op(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=h(n,["description"]);o!=null&&m(e,["description"],o);const l=h(n,["version"]);l!=null&&m(e,["version"],l);const u=h(n,["_self"]);u!=null&&m(e,["tunedModelInfo"],VU(u));const d=h(n,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=h(n,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const f=h(n,["supportedGenerationMethods"]);return f!=null&&m(e,["supportedActions"],f),e}function Lp(n){const e={},t=h(n,["name"]);t!=null&&m(e,["name"],t);const s=h(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=h(n,["description"]);o!=null&&m(e,["description"],o);const l=h(n,["versionId"]);l!=null&&m(e,["version"],l);const u=h(n,["deployedModels"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(T=>HP(T))),m(e,["endpoints"],w)}const d=h(n,["labels"]);d!=null&&m(e,["labels"],d);const p=h(n,["_self"]);p!=null&&m(e,["tunedModelInfo"],qU(p));const f=h(n,["defaultCheckpointId"]);f!=null&&m(e,["defaultCheckpointId"],f);const _=h(n,["checkpoints"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(T=>T)),m(e,["checkpoints"],w)}return e}function AU(n){const e={},t=h(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=h(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&m(e,["fileData"],GP(l));const u=h(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&m(e,["inlineData"],pP(d));const p=h(n,["text"]);p!=null&&m(e,["text"],p);const f=h(n,["thought"]);f!=null&&m(e,["thought"],f);const _=h(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const w=h(n,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function CU(n){const e={},t=h(n,["productImage"]);return t!=null&&m(e,["image"],Ni(t)),e}function RU(n,e){const t={},s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=h(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","editConfig","baseSteps"],o);const l=h(n,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const u=h(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=h(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=h(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const f=h(n,["addWatermark"]);e!==void 0&&f!=null&&m(e,["parameters","addWatermark"],f);const _=h(n,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const w=h(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&m(e,["parameters","outputOptions","compressionQuality"],w);const T=h(n,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const C=h(n,["labels"]);return e!==void 0&&C!=null&&m(e,["labels"],C),t}function xU(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["source"]);o!=null&&NU(o,t);const l=h(e,["config"]);return l!=null&&RU(l,t),t}function IU(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Pd(o))),m(e,["generatedImages"],s)}return e}function NU(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Ni(o));const l=h(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>CU(d))),m(e,["instances[0]","productImages"],u)}return t}function MU(n){const e={},t=h(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],Ni(t));const s=h(n,["referenceId"]);s!=null&&m(e,["referenceId"],s);const o=h(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const l=h(n,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],bU(l));const u=h(n,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],EP(u));const d=h(n,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=h(n,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function lS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=h(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function uS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=h(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function kU(n){const e={},t=h(n,["category"]);if(t!=null&&m(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function DU(n){const e={},t=h(n,["image"]);return t!=null&&m(e,["image"],Ni(t)),e}function PU(n,e){const t={},s=h(n,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const o=h(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const l=h(n,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const u=h(n,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=h(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=h(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),t}function UU(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["source"]);o!=null&&LU(o,t);const l=h(e,["config"]);return l!=null&&PU(l,t),t}function OU(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>uU(o))),m(e,["generatedMasks"],s)}return e}function LU(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=h(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ni(o));const l=h(n,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],DU(l)),t}function cS(n){const e={},t=h(n,["languageCode"]);t!=null&&m(e,["languageCode"],t);const s=h(n,["voiceConfig"]);if(s!=null&&m(e,["voiceConfig"],s),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function BU(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(_=>_)),m(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(n,["googleMaps"]);o!=null&&m(e,["googleMaps"],gU(o));const l=h(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],mU(d));const p=h(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function dS(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let w=t;Array.isArray(w)&&(w=w.map(T=>FP(T))),m(e,["functionDeclarations"],w)}const s=h(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=h(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=h(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],l);const u=h(n,["computerUse"]);u!=null&&m(e,["computerUse"],u);const d=h(n,["codeExecution"]);d!=null&&m(e,["codeExecution"],d);const p=h(n,["enterpriseWebSearch"]);p!=null&&m(e,["enterpriseWebSearch"],p);const f=h(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],f);const _=h(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function VU(n){const e={},t=h(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=h(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function qU(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=h(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function HU(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=h(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=h(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),t}function GU(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=h(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=h(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),t}function FU(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","name"],ot(n,s));const o=h(e,["config"]);return o!=null&&HU(o,t),t}function zU(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["config"]);return o!=null&&GU(o,t),t}function $U(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=h(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const l=h(n,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const u=h(n,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=h(n,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=h(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const f=h(n,["enhanceInputImage"]);e!==void 0&&f!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],f);const _=h(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const w=h(n,["labels"]);e!==void 0&&w!=null&&m(e,["labels"],w);const T=h(n,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const C=h(n,["mode"]);return e!==void 0&&C!=null&&m(e,["parameters","mode"],C),t}function jU(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["_url","model"],ot(n,s));const o=h(e,["image"]);o!=null&&m(t,["instances[0]","image"],Ni(o));const l=h(e,["upscaleFactor"]);l!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=h(e,["config"]);return u!=null&&$U(u,t),t}function JU(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Pd(l))),m(e,["generatedImages"],o)}return e}function KU(n){const e={},t=h(n,["uri"]);t!=null&&m(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Rr(s));const o=h(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function YU(n){const e={},t=h(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Rr(s));const o=h(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function WU(n){const e={},t=h(n,["image"]);t!=null&&m(e,["_self"],Ni(t));const s=h(n,["maskMode"]);return s!=null&&m(e,["maskMode"],s),e}function XU(n){const e={},t=h(n,["image"]);t!=null&&m(e,["image"],Ud(t));const s=h(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function QU(n){const e={},t=h(n,["image"]);t!=null&&m(e,["image"],Ni(t));const s=h(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function fS(n){const e={},t=h(n,["uri"]);t!=null&&m(e,["uri"],t);const s=h(n,["videoBytes"]);s!=null&&m(e,["encodedVideo"],Rr(s));const o=h(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function hS(n){const e={},t=h(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const s=h(n,["videoBytes"]);s!=null&&m(e,["bytesBase64Encoded"],Rr(s));const o=h(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZU="Content-Type",eO="X-Server-Timeout",tO="User-Agent",Bp="x-goog-api-client",nO="1.28.0",iO=`google-genai-sdk/${nO}`,sO="v1beta1",rO="v1beta",qw=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class oO{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:sO,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:rO,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&aO(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Hw(o),new Dp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Hw(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ua(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield At(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=l.decode(p,{stream:!0});try{const w=JSON.parse(f);if("error"in w){const T=JSON.parse(JSON.stringify(w.error)),C=T.status,M=T.code,k=`got status: ${C}. ${JSON.stringify(w)}`;if(M>=400&&M<600)throw new kd({message:k,status:M})}}catch(w){if(w.name==="ApiError")throw w}u+=f;let _=u.match(qw);for(;_;){const w=_[1];try{const T=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield At(new Dp(T)),u=u.slice(_[0].length),_=u.match(qw)}catch(T){throw new Error(`exception parsing stream chunk ${w}. ${T}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=iO+" "+this.clientOptions.userAgentExtra;return e[tO]=t,e[Bp]=t,e[ZU]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(eO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}async uploadFile(e,t){var s,o;const l={};t!=null&&(l.mimeType=t.mimeType,l.name=t.name,l.displayName=t.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);l.sizeBytes=String(d.size);const p=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=p;let f="";typeof e=="string"&&(f=e.replace(/[/\\]+$/,""),f=(o=f.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const _=await this.fetchUploadUrl(l,f,t);return u.upload(e,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s){var o;let l={};s!=null&&s.httpOptions?l=s.httpOptions:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},t?{"X-Goog-Upload-File-Name":t}:{})};const u={file:e},d=await this.request({path:be("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:l});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(o=d==null?void 0:d.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Hw(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new kd({message:o,status:t}):new Error(o)}}function aO(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const f=u[p],_=d[p];f&&typeof f=="object"&&!Array.isArray(f)&&_&&typeof _=="object"&&!Array.isArray(_)?d[p]=s(_,f):(_&&f&&typeof _!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof f}. Overwriting.`),d[p]=f)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lO="mcp_used/unknown";let uO=!1;function pS(n){for(const e of n)if(cO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return uO}function gS(n){var e;const t=(e=n[Bp])!==null&&e!==void 0?e:"";n[Bp]=(t+` ${lO}`).trimStart()}function cO(n){return n!==null&&typeof n=="object"&&n instanceof Eg}function dO(n,e=100){return Ua(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield At(n.listTools({cursor:s}));for(const u of l.tools)yield yield At(u),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class Eg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Eg(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,p=(t=void 0,nu(dO(_))),f;f=await p.next(),e=f.done,!e;d=!0){o=f.value,d=!1;const w=o;u.push(w);const T=w.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=_}}catch(w){t={error:w}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),mk(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fO(n,e,t){const s=new lk;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class hO{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=mO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const _=new Promise(H=>{f=H}),w=e.callbacks,T=function(){f({})},C=this.apiClient,M={onopen:T,onmessage:H=>{fO(C,w.onmessage,H)},onerror:(t=w==null?void 0:w.onerror)!==null&&t!==void 0?t:function(H){},onclose:(s=w==null?void 0:w.onclose)!==null&&s!==void 0?s:function(H){}},k=this.webSocketFactory.create(p,gO(u),M);k.connect(),await _;const $={setup:{model:ot(this.apiClient,e.model)}};return k.send(JSON.stringify($)),new pO(k,this.apiClient)}}class pO{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=rP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=sP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(xa.PLAY)}pause(){this.sendPlaybackControl(xa.PAUSE)}stop(){this.sendPlaybackControl(xa.STOP)}resetContext(){this.sendPlaybackControl(xa.RESET_CONTEXT)}close(){this.conn.close()}}function gO(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function mO(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vO(n,e,t){const s=new ak;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=lP(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class _O{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new hO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let _;const w=this.apiClient.getHeaders();e.config&&e.config.tools&&pS(e.config.tools)&&gS(w);const T=SO(w);if(this.apiClient.isVertexAI())_=`${p}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_);else{const x=this.apiClient.getApiKey();let P="BidiGenerateContent",O="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",O="access_token"),_=`${p}/ws/google.ai.generativelanguage.${f}.GenerativeService.${P}?${O}=${x}`}let C=()=>{};const M=new Promise(x=>{C=x}),k=e.callbacks,L=function(){var x;(x=k==null?void 0:k.onopen)===null||x===void 0||x.call(k),C({})},G=this.apiClient,$={onopen:L,onmessage:x=>{vO(G,k.onmessage,x)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(x){},onclose:(s=k==null?void 0:k.onclose)!==null&&s!==void 0?s:function(x){}},H=this.webSocketFactory.create(_,TO(T),$);H.connect(),await M;let Q=ot(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Q.startsWith("publishers/")){const x=this.apiClient.getProject(),P=this.apiClient.getLocation();Q=`projects/${x}/locations/${P}/`+Q}let ae={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sd.AUDIO]}:e.config.responseModalities=[Sd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ne=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const x of ne)if(this.isCallableTool(x)){const P=x;D.push(await P.tool())}else D.push(x);D.length>0&&(e.config.tools=D);const I={model:Q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=iP(this.apiClient,I):ae=nP(this.apiClient,I),delete ae.config,H.send(JSON.stringify(ae)),new EO(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const wO={turnComplete:!0};class EO{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ui(t.turns),e.isVertexAI()||(s=s.map(o=>Dd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(yO)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},wO),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:aP(e)}:t={realtimeInput:oP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function TO(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function SO(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gw=10;function Fw(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Oa(u)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Oa(n){return"callTool"in n&&typeof n.callTool=="function"}function bO(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Oa(o)))!==null&&s!==void 0?s:!1}function AO(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Oa(o)))!==null&&s!==void 0?s:!1}function zw(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CO extends No{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!bO(t)||Fw(t.config))return await this.generateContentInternal(p);if(AO(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,_;const w=ui(p.contents),T=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Gw;let C=0;for(;C<T&&(f=await this.generateContentInternal(p),!(!f.functionCalls||f.functionCalls.length===0));){const M=f.candidates[0].content,k=[];for(const L of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Oa(L)){const $=await L.callTool(f.functionCalls);k.push(...$)}C++,_={role:"user",parts:k},p.contents=ui(p.contents),p.contents.push(M),p.contents.push(_),zw(p.config)&&(w.push(M),w.push(_))}return zw(p.config)&&(f.automaticFunctionCallingHistory=w),f},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),Fw(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Tu(xo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>Oa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&pS(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},p);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),gS(f),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Oa(u)){const d=u,p=await d.tool();for(const f of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:Gw;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(f,_,w){var T,C;return Ua(this,arguments,function*(){for(var M,k,L,G;d<l;){u&&(d++,u=!1);const ae=yield At(f.processParamsMaybeAddMcpUsage(w)),ne=yield At(f.generateContentStreamInternal(ae)),D=[],I=[];try{for(var $=!0,H=(k=void 0,nu(ne)),Q;Q=yield At(H.next()),M=Q.done,!M;$=!0){G=Q.value,$=!1;const x=G;if(yield yield At(x),x.candidates&&(!((T=x.candidates[0])===null||T===void 0)&&T.content)){I.push(x.candidates[0].content);for(const P of(C=x.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(P.functionCall.name)){const O=yield At(_.get(P.functionCall.name).callTool([P.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(x){k={error:x}}finally{try{!$&&!M&&(L=H.return)&&(yield At(L.call(H)))}finally{if(k)throw k.error}}if(D.length>0){u=!0;const x=new $l;x.candidates=[{content:{role:"user",parts:D}}],yield yield At(x);const P=[];P.push(...I),P.push({role:"user",parts:D});const O=ui(w.contents).concat(P);w.contents=O}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=Lw(this.apiClient,e);return d=be("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=Vw(_),T=new $l;return Object.assign(T,w),T})}else{const f=Ow(this.apiClient,e);return d=be("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=Bw(_),T=new $l;return Object.assign(T,w),T})}}async generateContentStreamInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=Lw(this.apiClient,e);return d=be("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(w){return Ua(this,arguments,function*(){var T,C,M,k;try{for(var L=!0,G=nu(w),$;$=yield At(G.next()),T=$.done,!T;L=!0){k=$.value,L=!1;const H=k,Q=Vw(yield At(H.json()));Q.sdkHttpResponse={headers:H.headers};const ae=new $l;Object.assign(ae,Q),yield yield At(ae)}}catch(H){C={error:H}}finally{try{!L&&!T&&(M=G.return)&&(yield At(M.call(G)))}finally{if(C)throw C.error}}})})}else{const f=Ow(this.apiClient,e);return d=be("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(w){return Ua(this,arguments,function*(){var T,C,M,k;try{for(var L=!0,G=nu(w),$;$=yield At(G.next()),T=$.done,!T;L=!0){k=$.value,L=!1;const H=k,Q=Bw(yield At(H.json()));Q.sdkHttpResponse={headers:H.headers};const ae=new $l;Object.assign(ae,Q),yield yield At(ae)}}catch(H){C={error:H}}finally{try{!L&&!T&&(M=G.return)&&(yield At(M.call(G)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=BP(this.apiClient,e);return d=be("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=qP(_),T=new ww;return Object.assign(T,w),T})}else{const f=LP(this.apiClient,e);return d=be("{model}:batchEmbedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=VP(_),T=new ww;return Object.assign(T,w),T})}}async generateImagesInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=YP(this.apiClient,e);return d=be("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=XP(_),T=new Ew;return Object.assign(T,w),T})}else{const f=KP(this.apiClient,e);return d=be("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=WP(_),T=new Ew;return Object.assign(T,w),T})}}async editImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=DP(this.apiClient,e);return l=be("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const f=PP(p),_=new ZM;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=jU(this.apiClient,e);return l=be("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const f=JU(p),_=new ek;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=xU(this.apiClient,e);return l=be("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const f=IU(p),_=new tk;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=UU(this.apiClient,e);return l=be("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const f=OU(p),_=new nk;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=pU(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Lp(_))}else{const f=hU(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Op(_))}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=EU(this.apiClient,e);return d=be("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=SU(_),T=new Tw;return Object.assign(T,w),T})}else{const f=wU(this.apiClient,e);return d=be("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=TU(_),T=new Tw;return Object.assign(T,w),T})}}async update(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=zU(this.apiClient,e);return d=be("{model}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Lp(_))}else{const f=FU(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Op(_))}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=IP(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=MP(_),T=new Sw;return Object.assign(T,w),T})}else{const f=xP(this.apiClient,e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=NP(_),T=new Sw;return Object.assign(T,w),T})}}async countTokens(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=AP(this.apiClient,e);return d=be("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=RP(_),T=new bw;return Object.assign(T,w),T})}else{const f=bP(this.apiClient,e);return d=be("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=CP(_),T=new bw;return Object.assign(T,w),T})}}async computeTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=yP(this.apiClient,e);return l=be("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const f=vP(p),_=new ik;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=iU(this.apiClient,e);return d=be("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>{const w=tU(_),T=new bd;return Object.assign(T,w),T})}else{const f=nU(this.apiClient,e);return d=be("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const w=eU(_),T=new bd;return Object.assign(T,w),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RO extends No{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=WM(e);return d=be("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u}else{const f=YM(e);return d=be("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=GM(e);return l=be("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xO(n){const e={},t=h(n,["data"]);if(t!=null&&m(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function IO(n){const e={},t=h(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>LO(l))),m(e,["parts"],o)}const s=h(n,["role"]);return s!=null&&m(e,["role"],s),e}function NO(n,e,t){const s={},o=h(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const l=h(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&m(t,["newSessionExpireTime"],l);const u=h(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const d=h(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&m(t,["bidiGenerateContentSetup"],OO(n,d));const p=h(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),s}function MO(n,e){const t={},s=h(e,["config"]);return s!=null&&m(t,["config"],NO(n,s,t)),t}function kO(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function DO(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function PO(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function UO(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=h(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const f=h(n,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const _=h(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const w=h(n,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],wg(w));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=h(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=h(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],IO(hn(M)));const k=h(n,["tools"]);if(e!==void 0&&k!=null){let ne=ja(k);Array.isArray(ne)&&(ne=ne.map(D=>VO($a(D)))),m(e,["setup","tools"],ne)}const L=h(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],BO(L));const G=h(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&m(e,["setup","inputAudioTranscription"],G);const $=h(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","outputAudioTranscription"],$);const H=h(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const Q=h(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&m(e,["setup","contextWindowCompression"],Q);const ae=h(n,["proactivity"]);return e!==void 0&&ae!=null&&m(e,["setup","proactivity"],ae),t}function OO(n,e){const t={},s=h(e,["model"]);s!=null&&m(t,["setup","model"],ot(n,s));const o=h(e,["config"]);return o!=null&&m(t,["config"],UO(o,t)),t}function LO(n){const e={},t=h(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=h(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=h(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=h(n,["fileData"]);l!=null&&m(e,["fileData"],kO(l));const u=h(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=h(n,["inlineData"]);d!=null&&m(e,["inlineData"],xO(d));const p=h(n,["text"]);p!=null&&m(e,["text"],p);const f=h(n,["thought"]);f!=null&&m(e,["thought"],f);const _=h(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const w=h(n,["videoMetadata"]);return w!=null&&m(e,["videoMetadata"],w),e}function BO(n){const e={},t=h(n,["handle"]);if(t!=null&&m(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function VO(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(_=>_)),m(e,["functionDeclarations"],f)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(n,["googleMaps"]);o!=null&&m(e,["googleMaps"],DO(o));const l=h(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const u=h(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],PO(d));const p=h(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qO(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function HO(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=qO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(f=>u.includes(f)?`generationConfig.${f}`:f));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class GO extends No{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=MO(this.apiClient,e);l=be("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=HO(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FO(n,e){const t={},s=h(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function zO(n,e){const t={},s=h(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function $O(n,e,t){const s={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=h(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=h(n,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const u=h(n,["learningRateMultiplier"]);if(u!=null&&m(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=h(n,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=h(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function jO(n,e,t){const s={};let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const C=h(n,["validationDataset"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec"],$w(C))}else if(o==="PREFERENCE_TUNING"){const C=h(n,["validationDataset"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec"],$w(C))}const l=h(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const u=h(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=h(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=h(n,["epochCount"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=h(n,["epochCount"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let p=h(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const C=h(n,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(p==="PREFERENCE_TUNING"){const C=h(n,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let f=h(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=h(n,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(f==="PREFERENCE_TUNING"){const C=h(n,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let _=h(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const C=h(n,["adapterSize"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(_==="PREFERENCE_TUNING"){const C=h(n,["adapterSize"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const w=h(n,["labels"]);e!==void 0&&w!=null&&m(e,["labels"],w);const T=h(n,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function JO(n,e){const t={},s=h(n,["baseModel"]);s!=null&&m(t,["baseModel"],s);const o=h(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const l=h(n,["trainingDataset"]);l!=null&&s4(l);const u=h(n,["config"]);return u!=null&&$O(u,t),t}function KO(n,e){const t={},s=h(n,["baseModel"]);s!=null&&m(t,["baseModel"],s);const o=h(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const l=h(n,["trainingDataset"]);l!=null&&r4(l,t,e);const u=h(n,["config"]);return u!=null&&jO(u,t,e),t}function YO(n,e){const t={},s=h(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function WO(n,e){const t={},s=h(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function XO(n,e,t){const s={},o=h(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=h(n,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=h(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),s}function QO(n,e,t){const s={},o=h(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=h(n,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=h(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),s}function ZO(n,e){const t={},s=h(n,["config"]);return s!=null&&XO(s,t),t}function e4(n,e){const t={},s=h(n,["config"]);return s!=null&&QO(s,t),t}function t4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=h(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const l=h(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>mS(d))),m(t,["tuningJobs"],u)}return t}function n4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=h(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const l=h(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Vp(d))),m(t,["tuningJobs"],u)}return t}function i4(n,e){const t={},s=h(n,["name"]);s!=null&&m(t,["model"],s);const o=h(n,["name"]);return o!=null&&m(t,["endpoint"],o),t}function s4(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=h(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(t,["examples","examples"],o)}return t}function r4(n,e,t){const s={};let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=h(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function mS(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=h(n,["name"]);o!=null&&m(t,["name"],o);const l=h(n,["state"]);l!=null&&m(t,["state"],XT(l));const u=h(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=h(n,["tuningTask","startTime"]);d!=null&&m(t,["startTime"],d);const p=h(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const f=h(n,["updateTime"]);f!=null&&m(t,["updateTime"],f);const _=h(n,["description"]);_!=null&&m(t,["description"],_);const w=h(n,["baseModel"]);w!=null&&m(t,["baseModel"],w);const T=h(n,["_self"]);return T!=null&&m(t,["tunedModel"],i4(T)),t}function Vp(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=h(n,["name"]);o!=null&&m(t,["name"],o);const l=h(n,["state"]);l!=null&&m(t,["state"],XT(l));const u=h(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=h(n,["startTime"]);d!=null&&m(t,["startTime"],d);const p=h(n,["endTime"]);p!=null&&m(t,["endTime"],p);const f=h(n,["updateTime"]);f!=null&&m(t,["updateTime"],f);const _=h(n,["error"]);_!=null&&m(t,["error"],_);const w=h(n,["description"]);w!=null&&m(t,["description"],w);const T=h(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const C=h(n,["tunedModel"]);C!=null&&m(t,["tunedModel"],C);const M=h(n,["preTunedModel"]);M!=null&&m(t,["preTunedModel"],M);const k=h(n,["supervisedTuningSpec"]);k!=null&&m(t,["supervisedTuningSpec"],k);const L=h(n,["preferenceOptimizationSpec"]);L!=null&&m(t,["preferenceOptimizationSpec"],L);const G=h(n,["tuningDataStats"]);G!=null&&m(t,["tuningDataStats"],G);const $=h(n,["encryptionSpec"]);$!=null&&m(t,["encryptionSpec"],$);const H=h(n,["partnerModelTuningSpec"]);H!=null&&m(t,["partnerModelTuningSpec"],H);const Q=h(n,["customBaseModel"]);Q!=null&&m(t,["customBaseModel"],Q);const ae=h(n,["experiment"]);ae!=null&&m(t,["experiment"],ae);const ne=h(n,["labels"]);ne!=null&&m(t,["labels"],ne);const D=h(n,["outputUri"]);D!=null&&m(t,["outputUri"],D);const I=h(n,["pipelineJob"]);I!=null&&m(t,["pipelineJob"],I);const x=h(n,["serviceAccount"]);x!=null&&m(t,["serviceAccount"],x);const P=h(n,["tunedModelDisplayName"]);P!=null&&m(t,["tunedModelDisplayName"],P);const O=h(n,["veoTuningSpec"]);return O!=null&&m(t,["veoTuningSpec"],O),t}function o4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=h(n,["name"]);o!=null&&m(t,["name"],o);const l=h(n,["metadata"]);l!=null&&m(t,["metadata"],l);const u=h(n,["done"]);u!=null&&m(t,["done"],u);const d=h(n,["error"]);return d!=null&&m(t,["error"],d),t}function $w(n,e){const t={},s=h(n,["gcsUri"]);s!=null&&m(t,["validationDatasetUri"],s);const o=h(n,["vertexDatasetResource"]);return o!=null&&m(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a4 extends No{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Tu(xo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:kp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=WO(e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>Vp(_))}else{const f=YO(e);return d=be("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>mS(_))}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=e4(e);return d=be("tuningJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=n4(_),T=new Aw;return Object.assign(T,w),T})}else{const f=ZO(e);return d=be("tunedModels",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const w=t4(_),T=new Aw;return Object.assign(T,w),T})}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const p=zO(e);u=be("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=FO(e);u=be("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=KO(e,e);return l=be("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>Vp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JO(e);return l=be("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>o4(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l4{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const u4=1024*1024*8,c4=3,d4=1e3,f4=2,ip="x-goog-upload-status";async function h4(n,e,t){var s,o,l;let u=0,d=0,p=new Dp(new Response),f="upload";for(u=n.size;d<u;){const w=Math.min(u4,u-d),T=n.slice(d,d+w);d+w>=u&&(f+=", finalize");let C=0,M=d4;for(;C<c4&&(p=await t.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(d),"Content-Length":String(w)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[ip]));)C++,await g4(M),M=M*f4;if(d+=w,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[ip])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const _=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[ip])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return _.file}async function p4(n){return{size:n.size,type:n.type}}function g4(n){return new Promise(e=>setTimeout(e,n))}class m4{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await h4(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await p4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y4{create(e,t,s){return new v4(e,t,s)}}class v4{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jw="x-goog-api-key";class _4{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(jw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(jw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w4="gl-node/";class yS{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=qM(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new _4(this.apiKey);this.apiClient=new oO({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:w4+"web",uploader:new m4,downloader:new l4}),this.models=new CO(this.apiClient),this.live=new _O(this.apiClient,o,new y4),this.batches=new rD(this.apiClient),this.chats=new LD(this.models,this.apiClient),this.caches=new PD(this.apiClient),this.files=new JD(this.apiClient),this.operations=new RO(this.apiClient),this.authTokens=new GO(this.apiClient),this.tunings=new a4(this.apiClient)}}const Jw=n=>n.split(",")[1],E4=()=>"AIzaSyDY5rrhsQI3AzDHPnNpeOG0vEpChHA5d8o",T4=async(n,e,t)=>{const s=E4(),o=new yS({apiKey:s}),u=(await Promise.all(n.map(async f=>({...f,processedUrl:await Ip(f.processedUrl,1024,1024)})))).map(f=>({inlineData:{mimeType:"image/png",data:Jw(f.processedUrl)}}));if(t){const f=await Ip(t,1024,1024);u.push({inlineData:{mimeType:"image/png",data:Jw(f)}})}const p={parts:[{text:e},...u]};try{const f=await o.models.generateContent({model:"gemini-3-pro-image-preview",contents:p,config:{responseModalities:["TEXT","IMAGE"]}});for(const _ of f.candidates[0].content.parts)if(_.inlineData)return`data:image/png;base64,${_.inlineData.data}`;throw new Error("AI did not return an image.")}catch(f){throw console.error("AI Variation generation failed:",f),f}},S4=n=>n.split(",")[1],b4=()=>"AIzaSyDY5rrhsQI3AzDHPnNpeOG0vEpChHA5d8o",Zc=async(n,e=1024,t="9:16")=>{var w,T;console.log("[Nanobanana]  Starting processWithNanobanana"),console.log("[Nanobanana]  Input URL length:",n.length),console.log("[Nanobanana]  Resolution:",e,"Aspect Ratio:",t);const s=b4();console.log("[Nanobanana]  API key obtained (length):",s.length);const o=new yS({apiKey:s});let l,u;t==="9:16"?(l=e,u=Math.round(e*16/9)):t==="16:9"?(l=e,u=Math.round(e*9/16)):(l=e,u=e),console.log("[Nanobanana]  Resizing to:",l,"x",u);const d=await Ip(n,l,u);console.log("[Nanobanana]  Resized URL length:",d.length);const p=S4(d);console.log("[Nanobanana]  Base64 length:",p.length);const f=`TASK: Create a complete ${t} aspect ratio image by filling ALL empty/black/cropped areas with seamless background.

CRITICAL OUTPUT REQUIREMENTS:
- Output MUST be ${t} aspect ratio (${l}x${u} pixels)
- The ENTIRE logo/object must be visible - NOTHING cut off or cropped
- ALL edges must be filled with organic, seamless background - NO black pixels anywhere

ABSOLUTE RULES:
1. PRESERVE THE COMPLETE LOGO: Every part of the logo must remain fully visible. Do NOT crop, cut, or hide any portion
2. ZERO BLACK/EMPTY AREAS: Fill every pixel with appropriate content - no black borders, no empty spaces
3. SEAMLESS EXTENSION: Extend the background naturally in all directions to fill the ${t} frame
4. ORGANIC RESULT: The final image must look like a natural, complete photograph - not a composited image

LOGO HANDLING:
- Keep the logo at its EXACT current size and position
- Do NOT resize, rotate, or move the logo
- You MAY enhance quality (sharpen, improve resolution) but NOT alter composition

BACKGROUND FILL:
- Analyze the existing background texture, color, and lighting
- Extend it seamlessly to fill all empty areas
- Ensure smooth, invisible transitions between original and generated content
- Create a cohesive, professional result

OUTPUT: A complete ${t} image where the full logo is visible and all surrounding areas are filled with seamlessly blended background.`,_=C=>C>=4096?"4K":C>=2048?"2K":"1K";try{console.log("[Nanobanana]  Sending request to Gemini API...");const C=await o.models.generateContent({model:"gemini-3-pro-image-preview",contents:{parts:[{text:f},{inlineData:{mimeType:"image/png",data:p}}]},config:{responseModalities:["TEXT","IMAGE"],imageConfig:{aspectRatio:t,imageSize:_(e)}}});console.log("[Nanobanana]  Response received from Gemini API");const M=(w=C.candidates)==null?void 0:w[0];if(console.log("[Nanobanana]  Candidates count:",((T=C.candidates)==null?void 0:T.length)||0),!M)throw new Error("No candidates returned from AI.");console.log("[Nanobanana]  Parts count:",M.content.parts.length);for(const k of M.content.parts)if(console.log("[Nanobanana]  Part type:",k.text?"text":k.inlineData?"inlineData":"unknown"),k.inlineData){const L=k.inlineData.data;console.log("[Nanobanana]  Image received! Base64 length:",L.length);const G=`data:image/png;base64,${L}`;return console.log("[Nanobanana]  Returning data URL, length:",G.length),G}throw console.error("[Nanobanana]  No image in response parts"),new Error("AI did not return an image in the response.")}catch(C){throw console.error("Nanobanana (Edge Fill) processing failed:",C),C}},sp=20,gr=async()=>{const n=Io();if(!n)return 0;if(wu(n.email))return gI;try{const{data:e,error:t}=await Nn.from("user_credits").select("credits").eq("user_id",n.uid).maybeSingle();if(t)return console.error("Error fetching credits:",t),0;if(!e){const{data:s,error:o}=await Nn.rpc("add_credits",{p_user_id:n.uid,p_amount:sp,p_type:"bonus",p_description:"Welcome bonus"});return o?(console.error("Error adding welcome bonus:",o),0):(console.log(`Welcome bonus of ${sp} credits added for user ${n.uid}`),s||sp)}return e.credits||0}catch(e){return console.error("Error getting credits:",e),0}},ed=async n=>{const e=Io();if(!e)return!1;if(wu(e.email))return!0;try{const{error:t}=await Nn.rpc("deduct_credits",{p_user_id:e.uid,p_amount:n,p_reason:"Image processing"});return t?(console.error("Error deducting credits:",t),!1):!0}catch(t){return console.error("Error deducting credits:",t),!1}},Kw=async n=>{const e=Io();return e?wu(e.email)?!0:await gr()>=n:!1},A4=({value:n,onChange:e,resolution:t,onResolutionChange:s,imageCount:o})=>{const l=o*17,d=(p=>{if(p<60)return`${p}s`;const f=Math.floor(p/60),_=p%60;return _>0?`${f}m ${_}s`:`${f}m`})(l);return S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsx("label",{className:"text-gray-300 font-medium text-lg",children:"Processing Mode"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("button",{onClick:()=>e("draft"),className:`relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-200 ${n==="draft"?"border-yellow-500 bg-yellow-500/10 text-yellow-400":"border-gray-700 bg-gray-800/50 text-gray-400 hover:border-gray-600 hover:bg-gray-800"}`,children:[S.jsx("svg",{className:"w-6 h-6 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),S.jsx("span",{className:"font-bold",children:"Draft"}),S.jsx("span",{className:"text-xs opacity-70 mt-1",children:"Test Settings"}),S.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 text-black text-[10px] font-bold px-2 py-0.5 rounded-full",children:"FREE"})]}),S.jsxs("button",{onClick:()=>e("fast"),className:`relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-200 ${n==="fast"?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-gray-700 bg-gray-800/50 text-gray-400 hover:border-gray-600 hover:bg-gray-800"}`,children:[S.jsx(dA,{className:"w-6 h-6 mb-2"}),S.jsx("span",{className:"font-bold",children:"Fast"}),S.jsx("span",{className:"text-xs opacity-70 mt-1",children:"Crop & Pad"})]}),S.jsxs("button",{onClick:()=>e("pro"),className:`relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-200 ${n==="pro"?"border-purple-500 bg-purple-500/10 text-purple-400":"border-gray-700 bg-gray-800/50 text-gray-400 hover:border-gray-600 hover:bg-gray-800"}`,children:[S.jsx(yA,{className:"w-6 h-6 mb-2"}),S.jsx("span",{className:"font-bold",children:"Pro"}),S.jsx("span",{className:"text-xs opacity-70 mt-1",children:"AI Edge Fill"}),n==="pro"&&S.jsxs("div",{className:"absolute -top-2 -right-2 bg-purple-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:["+",d]})]})]}),n==="pro"&&S.jsxs("div",{className:"space-y-3 p-3 rounded-lg border border-purple-500/20 bg-purple-900/10 animate-fade-in",children:[S.jsxs("div",{className:"flex items-center justify-between gap-2",children:[S.jsx("span",{className:"text-xs font-medium text-purple-300",children:"Resolution:"}),S.jsx("div",{className:"flex bg-gray-800 rounded-lg p-1 border border-gray-700",children:[1024,2048,4096].map(p=>S.jsx("button",{onClick:()=>s(p),className:`px-2 py-1 text-xs font-bold rounded transition-colors ${t===p?"bg-purple-500 text-white shadow-sm":"text-gray-400 hover:text-gray-200"}`,children:p===1024?"1K":p===2048?"2K":"4K"},p))})]}),S.jsx("div",{className:"text-xs text-purple-300/70 border-t border-purple-500/10 pt-2",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Pro Mode:"})," Uses Nanobanana AI to realistically fill edges. Adds ~",d," processing time."]})})]})]})},C4=()=>S.jsx("svg",{className:"w-4 h-6",viewBox:"0 0 9 16",fill:"currentColor",children:S.jsx("rect",{x:"0.5",y:"0.5",width:"8",height:"15",rx:"1",stroke:"currentColor",strokeWidth:"1",fill:"none"})}),R4=()=>S.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 16 16",fill:"currentColor",children:S.jsx("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"1",stroke:"currentColor",strokeWidth:"1",fill:"none"})}),x4=()=>S.jsx("svg",{className:"w-6 h-4",viewBox:"0 0 16 9",fill:"currentColor",children:S.jsx("rect",{x:"0.5",y:"0.5",width:"15",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"1",fill:"none"})}),I4=[{value:"9:16",icon:S.jsx(C4,{})},{value:"1:1",icon:S.jsx(R4,{})},{value:"16:9",icon:S.jsx(x4,{})}],N4=({selectedRatio:n,onSelectRatio:e})=>S.jsxs("div",{className:"w-full flex flex-col items-center",children:[S.jsx("p",{className:"text-center text-lg text-gray-300 mb-2",children:"3. Choose the output aspect ratio."}),S.jsx("div",{className:"flex justify-center bg-gray-700/50 rounded-lg p-1 space-x-1",children:I4.map(({value:t,icon:s})=>S.jsxs("button",{onClick:()=>e(t),className:`px-4 py-2 flex items-center gap-2 text-sm font-semibold rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-cyan-500
              ${n===t?"bg-cyan-500 text-white shadow":"bg-gray-600 text-gray-300 hover:bg-cyan-400/50"}`,title:t,children:[s,S.jsx("span",{children:t})]},t))})]}),M4="Generate a hyper-realistic image where the logo is PHYSICALLY EMBEDDED into the surface material. CRITICAL PRIORITY 1: GEOMETRY PRESERVATION. The logo's shape, text, and outlines must be preserved 100% perfectly. Do NOT distort, warp, skew, or melt the logo characters. They must remain sharp, legible, and true to the original geometry. CRITICAL PRIORITY 2: HIGH CONTRAST. Ensure a STRONG brightness contrast between the logo and the background material. If the logo is light, the background must be dark/mid-tone. If the logo is dark, the background must be light. The logo must stand out clearly. MATERIALITY: The logo must inherit the surface texture (grain, weave) and lighting to look embedded, but without losing its shape. PHOTOGRAPHY STYLE: 150mm telephoto lens, super close-up macro. Authentic, raw, with realistic texture details. Avoid extreme angles that would distort the logo readability.",Yw=["a storefront","a product","clothing","a digital screen","graffiti on a wall","a hand written post it","a flyer in a hand","a mug print","an embroidered logo on a baseball cap","an embroidered logo on a T-shirt","a trade show display"],ba=(n,e)=>{const t=n.message||"An unknown error occurred.";return t.includes("Not enough good matches")?`Alignment failed for "${e}". The image may be too blurry, low-contrast, or different from the master. Tip: Try enabling "Greedy Mode" for difficult images.`:t.includes("GEMINI_API_KEY not configured")?"Server API key not configured. Please contact support.":t.includes("OpenCV internal error code")?`A low-level image alignment error occurred for "${e}". The perspective transform became unstable or invalid for this image. Try a cleaner scan, less extreme perspective, or disabling perspective correction for this file.`:`An error occurred with "${e}": ${t}`};function k4(){const[n,e]=ue.useState([]),[t,s]=ue.useState(null),[o,l]=ue.useState(new Map),[u,d]=ue.useState([]),[p,f]=ue.useState(!1),[_,w]=ue.useState(!1),[T,C]=ue.useState(new Set),[M,k]=ue.useState(""),[L,G]=ue.useState(null),[$,H]=ue.useState(0),[Q,ae]=ue.useState(0),[ne,D]=ue.useState(!1),[I,x]=ue.useState(!1),[P,O]=ue.useState(3),V=!1,U=P>=1,Ue=P>=3,Ie=P>=2,[J,le]=ue.useState("fast"),se=J==="pro",pe=J==="draft",[_e,B]=ue.useState(1024),[Y,ce]=ue.useState(!1),[oe,Ee]=ue.useState(!1),[ge,Ce]=ue.useState(1),[fe,tt]=ue.useState("9:16"),[Ki,di]=ue.useState(null),[xr,Ps]=ue.useState(Yw),[an,Ir]=ue.useState(Yw),[fi,Mo]=ue.useState(""),[Yi,Pt]=ue.useState(null),[Oe,Mi]=ue.useState(null),[ko,Mn]=ue.useState(0),[Xt,jn]=ue.useState(!1),[Nr,Us]=ue.useState("login"),[ki,Mr]=ue.useState(!1),[Do,kr]=ue.useState(!1),[Ka,wn]=ue.useState(!1),[qt,Qt]=ue.useState({isOpen:!1,creditsNeeded:0}),Ct=ue.useRef(0);ue.useEffect(()=>{const me=()=>{window.cv&&window.cv.getBuildInformation?(console.log("OpenCV is ready."),D(!0)):setTimeout(me,100)};me();const we=localStorage.getItem("logoLapserPromptSnippets");if(we)try{const Ne=JSON.parse(we);Array.isArray(Ne)&&Ne.every(nt=>typeof nt=="string")&&(Ps(Ne),Ne.length>0&&Ir(Ne))}catch(Ne){console.error("Failed to parse stored prompt snippets:",Ne)}const ye=fI(async Ne=>{if(Mi(Ne),Ne){const nt=await gr();Mn(nt)}else Mn(0)}),de=new URLSearchParams(window.location.search),Re=de.get("payment"),Ye=de.get("token");return Ye&&Re==="success"?(async()=>{try{const Ne=await cM(Ye);"error"in Ne?alert("Payment failed: "+Ne.error):setTimeout(async()=>{const nt=await gr();Mn(nt),alert(" PayPal payment successful! Your credits have been added.")},1e3)}catch(Ne){console.error("PayPal capture error:",Ne),alert("Failed to complete PayPal payment. Please contact support.")}window.history.replaceState({},"",window.location.pathname)})():Re==="success"?(setTimeout(async()=>{const Ne=await gr();Mn(Ne),alert(" Payment successful! Your credits have been added.")},2e3),window.history.replaceState({},"",window.location.pathname)):Re==="cancelled"&&(alert("Payment was cancelled."),window.history.replaceState({},"",window.location.pathname)),()=>ye()},[]);const Dr=ue.useCallback(async me=>{const we=new Map(o);e(me?ye=>ye.map(de=>{if(de.id===me)return we.set(de.id,{needsPerspectiveCorrection:de.needsPerspectiveCorrection||!1,needsSimpleMatch:de.needsSimpleMatch||!1}),{...de,needsPerspectiveCorrection:!1,needsSimpleMatch:!1,isLuminanceInverted:!1};if(de.id===t){const Re=we.get(de.id);if(Re&&typeof Re=="object")return{...de,...Re}}return{...de,isLuminanceInverted:!1}}):ye=>ye.map(de=>{if(de.id===t){const Re=we.get(de.id);if(Re&&typeof Re=="object")return{...de,...Re}}return de})),l(we),s(me)},[t,o,n,ne]),Po=ue.useCallback(async me=>{G(null);const we=await Promise.all(me.filter(ye=>["image/png","image/jpeg"].includes(ye.type)).map(async ye=>{const de=await NM(ye);return{id:`${ye.name}-${ye.lastModified}`,file:ye,previewUrl:de.src,imageElement:de,needsPerspectiveCorrection:!0,needsSimpleMatch:!1}}));e(ye=>[...ye,...we])},[]),Jn=ue.useCallback(me=>{e(we=>we.map(ye=>ye.id===me?{...ye,needsSimpleMatch:!ye.needsSimpleMatch,needsPerspectiveCorrection:ye.needsSimpleMatch}:ye))},[]),Wi=ue.useCallback(me=>{e(we=>we.map(ye=>ye.id===me?{...ye,isLuminanceInverted:!ye.isLuminanceInverted}:ye))},[]),Rt=ue.useCallback(()=>{d([]),k(""),G(null)},[]),Kn=ue.useCallback(()=>{e([]),s(null),d([]),k(""),G(null),H(0),f(!1),w(!1),l(new Map)},[]),Yn=ue.useCallback(me=>{e(we=>{const ye=we.find(de=>de.id===me);return ye&&URL.revokeObjectURL(ye.previewUrl),we.filter(de=>de.id!==me)}),t===me&&s(null)},[t]),kn=ue.useCallback(me=>{const we=u.filter(ye=>ye.id!==me);e(ye=>ye.find(Re=>Re.id===me)&&!me.startsWith("ai-var-")?ye.filter(Re=>Re.id!==me):ye),d(we),t===me&&s(null),we.length===0&&Rt()},[u,t,Rt]),Wa=ue.useCallback(async me=>{const we=n.find(de=>de.id===me),ye=u.find(de=>de.id===t);if(!we||!ye){G(`Could not find necessary files to fix perspective for ${me}.`);return}di(me),G(null);try{const de=await _s(ye.processedUrl);let{processedUrl:Re,debugUrl:Ye}=await Sa(de,we.imageElement,V,U,!0,!1,!1,fe,se,we.isLuminanceInverted||!1);if(se)try{if(Re=await Zc(Re,_e,fe),Oe){const Ne=_e>=4096?12:_e>1024?9:6;await ed(Ne);const nt=await gr();Mn(nt)}}catch(Ne){console.error("AI Edge Fill failed during fix:",Ne),G(`Edge Fill failed: ${Ne.message}`)}d(Ne=>Ne.map(nt=>nt.id===me?{...nt,processedUrl:Re,debugUrl:Ye}:nt))}catch(de){G(ba(de,we.file.name))}finally{di(null)}},[t,n,u,V,U,fe,se,_e,Oe]),Uo=ue.useCallback(async me=>{const we=n.find(de=>de.id===me),ye=n.find(de=>de.id===t);if(!we||!ye){G(`Could not find necessary files to fix simple match for ${me}.`);return}di(me),G(null);try{let{processedUrl:de,debugUrl:Re}=await Sa(ye.imageElement,we.imageElement,V,!0,!1,!0,!1,fe,se,we.isLuminanceInverted||!1);if(Ie&&u.length>1){const Ye=u.find(Ne=>Ne.id===t);if(Ye)try{const Ne=await _s(Ye.processedUrl);de=await np(de,Ne,se)}catch(Ne){console.error("Error during ensemble refinement for simple match:",Ne)}}if(se)try{if(de=await Zc(de,_e,fe),Oe){const Ye=_e>=4096?12:_e>1024?9:6;await ed(Ye);const Ne=await gr();Mn(Ne)}}catch(Ye){console.error("AI Edge Fill failed during fix:",Ye),G(`Edge Fill failed: ${Ye.message}`)}d(Ye=>Ye.map(Ne=>Ne.id===me?{...Ne,processedUrl:de,debugUrl:Re}:Ne))}catch(de){G(ba(de,we.file.name))}finally{di(null)}},[n,t,V,U,Ie,u,fe,se,_e,Oe]),En=ue.useCallback(()=>_e>=4096?12:_e>1024?9:6,[_e]),Wn=ue.useRef(u);Wn.current=u;const Xa=ue.useCallback(async me=>{console.log("[RetryEdgeFill]  Starting retry for fileId:",me);const we=Wn.current.find(de=>de.id===me);if(console.log("[RetryEdgeFill]  Found file in ref:",we?we.originalName:"NOT FOUND"),console.log("[RetryEdgeFill]  Current processedFiles count:",Wn.current.length),!we){console.error("[RetryEdgeFill]  File not found, aborting");return}const ye=En();if(console.log("[RetryEdgeFill]  Credit cost:",ye),Oe){const de=await Kw(ye);if(console.log("[RetryEdgeFill]  Has enough credits:",de),!de){Qt({isOpen:!0,creditsNeeded:ye});return}}C(de=>new Set(de).add(me)),G(null),console.log("[RetryEdgeFill]  Added to retrying set, starting API call...");try{const de=Wn.current.find(Ye=>Ye.id===me);if(!de)throw new Error("File not found");console.log("[RetryEdgeFill]  Input URL length:",de.processedUrl.length),console.log("[RetryEdgeFill]  Input URL prefix:",de.processedUrl.substring(0,50));const Re=await Zc(de.processedUrl,_e,fe);if(console.log("[RetryEdgeFill]  API returned successfully!"),console.log("[RetryEdgeFill]  Output URL length:",Re.length),console.log("[RetryEdgeFill]  Output URL prefix:",Re.substring(0,50)),console.log("[RetryEdgeFill]  URLs are different:",de.processedUrl!==Re),Oe){await ed(ye);const Ye=await gr();Mn(Ye),console.log("[RetryEdgeFill]  Credits deducted, new balance:",Ye)}console.log("[RetryEdgeFill]  About to call setProcessedFiles..."),d(Ye=>{console.log("[RetryEdgeFill]  Inside setProcessedFiles, prev length:",Ye.length);const Ne=Ye.map(nt=>nt.id===me?(console.log("[RetryEdgeFill]  Updating file:",nt.id,"old URL length:",nt.processedUrl.length,"new URL length:",Re.length),{...nt,processedUrl:Re}):nt);return console.log("[RetryEdgeFill]  Updated array created, length:",Ne.length),Ne}),console.log("[RetryEdgeFill]  setProcessedFiles called")}catch(de){console.error("[RetryEdgeFill]  Retry Edge Fill failed:",de),G(Re=>(Re?Re+" | ":"")+`Edge Fill retry failed for ${we.originalName}: ${de.message}`)}finally{console.log("[RetryEdgeFill]  Finally block, removing from retrying set"),C(de=>{const Re=new Set(de);return Re.delete(me),Re})}},[_e,fe,Oe,En]),Os=ue.useCallback(async()=>{if(u.length!==0){w(!0),G(null);try{const me=new JSZip,we=[...u].sort((Ne,nt)=>{if(Ne.id===t)return-1;if(nt.id===t)return 1;const Ut=parseInt(Ne.id.split("-").pop()||"0"),Xn=parseInt(nt.id.split("-").pop()||"0");return Ne.originalName.localeCompare(nt.originalName)||Ut-Xn}),ye=(Ne,nt)=>("000"+Ne).slice(nt*-1),de=String(we.length).length>3?String(we.length).length:3;for(let Ne=0;Ne<we.length;Ne++){const Ut=we[Ne].processedUrl.split(",")[1],Xn=`frame_${ye(Ne+1,de)}.png`;me.file(Xn,Ut,{base64:!0})}const Re=await me.generateAsync({type:"blob"}),Ye=document.createElement("a");Ye.href=URL.createObjectURL(Re),Ye.download="logo-lapser-export.zip",document.body.appendChild(Ye),Ye.click(),document.body.removeChild(Ye),URL.revokeObjectURL(Ye.href)}catch(me){console.error("Error exporting zip:",me),G("Failed to create the ZIP file. Please try again.")}finally{w(!1)}}},[u,t]),Pr=ue.useMemo(()=>{if(!p||$>=100||Ct.current<=0)return null;const me=Math.max(0,Ct.current-Q);return me<=0?"Almost done...":me<60?`${Math.ceil(me)}s remaining`:`~${Math.ceil(me/60)}m remaining`},[p,$,Q]),Ur=ue.useCallback(async()=>{if(!t||n.length<1){G("Please select a master image and upload at least one other image.");return}const me=n.filter(xt=>xt.id!==t).length,we=se?_e>=4096?"ultra":_e>1024?"premium":"standard":"none",de=pe?0:Wv(me,we,Y?ge:0);if(Oe&&!pe&&!await Kw(de)){Qt({isOpen:!0,creditsNeeded:de});return}f(!0),G(null),d([]),H(0),ae(0),k("Initializing processor...");const Re=()=>new Promise(xt=>setTimeout(xt,0)),Ye=1.2,Ne=9,nt=17;let Ut=n.length*Ye;se&&(Ut+=n.length*Ne),Y&&(Ut+=ge*nt),Ut<=0&&(Ut=1),Ct.current=Ut;const Xn=performance.now(),Qn=setInterval(()=>{const xt=(performance.now()-Xn)/1e3,Yt=Math.floor(xt);ae(Di=>Yt>Di?Yt:Di);const wt=Math.min(1,xt/Ut)*100;H(wt)},33);setTimeout(async()=>{const xt=n.find(ve=>ve.id===t);if(!xt){G("Master file not found."),f(!1);return}const Yt=n.filter(ve=>!ve.isLuminanceInverted&&ve.id!==t),pn=n.filter(ve=>ve.isLuminanceInverted&&ve.id!==t);console.log(`DUAL PIPELINE: ${Yt.length} normal files, ${pn.length} inverted files`);let wt=null;if(pn.length>0){k("Creating inverted master image..."),await Re();try{wt=await DM(xt.imageElement),console.log(" Inverted master image created successfully (from original master)")}catch(ve){console.error("Failed to create inverted master:",ve),G("Failed to create inverted master image")}}const Di=n.filter(ve=>!ve.needsPerspectiveCorrection&&!ve.needsSimpleMatch||ve.needsPerspectiveCorrection&&!Ue&&!ve.needsSimpleMatch),Qi=n.filter(ve=>ve.needsSimpleMatch&&ve.id!==t),Tn=Ue?n.filter(ve=>ve.needsPerspectiveCorrection&&ve.id!==t&&!ve.needsSimpleMatch):[],Pn=Qi.length>0,Lr=Tn.length>0,Br=pn.length>0,Ls=Ie&&n.length>1,Vr=se,Bs=Y&&an.length>0;let Et=1;Pn&&Et++,Lr&&Et++,Ls&&Et++,Vr&&Et++,Bs&&Et++;let et=1;k(`Stage ${et}/${Et}: Aligning standard images...`),await Re();const Ot=ve=>ve.isLuminanceInverted&&wt?(console.log(` Using INVERTED master for: ${ve.file.name}`),wt):(console.log(` Using NORMAL master for: ${ve.file.name}`),xt.imageElement);let Sn=[];for(const ve of Di){try{const Fe=Ot(ve);let{processedUrl:Be,debugUrl:Ge}=await Sa(Fe,ve.imageElement,V,U,!1,oe,ve.id===t,fe,se,!1);Sn.push({id:ve.id,originalName:ve.file.name,processedUrl:Be,debugUrl:Ge}),d([...Sn])}catch(Fe){console.error("Error processing standard file:",ve.file.name,Fe),G(Be=>(Be?Be+" | ":"")+ba(Fe,ve.file.name))}await Re()}Pn&&(et++,k(`Stage ${et}/${Et}: Processing simple match images...`),await Re());let Zi=Sn;if(Qi.length>0){let ve=[];for(const Fe of Qi){try{const Be=Ot(Fe);let{processedUrl:Ge,debugUrl:at}=await Sa(Be,Fe.imageElement,V,U,!1,!0,Fe.id===t,fe,se,!1);ve.push({id:Fe.id,originalName:Fe.file.name,processedUrl:Ge,debugUrl:at}),d([...Sn,...ve])}catch(Be){console.error("Error processing simple match file:",Fe.file.name,Be),G(Ge=>(Ge?Ge+" | ":"")+ba(Be,Fe.file.name))}await Re()}Zi=[...Sn,...ve]}let ze=Zi;if(Tn.length>0){et++,k(`Stage ${et}/${Et}: Aligning perspective images...`),await Re();const ve=Zi.find(Fe=>Fe.id===t);if(ve){const Fe=await _s(ve.processedUrl);let Be=null;if(Br)try{const Ge=await kM(ve.processedUrl);Be=await _s(Ge),console.log(" Inverted perspective master created from processed master")}catch(Ge){console.warn("Could not create inverted perspective master:",Ge)}for(const Ge of Tn){try{const at=Ge.isLuminanceInverted&&Be?Be:Fe;console.log(` Perspective: Using ${Ge.isLuminanceInverted?"INVERTED":"NORMAL"} master for: ${Ge.file.name}`);let{processedUrl:ct,debugUrl:yt}=await Sa(at,Ge.imageElement,V,U,!0,!1,!1,fe,se,!1);ze.push({id:Ge.id,originalName:Ge.file.name,processedUrl:ct,debugUrl:yt}),d([...ze])}catch(at){console.error("Error processing perspective file:",Ge.file.name,at),G(ct=>(ct?ct+" | ":"")+ba(at,Ge.file.name))}await Re()}}}let pi=ze;if(Ls&&ze.length>1){et++,k(`Stage ${et}/${Et}: Applying ensemble correction (separated pipelines)...`),await Re();const ve=ze.find(Fe=>Fe.id===t);if(ve){const Fe=await _s(ve.processedUrl),Be=ze.filter(ct=>{const yt=n.find(it=>it.id===ct.id);return!(yt!=null&&yt.isLuminanceInverted)}),Ge=ze.filter(ct=>{const yt=n.find(it=>it.id===ct.id);return yt==null?void 0:yt.isLuminanceInverted});console.log(`Ensemble Correction: ${Be.length} normal, ${Ge.length} inverted`);let at=[];for(const ct of Be){if(ct.id!==t)try{console.log(`Applying ensemble correction (NORMAL) to ${ct.originalName}...`);const yt=await np(ct.processedUrl,Fe,se);at.push({...ct,processedUrl:yt})}catch(yt){console.error("Error during ensemble refinement (normal):",ct.originalName,yt),at.push(ct)}else at.push(ct);d([...at]),await Re()}if(Ge.length>0){const ct=Ge[0],yt=await _s(ct.processedUrl);console.log(`Using ${ct.originalName} as golden template for inverted group`),at.push(ct);for(let it=1;it<Ge.length;it++){const bn=Ge[it];try{console.log(`Applying ensemble correction (INVERTED) to ${bn.originalName}...`);const gn=await np(bn.processedUrl,yt,se);at.push({...bn,processedUrl:gn})}catch(gn){console.error("Error during ensemble refinement (inverted):",bn.originalName,gn),at.push(bn)}d([...at]),await Re()}}pi=at,d(pi)}}let ln=pi;if(Vr){et++,k(`Stage ${et}/${Et}: Performing AI Edge Fill (${ln.length} images in parallel)...`),await Re();const ve=ln.map(async Be=>{try{const Ge=await Zc(Be.processedUrl,_e,fe);return{...Be,processedUrl:Ge,success:!0}}catch(Ge){return console.error("AI Edge Fill failed for",Be.originalName,Ge),G(at=>(at?at+" | ":"")+`Edge Fill failed for ${Be.originalName}: ${Ge.message}`),{...Be,success:!1}}});ln=(await Promise.all(ve)).map(({success:Be,...Ge})=>Ge),d(ln)}let Zt=ln;if(Y&&an.length>0){et++,k(`Stage ${et}/${Et}: Generating AI variations...`),await Re();let ve=[];const Fe=Zt.find(Be=>Be.id===t);Fe?ve=[Fe]:Zt.length>0&&(ve=[Zt[0]]);for(let Be=0;Be<ge;Be++){k(`Stage ${et}/${Et}: Generating AI variation ${Be+1}/${ge}...`);const Ge=performance.now();console.time(`Generate Variation ${Be+1}`);const at=an[Math.floor(Math.random()*an.length)];let ct=`${M4} The new scene should be: ${at}.`,yt;if(Yi)try{yt=await IM(Yi),ct+=" REFERENCE IMAGE: Use the attached context image as a strong reference for the lighting, color palette, and environment style."}catch(it){console.error("Failed to process context image:",it)}fi.trim()&&(ct+=` CONTEXT/THEME: ${fi.trim()}. Ensure the generated background fits this context perfectly.`);try{const it=await T4(ve,ct,yt),bn=await _s(it),gn=Zt.find(es=>es.id===t);if(gn){const es=await _s(gn.processedUrl),{processedUrl:Vs,debugUrl:Qa}=await Sa(es,bn,!0,!0,!1,!1,!1,fe,se,!1),Pi=`ai-var-${Date.now()}-${Be}`;Zt.push({id:Pi,originalName:`AI: ${at}`,processedUrl:Vs,debugUrl:it})}}catch(it){console.error("Error generating AI variation:",it);const bn=ba(it,`AI Variation ${Be+1}`);G(gn=>(gn?gn+" | ":"")+bn)}finally{console.timeEnd(`Generate Variation ${Be+1}`);const it=(performance.now()-Ge)/1e3;console.log(`Variation ${Be+1} took ${it.toFixed(2)}s`)}await Re()}}if(pe){k("Applying draft mode (360p + watermark)..."),await Re();let ve=[];for(const Fe of Zt){try{const Be=await OM(Fe.processedUrl);ve.push({...Fe,processedUrl:Be})}catch(Be){console.error("Draft mode processing failed for",Fe.originalName,Be),ve.push(Fe)}d([...ve,...Zt.slice(ve.length)]),await Re()}Zt=ve}if(clearInterval(Qn),H(100),Oe&&de>0&&!pe&&await ed(de)){console.log(` Deducted ${de} credits`);const Fe=await gr();Mn(Fe)}d(Zt),k("Processing complete!"),f(!1)},100)},[n,t,V,U,Ie,Ue,se,Y,ge,oe,pe,fe,an,Yi,_e,fi,Oe]),Xi=me=>{if(me<60)return`${me}s`;const we=Math.floor(me/60),ye=me%60;return ye>0?`${we}m ${ye}s`:`${we}m`},hi=ue.useMemo(()=>{if(!n.length)return 0;const me=1.2,we=9,ye=17;let de=n.length*me;return se&&(de+=n.length*we),Y&&(de+=ge*ye),Math.ceil(de)},[n.length,se,Y,ge]),Or=ue.useMemo(()=>{if(pe)return 0;const me=n.filter(de=>de.id!==t).length,we=se?_e>=4096?"ultra":_e>1024?"premium":"standard":"none";return Wv(me,we,Y?ge:0)},[n,t,se,_e,Y,ge,pe]),Dn=Xi(hi);return S.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 flex flex-col items-center p-4 sm:p-6 md:p-8",children:[S.jsx("header",{className:"w-full max-w-7xl mx-auto flex flex-col items-center mb-6",children:S.jsxs("div",{className:"w-full flex items-center",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(_A,{className:"w-10 h-10 text-cyan-400"}),S.jsxs("div",{className:"flex flex-col",children:[S.jsx(wA,{className:"h-7"}),S.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Logo-Lapser"})]})]}),S.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[S.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"v5.3"}),Oe?S.jsx(mI,{user:Oe,credits:ko,onBuyCredits:()=>Mr(!0),onShowInvoices:()=>kr(!0),onShowReferrals:()=>wn(!0)}):S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>{Us("login"),jn(!0)},className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:"Log In"}),S.jsx("button",{onClick:()=>{Us("signup"),jn(!0)},className:"px-4 py-2 text-sm font-medium bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:from-cyan-500 hover:to-blue-500 transition-all",children:"Sign Up"})]})]})]})}),S.jsx(hI,{isOpen:Xt,onClose:()=>jn(!1),initialMode:Nr}),S.jsx(yM,{isOpen:ki,onClose:()=>Mr(!1),onPurchase:me=>{console.log("Purchase package:",me)},userId:Oe==null?void 0:Oe.uid}),S.jsx(vM,{isOpen:qt.isOpen,onClose:()=>Qt({isOpen:!1,creditsNeeded:0}),onBuyCredits:()=>{Qt({isOpen:!1,creditsNeeded:0}),Mr(!0)},creditsNeeded:qt.creditsNeeded,creditsAvailable:ko}),Oe&&S.jsx(CM,{isOpen:Do,onClose:()=>kr(!1),userId:Oe.uid,userEmail:Oe.email}),S.jsx(xM,{isOpen:Ka,onClose:()=>wn(!1),userId:Oe==null?void 0:Oe.uid}),S.jsxs("main",{className:"w-full max-w-[1800px] mx-auto flex-grow flex flex-col items-center justify-center h-full",children:[L&&S.jsxs("div",{className:"w-full bg-red-800/50 border border-red-700 text-red-200 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[S.jsx("strong",{className:"font-bold",children:"Error: "}),S.jsx("span",{className:"block sm:inline",children:L}),S.jsx("button",{onClick:()=>G(null),className:"absolute top-0 bottom-0 right-0 px-4 py-3",title:"Dismiss",children:S.jsx(Ar,{className:"w-5 h-5"})})]}),!ne&&S.jsxs("div",{className:"text-center",children:[S.jsx(Ra,{}),S.jsx("p",{className:"mt-4 text-lg text-gray-400",children:"Loading Image Processor..."})]}),ne&&p&&S.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 animate-fade-in",children:[S.jsx(Ra,{}),S.jsx("p",{className:"text-xl font-semibold mt-4 text-cyan-300",children:M}),S.jsx("div",{className:"w-64 mt-4 bg-gray-700 rounded-full h-2.5 overflow-hidden shadow-inner",children:S.jsx("div",{className:"bg-cyan-400 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${$}%`}})}),S.jsxs("div",{className:"flex flex-col items-center mt-3 gap-1",children:[S.jsxs("p",{className:"text-sm text-gray-400 font-mono",children:[Math.round($),"%"]}),Pr&&S.jsx("p",{className:"text-xs text-cyan-400/80 font-medium animate-pulse",children:Pr})]})]}),ne&&!p&&S.jsx(S.Fragment,{children:n.length===0?S.jsx("div",{className:"w-full max-w-4xl",children:S.jsx(TA,{onDrop:Po})}):S.jsxs("div",{className:"w-full flex flex-col lg:flex-row gap-8 items-start h-full",children:[S.jsxs("div",{className:"w-full lg:w-[420px] flex-shrink-0 flex flex-col gap-6 p-6 bg-gray-800/40 rounded-xl border border-gray-700/50 sticky top-6 backdrop-blur-sm",children:[S.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Settings"}),S.jsx(A4,{value:J,onChange:le,resolution:_e,onResolutionChange:B,imageCount:n.length}),S.jsx("div",{className:"h-px bg-gray-700/50"}),S.jsx(N4,{selectedRatio:fe,onSelectRatio:tt}),u.length>0?S.jsxs("button",{onClick:Kn,className:"w-full mt-2 py-4 px-6 text-lg font-bold text-white bg-red-600 rounded-xl shadow-lg hover:shadow-red-500/20 hover:bg-red-700 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:["Start All Over",S.jsx("span",{className:"block text-xs font-normal opacity-80 mt-1",children:"Reset to upload new files"})]}):!Oe&&!pe?S.jsxs("button",{onClick:()=>jn(!0),disabled:!t,className:"w-full mt-2 py-4 px-6 text-lg font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg hover:shadow-purple-500/20 hover:from-purple-500 hover:to-pink-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",children:["Sign in & Generate",S.jsxs("span",{className:"block text-xs font-normal opacity-80 mt-1",children:["Login required for ",J==="pro"?"Pro":"Fast"," mode"]})]}):S.jsxs("button",{onClick:Ur,disabled:!t,className:"w-full mt-2 py-4 px-6 text-lg font-bold text-white bg-gradient-to-r from-cyan-600 to-blue-600 rounded-xl shadow-lg hover:shadow-cyan-500/20 hover:from-cyan-500 hover:to-blue-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",children:["Align & Generate",S.jsxs("span",{className:"block text-xs font-normal opacity-80 mt-1",children:["Est. time: ~",Dn,Oe&&Or>0&&S.jsxs("span",{className:"ml-2 text-yellow-300",children:[" ",Or," credits"]}),pe&&!Oe&&S.jsx("span",{className:"ml-2 text-yellow-300",children:" FREE (Draft)"})]})]})]}),S.jsx("div",{className:"flex-1 w-full min-w-0 overflow-y-auto",children:u.length>0?S.jsx(bA,{files:u,originalFiles:n,masterFileId:t,isDebugMode:I,onSetDebugMode:x,onBackToSelection:Rt,aspectRatio:fe,onDelete:kn,onPerspectiveFix:Wa,onSimpleMatchFix:Uo,fixingImageId:Ki,onExport:Os,isExporting:_,onRetryEdgeFill:se?Xa:void 0,retryingEdgeFillIds:T,edgeFillCreditCost:En(),isEdgeFillEnabled:se}):S.jsx(SA,{files:n,masterFileId:t,onSelectMaster:Dr,onToggleSimpleMatch:Jn,onToggleLuminanceInversion:Wi,onDelete:Yn})})]})})]})]})}const vS=document.getElementById("root");if(!vS)throw new Error("Could not find root element to mount to");const D4=lA.createRoot(vS);D4.render(S.jsx(eA.StrictMode,{children:S.jsx(k4,{})}));
